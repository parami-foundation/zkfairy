(self.webpackChunkzkfairy=self.webpackChunkzkfairy||[]).push([[3138],{98099:function(Re,_,C){"use strict";Object.defineProperty(_,"__esModule",{value:!0});var H=C(97117);function ce(y,w){return w===void 0&&(w=0),(y[w+0]<<8|y[w+1])<<16>>16}_.readInt16BE=ce;function ue(y,w){return w===void 0&&(w=0),(y[w+0]<<8|y[w+1])>>>0}_.readUint16BE=ue;function ge(y,w){return w===void 0&&(w=0),(y[w+1]<<8|y[w])<<16>>16}_.readInt16LE=ge;function B(y,w){return w===void 0&&(w=0),(y[w+1]<<8|y[w])>>>0}_.readUint16LE=B;function re(y,w,S){return w===void 0&&(w=new Uint8Array(2)),S===void 0&&(S=0),w[S+0]=y>>>8,w[S+1]=y>>>0,w}_.writeUint16BE=re,_.writeInt16BE=re;function z(y,w,S){return w===void 0&&(w=new Uint8Array(2)),S===void 0&&(S=0),w[S+0]=y>>>0,w[S+1]=y>>>8,w}_.writeUint16LE=z,_.writeInt16LE=z;function N(y,w){return w===void 0&&(w=0),y[w]<<24|y[w+1]<<16|y[w+2]<<8|y[w+3]}_.readInt32BE=N;function T(y,w){return w===void 0&&(w=0),(y[w]<<24|y[w+1]<<16|y[w+2]<<8|y[w+3])>>>0}_.readUint32BE=T;function j(y,w){return w===void 0&&(w=0),y[w+3]<<24|y[w+2]<<16|y[w+1]<<8|y[w]}_.readInt32LE=j;function ie(y,w){return w===void 0&&(w=0),(y[w+3]<<24|y[w+2]<<16|y[w+1]<<8|y[w])>>>0}_.readUint32LE=ie;function le(y,w,S){return w===void 0&&(w=new Uint8Array(4)),S===void 0&&(S=0),w[S+0]=y>>>24,w[S+1]=y>>>16,w[S+2]=y>>>8,w[S+3]=y>>>0,w}_.writeUint32BE=le,_.writeInt32BE=le;function Z(y,w,S){return w===void 0&&(w=new Uint8Array(4)),S===void 0&&(S=0),w[S+0]=y>>>0,w[S+1]=y>>>8,w[S+2]=y>>>16,w[S+3]=y>>>24,w}_.writeUint32LE=Z,_.writeInt32LE=Z;function ne(y,w){w===void 0&&(w=0);var S=N(y,w),q=N(y,w+4);return S*4294967296+q-(q>>31)*4294967296}_.readInt64BE=ne;function fe(y,w){w===void 0&&(w=0);var S=T(y,w),q=T(y,w+4);return S*4294967296+q}_.readUint64BE=fe;function Pe(y,w){w===void 0&&(w=0);var S=j(y,w),q=j(y,w+4);return q*4294967296+S-(S>>31)*4294967296}_.readInt64LE=Pe;function De(y,w){w===void 0&&(w=0);var S=ie(y,w),q=ie(y,w+4);return q*4294967296+S}_.readUint64LE=De;function Ce(y,w,S){return w===void 0&&(w=new Uint8Array(8)),S===void 0&&(S=0),le(y/4294967296>>>0,w,S),le(y>>>0,w,S+4),w}_.writeUint64BE=Ce,_.writeInt64BE=Ce;function Ke(y,w,S){return w===void 0&&(w=new Uint8Array(8)),S===void 0&&(S=0),Z(y>>>0,w,S),Z(y/4294967296>>>0,w,S+4),w}_.writeUint64LE=Ke,_.writeInt64LE=Ke;function Ue(y,w,S){if(S===void 0&&(S=0),y%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(y/8>w.length-S)throw new Error("readUintBE: array is too short for the given bitLength");for(var q=0,A=1,V=y/8+S-1;V>=S;V--)q+=w[V]*A,A*=256;return q}_.readUintBE=Ue;function ye(y,w,S){if(S===void 0&&(S=0),y%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(y/8>w.length-S)throw new Error("readUintLE: array is too short for the given bitLength");for(var q=0,A=1,V=S;V<S+y/8;V++)q+=w[V]*A,A*=256;return q}_.readUintLE=ye;function we(y,w,S,q){if(S===void 0&&(S=new Uint8Array(y/8)),q===void 0&&(q=0),y%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!H.isSafeInteger(w))throw new Error("writeUintBE value must be an integer");for(var A=1,V=y/8+q-1;V>=q;V--)S[V]=w/A&255,A*=256;return S}_.writeUintBE=we;function x(y,w,S,q){if(S===void 0&&(S=new Uint8Array(y/8)),q===void 0&&(q=0),y%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!H.isSafeInteger(w))throw new Error("writeUintLE value must be an integer");for(var A=1,V=q;V<q+y/8;V++)S[V]=w/A&255,A*=256;return S}_.writeUintLE=x;function h(y,w){w===void 0&&(w=0);var S=new DataView(y.buffer,y.byteOffset,y.byteLength);return S.getFloat32(w)}_.readFloat32BE=h;function P(y,w){w===void 0&&(w=0);var S=new DataView(y.buffer,y.byteOffset,y.byteLength);return S.getFloat32(w,!0)}_.readFloat32LE=P;function W(y,w){w===void 0&&(w=0);var S=new DataView(y.buffer,y.byteOffset,y.byteLength);return S.getFloat64(w)}_.readFloat64BE=W;function f(y,w){w===void 0&&(w=0);var S=new DataView(y.buffer,y.byteOffset,y.byteLength);return S.getFloat64(w,!0)}_.readFloat64LE=f;function E(y,w,S){w===void 0&&(w=new Uint8Array(4)),S===void 0&&(S=0);var q=new DataView(w.buffer,w.byteOffset,w.byteLength);return q.setFloat32(S,y),w}_.writeFloat32BE=E;function g(y,w,S){w===void 0&&(w=new Uint8Array(4)),S===void 0&&(S=0);var q=new DataView(w.buffer,w.byteOffset,w.byteLength);return q.setFloat32(S,y,!0),w}_.writeFloat32LE=g;function v(y,w,S){w===void 0&&(w=new Uint8Array(8)),S===void 0&&(S=0);var q=new DataView(w.buffer,w.byteOffset,w.byteLength);return q.setFloat64(S,y),w}_.writeFloat64BE=v;function m(y,w,S){w===void 0&&(w=new Uint8Array(8)),S===void 0&&(S=0);var q=new DataView(w.buffer,w.byteOffset,w.byteLength);return q.setFloat64(S,y,!0),w}_.writeFloat64LE=m},25439:function(Re,_,C){"use strict";Object.defineProperty(_,"__esModule",{value:!0});var H=C(98099),ce=C(17309),ue=20;function ge(N,T,j){for(var ie=1634760805,le=857760878,Z=2036477234,ne=1797285236,fe=j[3]<<24|j[2]<<16|j[1]<<8|j[0],Pe=j[7]<<24|j[6]<<16|j[5]<<8|j[4],De=j[11]<<24|j[10]<<16|j[9]<<8|j[8],Ce=j[15]<<24|j[14]<<16|j[13]<<8|j[12],Ke=j[19]<<24|j[18]<<16|j[17]<<8|j[16],Ue=j[23]<<24|j[22]<<16|j[21]<<8|j[20],ye=j[27]<<24|j[26]<<16|j[25]<<8|j[24],we=j[31]<<24|j[30]<<16|j[29]<<8|j[28],x=T[3]<<24|T[2]<<16|T[1]<<8|T[0],h=T[7]<<24|T[6]<<16|T[5]<<8|T[4],P=T[11]<<24|T[10]<<16|T[9]<<8|T[8],W=T[15]<<24|T[14]<<16|T[13]<<8|T[12],f=ie,E=le,g=Z,v=ne,m=fe,y=Pe,w=De,S=Ce,q=Ke,A=Ue,V=ye,xe=we,Q=x,pe=h,Oe=P,Ne=W,Be=0;Be<ue;Be+=2)f=f+m|0,Q^=f,Q=Q>>>32-16|Q<<16,q=q+Q|0,m^=q,m=m>>>32-12|m<<12,E=E+y|0,pe^=E,pe=pe>>>32-16|pe<<16,A=A+pe|0,y^=A,y=y>>>32-12|y<<12,g=g+w|0,Oe^=g,Oe=Oe>>>32-16|Oe<<16,V=V+Oe|0,w^=V,w=w>>>32-12|w<<12,v=v+S|0,Ne^=v,Ne=Ne>>>32-16|Ne<<16,xe=xe+Ne|0,S^=xe,S=S>>>32-12|S<<12,g=g+w|0,Oe^=g,Oe=Oe>>>32-8|Oe<<8,V=V+Oe|0,w^=V,w=w>>>32-7|w<<7,v=v+S|0,Ne^=v,Ne=Ne>>>32-8|Ne<<8,xe=xe+Ne|0,S^=xe,S=S>>>32-7|S<<7,E=E+y|0,pe^=E,pe=pe>>>32-8|pe<<8,A=A+pe|0,y^=A,y=y>>>32-7|y<<7,f=f+m|0,Q^=f,Q=Q>>>32-8|Q<<8,q=q+Q|0,m^=q,m=m>>>32-7|m<<7,f=f+y|0,Ne^=f,Ne=Ne>>>32-16|Ne<<16,V=V+Ne|0,y^=V,y=y>>>32-12|y<<12,E=E+w|0,Q^=E,Q=Q>>>32-16|Q<<16,xe=xe+Q|0,w^=xe,w=w>>>32-12|w<<12,g=g+S|0,pe^=g,pe=pe>>>32-16|pe<<16,q=q+pe|0,S^=q,S=S>>>32-12|S<<12,v=v+m|0,Oe^=v,Oe=Oe>>>32-16|Oe<<16,A=A+Oe|0,m^=A,m=m>>>32-12|m<<12,g=g+S|0,pe^=g,pe=pe>>>32-8|pe<<8,q=q+pe|0,S^=q,S=S>>>32-7|S<<7,v=v+m|0,Oe^=v,Oe=Oe>>>32-8|Oe<<8,A=A+Oe|0,m^=A,m=m>>>32-7|m<<7,E=E+w|0,Q^=E,Q=Q>>>32-8|Q<<8,xe=xe+Q|0,w^=xe,w=w>>>32-7|w<<7,f=f+y|0,Ne^=f,Ne=Ne>>>32-8|Ne<<8,V=V+Ne|0,y^=V,y=y>>>32-7|y<<7;H.writeUint32LE(f+ie|0,N,0),H.writeUint32LE(E+le|0,N,4),H.writeUint32LE(g+Z|0,N,8),H.writeUint32LE(v+ne|0,N,12),H.writeUint32LE(m+fe|0,N,16),H.writeUint32LE(y+Pe|0,N,20),H.writeUint32LE(w+De|0,N,24),H.writeUint32LE(S+Ce|0,N,28),H.writeUint32LE(q+Ke|0,N,32),H.writeUint32LE(A+Ue|0,N,36),H.writeUint32LE(V+ye|0,N,40),H.writeUint32LE(xe+we|0,N,44),H.writeUint32LE(Q+x|0,N,48),H.writeUint32LE(pe+h|0,N,52),H.writeUint32LE(Oe+P|0,N,56),H.writeUint32LE(Ne+W|0,N,60)}function B(N,T,j,ie,le){if(le===void 0&&(le=0),N.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(ie.length<j.length)throw new Error("ChaCha: destination is shorter than source");var Z,ne;if(le===0){if(T.length!==8&&T.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");Z=new Uint8Array(16),ne=Z.length-T.length,Z.set(T,ne)}else{if(T.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");Z=T,ne=le}for(var fe=new Uint8Array(64),Pe=0;Pe<j.length;Pe+=64){ge(fe,Z,N);for(var De=Pe;De<Pe+64&&De<j.length;De++)ie[De]=j[De]^fe[De-Pe];z(Z,0,ne)}return ce.wipe(fe),le===0&&ce.wipe(Z),ie}_.streamXOR=B;function re(N,T,j,ie){return ie===void 0&&(ie=0),ce.wipe(j),B(N,T,j,j,ie)}_.stream=re;function z(N,T,j){for(var ie=1;j--;)ie=ie+(N[T]&255)|0,N[T]=ie&255,ie>>>=8,T++;if(ie>0)throw new Error("ChaCha: counter overflow")}},15501:function(Re,_,C){"use strict";var H;H={value:!0};var ce=C(25439),ue=C(63027),ge=C(17309),B=C(98099),re=C(4153);_.Cv=32,_.WH=12,_.pg=16;var z=new Uint8Array(16),N=function(){function T(j){if(this.nonceLength=_.WH,this.tagLength=_.pg,j.length!==_.Cv)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(j)}return T.prototype.seal=function(j,ie,le,Z){if(j.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var ne=new Uint8Array(16);ne.set(j,ne.length-j.length);var fe=new Uint8Array(32);ce.stream(this._key,ne,fe,4);var Pe=ie.length+this.tagLength,De;if(Z){if(Z.length!==Pe)throw new Error("ChaCha20Poly1305: incorrect destination length");De=Z}else De=new Uint8Array(Pe);return ce.streamXOR(this._key,ne,ie,De,4),this._authenticate(De.subarray(De.length-this.tagLength,De.length),fe,De.subarray(0,De.length-this.tagLength),le),ge.wipe(ne),De},T.prototype.open=function(j,ie,le,Z){if(j.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(ie.length<this.tagLength)return null;var ne=new Uint8Array(16);ne.set(j,ne.length-j.length);var fe=new Uint8Array(32);ce.stream(this._key,ne,fe,4);var Pe=new Uint8Array(this.tagLength);if(this._authenticate(Pe,fe,ie.subarray(0,ie.length-this.tagLength),le),!re.equal(Pe,ie.subarray(ie.length-this.tagLength,ie.length)))return null;var De=ie.length-this.tagLength,Ce;if(Z){if(Z.length!==De)throw new Error("ChaCha20Poly1305: incorrect destination length");Ce=Z}else Ce=new Uint8Array(De);return ce.streamXOR(this._key,ne,ie.subarray(0,ie.length-this.tagLength),Ce,4),ge.wipe(ne),Ce},T.prototype.clean=function(){return ge.wipe(this._key),this},T.prototype._authenticate=function(j,ie,le,Z){var ne=new ue.Poly1305(ie);Z&&(ne.update(Z),Z.length%16>0&&ne.update(z.subarray(Z.length%16))),ne.update(le),le.length%16>0&&ne.update(z.subarray(le.length%16));var fe=new Uint8Array(8);Z&&B.writeUint64LE(Z.length,fe),ne.update(fe),B.writeUint64LE(le.length,fe),ne.update(fe);for(var Pe=ne.digest(),De=0;De<Pe.length;De++)j[De]=Pe[De];ne.clean(),ge.wipe(Pe),ge.wipe(fe)},T}();_.OK=N},4153:function(Re,_){"use strict";Object.defineProperty(_,"__esModule",{value:!0});function C(ge,B,re){return~(ge-1)&B|ge-1&re}_.select=C;function H(ge,B){return(ge|0)-(B|0)-1>>>31&1}_.lessOrEqual=H;function ce(ge,B){if(ge.length!==B.length)return 0;for(var re=0,z=0;z<ge.length;z++)re|=ge[z]^B[z];return 1&re-1>>>8}_.compare=ce;function ue(ge,B){return ge.length===0||B.length===0?!1:ce(ge,B)!==0}_.equal=ue},31050:function(Re,_,C){"use strict";var H;H={value:!0},H=H=H=_.Xx=H=H=_._w=_.aP=_.KS=H=_.jQ=void 0;const ce=C(31416),ue=C(93350),ge=C(17309);_.jQ=64,H=32,_.KS=64,_.aP=32;function B(se){const ae=new Float64Array(16);if(se)for(let k=0;k<se.length;k++)ae[k]=se[k];return ae}const re=new Uint8Array(32);re[0]=9;const z=B(),N=B([1]),T=B([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),j=B([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),ie=B([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),le=B([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),Z=B([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function ne(se,ae){for(let k=0;k<16;k++)se[k]=ae[k]|0}function fe(se){let ae=1;for(let k=0;k<16;k++){let d=se[k]+ae+65535;ae=Math.floor(d/65536),se[k]=d-ae*65536}se[0]+=ae-1+37*(ae-1)}function Pe(se,ae,k){const d=~(k-1);for(let $=0;$<16;$++){const Ae=d&(se[$]^ae[$]);se[$]^=Ae,ae[$]^=Ae}}function De(se,ae){const k=B(),d=B();for(let $=0;$<16;$++)d[$]=ae[$];fe(d),fe(d),fe(d);for(let $=0;$<2;$++){k[0]=d[0]-65517;for(let We=1;We<15;We++)k[We]=d[We]-65535-(k[We-1]>>16&1),k[We-1]&=65535;k[15]=d[15]-32767-(k[14]>>16&1);const Ae=k[15]>>16&1;k[14]&=65535,Pe(d,k,1-Ae)}for(let $=0;$<16;$++)se[2*$]=d[$]&255,se[2*$+1]=d[$]>>8}function Ce(se,ae){let k=0;for(let d=0;d<32;d++)k|=se[d]^ae[d];return(1&k-1>>>8)-1}function Ke(se,ae){const k=new Uint8Array(32),d=new Uint8Array(32);return De(k,se),De(d,ae),Ce(k,d)}function Ue(se){const ae=new Uint8Array(32);return De(ae,se),ae[0]&1}function ye(se,ae){for(let k=0;k<16;k++)se[k]=ae[2*k]+(ae[2*k+1]<<8);se[15]&=32767}function we(se,ae,k){for(let d=0;d<16;d++)se[d]=ae[d]+k[d]}function x(se,ae,k){for(let d=0;d<16;d++)se[d]=ae[d]-k[d]}function h(se,ae,k){let d,$,Ae=0,We=0,ht=0,Ot=0,pt=0,gt=0,Vt=0,rr=0,_t=0,yt=0,dt=0,lt=0,at=0,et=0,tt=0,nt=0,qe=0,vt=0,wt=0,It=0,xt=0,Et=0,Pt=0,Tt=0,an=0,Sr=0,mn=0,zn=0,oi=0,An=0,Rn=0,Qt=k[0],Xt=k[1],Jt=k[2],qt=k[3],cr=k[4],nr=k[5],Zt=k[6],ur=k[7],hr=k[8],ir=k[9],er=k[10],Mt=k[11],lr=k[12],fr=k[13],dr=k[14],pr=k[15];d=ae[0],Ae+=d*Qt,We+=d*Xt,ht+=d*Jt,Ot+=d*qt,pt+=d*cr,gt+=d*nr,Vt+=d*Zt,rr+=d*ur,_t+=d*hr,yt+=d*ir,dt+=d*er,lt+=d*Mt,at+=d*lr,et+=d*fr,tt+=d*dr,nt+=d*pr,d=ae[1],We+=d*Qt,ht+=d*Xt,Ot+=d*Jt,pt+=d*qt,gt+=d*cr,Vt+=d*nr,rr+=d*Zt,_t+=d*ur,yt+=d*hr,dt+=d*ir,lt+=d*er,at+=d*Mt,et+=d*lr,tt+=d*fr,nt+=d*dr,qe+=d*pr,d=ae[2],ht+=d*Qt,Ot+=d*Xt,pt+=d*Jt,gt+=d*qt,Vt+=d*cr,rr+=d*nr,_t+=d*Zt,yt+=d*ur,dt+=d*hr,lt+=d*ir,at+=d*er,et+=d*Mt,tt+=d*lr,nt+=d*fr,qe+=d*dr,vt+=d*pr,d=ae[3],Ot+=d*Qt,pt+=d*Xt,gt+=d*Jt,Vt+=d*qt,rr+=d*cr,_t+=d*nr,yt+=d*Zt,dt+=d*ur,lt+=d*hr,at+=d*ir,et+=d*er,tt+=d*Mt,nt+=d*lr,qe+=d*fr,vt+=d*dr,wt+=d*pr,d=ae[4],pt+=d*Qt,gt+=d*Xt,Vt+=d*Jt,rr+=d*qt,_t+=d*cr,yt+=d*nr,dt+=d*Zt,lt+=d*ur,at+=d*hr,et+=d*ir,tt+=d*er,nt+=d*Mt,qe+=d*lr,vt+=d*fr,wt+=d*dr,It+=d*pr,d=ae[5],gt+=d*Qt,Vt+=d*Xt,rr+=d*Jt,_t+=d*qt,yt+=d*cr,dt+=d*nr,lt+=d*Zt,at+=d*ur,et+=d*hr,tt+=d*ir,nt+=d*er,qe+=d*Mt,vt+=d*lr,wt+=d*fr,It+=d*dr,xt+=d*pr,d=ae[6],Vt+=d*Qt,rr+=d*Xt,_t+=d*Jt,yt+=d*qt,dt+=d*cr,lt+=d*nr,at+=d*Zt,et+=d*ur,tt+=d*hr,nt+=d*ir,qe+=d*er,vt+=d*Mt,wt+=d*lr,It+=d*fr,xt+=d*dr,Et+=d*pr,d=ae[7],rr+=d*Qt,_t+=d*Xt,yt+=d*Jt,dt+=d*qt,lt+=d*cr,at+=d*nr,et+=d*Zt,tt+=d*ur,nt+=d*hr,qe+=d*ir,vt+=d*er,wt+=d*Mt,It+=d*lr,xt+=d*fr,Et+=d*dr,Pt+=d*pr,d=ae[8],_t+=d*Qt,yt+=d*Xt,dt+=d*Jt,lt+=d*qt,at+=d*cr,et+=d*nr,tt+=d*Zt,nt+=d*ur,qe+=d*hr,vt+=d*ir,wt+=d*er,It+=d*Mt,xt+=d*lr,Et+=d*fr,Pt+=d*dr,Tt+=d*pr,d=ae[9],yt+=d*Qt,dt+=d*Xt,lt+=d*Jt,at+=d*qt,et+=d*cr,tt+=d*nr,nt+=d*Zt,qe+=d*ur,vt+=d*hr,wt+=d*ir,It+=d*er,xt+=d*Mt,Et+=d*lr,Pt+=d*fr,Tt+=d*dr,an+=d*pr,d=ae[10],dt+=d*Qt,lt+=d*Xt,at+=d*Jt,et+=d*qt,tt+=d*cr,nt+=d*nr,qe+=d*Zt,vt+=d*ur,wt+=d*hr,It+=d*ir,xt+=d*er,Et+=d*Mt,Pt+=d*lr,Tt+=d*fr,an+=d*dr,Sr+=d*pr,d=ae[11],lt+=d*Qt,at+=d*Xt,et+=d*Jt,tt+=d*qt,nt+=d*cr,qe+=d*nr,vt+=d*Zt,wt+=d*ur,It+=d*hr,xt+=d*ir,Et+=d*er,Pt+=d*Mt,Tt+=d*lr,an+=d*fr,Sr+=d*dr,mn+=d*pr,d=ae[12],at+=d*Qt,et+=d*Xt,tt+=d*Jt,nt+=d*qt,qe+=d*cr,vt+=d*nr,wt+=d*Zt,It+=d*ur,xt+=d*hr,Et+=d*ir,Pt+=d*er,Tt+=d*Mt,an+=d*lr,Sr+=d*fr,mn+=d*dr,zn+=d*pr,d=ae[13],et+=d*Qt,tt+=d*Xt,nt+=d*Jt,qe+=d*qt,vt+=d*cr,wt+=d*nr,It+=d*Zt,xt+=d*ur,Et+=d*hr,Pt+=d*ir,Tt+=d*er,an+=d*Mt,Sr+=d*lr,mn+=d*fr,zn+=d*dr,oi+=d*pr,d=ae[14],tt+=d*Qt,nt+=d*Xt,qe+=d*Jt,vt+=d*qt,wt+=d*cr,It+=d*nr,xt+=d*Zt,Et+=d*ur,Pt+=d*hr,Tt+=d*ir,an+=d*er,Sr+=d*Mt,mn+=d*lr,zn+=d*fr,oi+=d*dr,An+=d*pr,d=ae[15],nt+=d*Qt,qe+=d*Xt,vt+=d*Jt,wt+=d*qt,It+=d*cr,xt+=d*nr,Et+=d*Zt,Pt+=d*ur,Tt+=d*hr,an+=d*ir,Sr+=d*er,mn+=d*Mt,zn+=d*lr,oi+=d*fr,An+=d*dr,Rn+=d*pr,Ae+=38*qe,We+=38*vt,ht+=38*wt,Ot+=38*It,pt+=38*xt,gt+=38*Et,Vt+=38*Pt,rr+=38*Tt,_t+=38*an,yt+=38*Sr,dt+=38*mn,lt+=38*zn,at+=38*oi,et+=38*An,tt+=38*Rn,$=1,d=Ae+$+65535,$=Math.floor(d/65536),Ae=d-$*65536,d=We+$+65535,$=Math.floor(d/65536),We=d-$*65536,d=ht+$+65535,$=Math.floor(d/65536),ht=d-$*65536,d=Ot+$+65535,$=Math.floor(d/65536),Ot=d-$*65536,d=pt+$+65535,$=Math.floor(d/65536),pt=d-$*65536,d=gt+$+65535,$=Math.floor(d/65536),gt=d-$*65536,d=Vt+$+65535,$=Math.floor(d/65536),Vt=d-$*65536,d=rr+$+65535,$=Math.floor(d/65536),rr=d-$*65536,d=_t+$+65535,$=Math.floor(d/65536),_t=d-$*65536,d=yt+$+65535,$=Math.floor(d/65536),yt=d-$*65536,d=dt+$+65535,$=Math.floor(d/65536),dt=d-$*65536,d=lt+$+65535,$=Math.floor(d/65536),lt=d-$*65536,d=at+$+65535,$=Math.floor(d/65536),at=d-$*65536,d=et+$+65535,$=Math.floor(d/65536),et=d-$*65536,d=tt+$+65535,$=Math.floor(d/65536),tt=d-$*65536,d=nt+$+65535,$=Math.floor(d/65536),nt=d-$*65536,Ae+=$-1+37*($-1),$=1,d=Ae+$+65535,$=Math.floor(d/65536),Ae=d-$*65536,d=We+$+65535,$=Math.floor(d/65536),We=d-$*65536,d=ht+$+65535,$=Math.floor(d/65536),ht=d-$*65536,d=Ot+$+65535,$=Math.floor(d/65536),Ot=d-$*65536,d=pt+$+65535,$=Math.floor(d/65536),pt=d-$*65536,d=gt+$+65535,$=Math.floor(d/65536),gt=d-$*65536,d=Vt+$+65535,$=Math.floor(d/65536),Vt=d-$*65536,d=rr+$+65535,$=Math.floor(d/65536),rr=d-$*65536,d=_t+$+65535,$=Math.floor(d/65536),_t=d-$*65536,d=yt+$+65535,$=Math.floor(d/65536),yt=d-$*65536,d=dt+$+65535,$=Math.floor(d/65536),dt=d-$*65536,d=lt+$+65535,$=Math.floor(d/65536),lt=d-$*65536,d=at+$+65535,$=Math.floor(d/65536),at=d-$*65536,d=et+$+65535,$=Math.floor(d/65536),et=d-$*65536,d=tt+$+65535,$=Math.floor(d/65536),tt=d-$*65536,d=nt+$+65535,$=Math.floor(d/65536),nt=d-$*65536,Ae+=$-1+37*($-1),se[0]=Ae,se[1]=We,se[2]=ht,se[3]=Ot,se[4]=pt,se[5]=gt,se[6]=Vt,se[7]=rr,se[8]=_t,se[9]=yt,se[10]=dt,se[11]=lt,se[12]=at,se[13]=et,se[14]=tt,se[15]=nt}function P(se,ae){h(se,ae,ae)}function W(se,ae){const k=B();let d;for(d=0;d<16;d++)k[d]=ae[d];for(d=253;d>=0;d--)P(k,k),d!==2&&d!==4&&h(k,k,ae);for(d=0;d<16;d++)se[d]=k[d]}function f(se,ae){const k=B();let d;for(d=0;d<16;d++)k[d]=ae[d];for(d=250;d>=0;d--)P(k,k),d!==1&&h(k,k,ae);for(d=0;d<16;d++)se[d]=k[d]}function E(se,ae){const k=B(),d=B(),$=B(),Ae=B(),We=B(),ht=B(),Ot=B(),pt=B(),gt=B();x(k,se[1],se[0]),x(gt,ae[1],ae[0]),h(k,k,gt),we(d,se[0],se[1]),we(gt,ae[0],ae[1]),h(d,d,gt),h($,se[3],ae[3]),h($,$,j),h(Ae,se[2],ae[2]),we(Ae,Ae,Ae),x(We,d,k),x(ht,Ae,$),we(Ot,Ae,$),we(pt,d,k),h(se[0],We,ht),h(se[1],pt,Ot),h(se[2],Ot,ht),h(se[3],We,pt)}function g(se,ae,k){for(let d=0;d<4;d++)Pe(se[d],ae[d],k)}function v(se,ae){const k=B(),d=B(),$=B();W($,ae[2]),h(k,ae[0],$),h(d,ae[1],$),De(se,d),se[31]^=Ue(k)<<7}function m(se,ae,k){ne(se[0],z),ne(se[1],N),ne(se[2],N),ne(se[3],z);for(let d=255;d>=0;--d){const $=k[d/8|0]>>(d&7)&1;g(se,ae,$),E(ae,se),E(se,se),g(se,ae,$)}}function y(se,ae){const k=[B(),B(),B(),B()];ne(k[0],ie),ne(k[1],le),ne(k[2],N),h(k[3],ie,le),m(se,k,ae)}function w(se){if(se.length!==_.aP)throw new Error(`ed25519: seed must be ${_.aP} bytes`);const ae=(0,ue.hash)(se);ae[0]&=248,ae[31]&=127,ae[31]|=64;const k=new Uint8Array(32),d=[B(),B(),B(),B()];y(d,ae),v(k,d);const $=new Uint8Array(64);return $.set(se),$.set(k,32),{publicKey:k,secretKey:$}}_._w=w;function S(se){const ae=(0,ce.randomBytes)(32,se),k=w(ae);return(0,ge.wipe)(ae),k}H=S;function q(se){if(se.length!==_.KS)throw new Error(`ed25519: secret key must be ${_.KS} bytes`);return new Uint8Array(se.subarray(32))}H=q;const A=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function V(se,ae){let k,d,$,Ae;for(d=63;d>=32;--d){for(k=0,$=d-32,Ae=d-12;$<Ae;++$)ae[$]+=k-16*ae[d]*A[$-(d-32)],k=Math.floor((ae[$]+128)/256),ae[$]-=k*256;ae[$]+=k,ae[d]=0}for(k=0,$=0;$<32;$++)ae[$]+=k-(ae[31]>>4)*A[$],k=ae[$]>>8,ae[$]&=255;for($=0;$<32;$++)ae[$]-=k*A[$];for(d=0;d<32;d++)ae[d+1]+=ae[d]>>8,se[d]=ae[d]&255}function xe(se){const ae=new Float64Array(64);for(let k=0;k<64;k++)ae[k]=se[k];for(let k=0;k<64;k++)se[k]=0;V(se,ae)}function Q(se,ae){const k=new Float64Array(64),d=[B(),B(),B(),B()],$=(0,ue.hash)(se.subarray(0,32));$[0]&=248,$[31]&=127,$[31]|=64;const Ae=new Uint8Array(64);Ae.set($.subarray(32),32);const We=new ue.SHA512;We.update(Ae.subarray(32)),We.update(ae);const ht=We.digest();We.clean(),xe(ht),y(d,ht),v(Ae,d),We.reset(),We.update(Ae.subarray(0,32)),We.update(se.subarray(32)),We.update(ae);const Ot=We.digest();xe(Ot);for(let pt=0;pt<32;pt++)k[pt]=ht[pt];for(let pt=0;pt<32;pt++)for(let gt=0;gt<32;gt++)k[pt+gt]+=Ot[pt]*$[gt];return V(Ae.subarray(32),k),Ae}_.Xx=Q;function pe(se,ae){const k=B(),d=B(),$=B(),Ae=B(),We=B(),ht=B(),Ot=B();return ne(se[2],N),ye(se[1],ae),P($,se[1]),h(Ae,$,T),x($,$,se[2]),we(Ae,se[2],Ae),P(We,Ae),P(ht,We),h(Ot,ht,We),h(k,Ot,$),h(k,k,Ae),f(k,k),h(k,k,$),h(k,k,Ae),h(k,k,Ae),h(se[0],k,Ae),P(d,se[0]),h(d,d,Ae),Ke(d,$)&&h(se[0],se[0],Z),P(d,se[0]),h(d,d,Ae),Ke(d,$)?-1:(Ue(se[0])===ae[31]>>7&&x(se[0],z,se[0]),h(se[3],se[0],se[1]),0)}function Oe(se,ae,k){const d=new Uint8Array(32),$=[B(),B(),B(),B()],Ae=[B(),B(),B(),B()];if(k.length!==_.jQ)throw new Error(`ed25519: signature must be ${_.jQ} bytes`);if(pe(Ae,se))return!1;const We=new ue.SHA512;We.update(k.subarray(0,32)),We.update(se),We.update(ae);const ht=We.digest();return xe(ht),m($,Ae,ht),y(Ae,k.subarray(32)),E($,Ae),v(d,$),!Ce(k,d)}H=Oe;function Ne(se){let ae=[B(),B(),B(),B()];if(pe(ae,se))throw new Error("Ed25519: invalid public key");let k=B(),d=B(),$=ae[1];we(k,N,$),x(d,N,$),W(d,d),h(k,k,d);let Ae=new Uint8Array(32);return De(Ae,k),Ae}H=Ne;function Be(se){const ae=(0,ue.hash)(se.subarray(0,32));ae[0]&=248,ae[31]&=127,ae[31]|=64;const k=new Uint8Array(ae.subarray(0,32));return(0,ge.wipe)(ae),k}H=Be},79984:function(Re,_){"use strict";Object.defineProperty(_,"__esModule",{value:!0});function C(H){return typeof H.saveState<"u"&&typeof H.restoreState<"u"&&typeof H.cleanSavedState<"u"}_.isSerializableHash=C},512:function(Re,_,C){"use strict";var H;H={value:!0};var ce=C(25629),ue=C(17309),ge=function(){function B(re,z,N,T){N===void 0&&(N=new Uint8Array(0)),this._counter=new Uint8Array(1),this._hash=re,this._info=T;var j=ce.hmac(this._hash,N,z);this._hmac=new ce.HMAC(re,j),this._buffer=new Uint8Array(this._hmac.digestLength),this._bufpos=this._buffer.length}return B.prototype._fillBuffer=function(){this._counter[0]++;var re=this._counter[0];if(re===0)throw new Error("hkdf: cannot expand more");this._hmac.reset(),re>1&&this._hmac.update(this._buffer),this._info&&this._hmac.update(this._info),this._hmac.update(this._counter),this._hmac.finish(this._buffer),this._bufpos=0},B.prototype.expand=function(re){for(var z=new Uint8Array(re),N=0;N<z.length;N++)this._bufpos===this._buffer.length&&this._fillBuffer(),z[N]=this._buffer[this._bufpos++];return z},B.prototype.clean=function(){this._hmac.clean(),ue.wipe(this._buffer),ue.wipe(this._counter),this._bufpos=0},B}();_.t=ge},25629:function(Re,_,C){"use strict";Object.defineProperty(_,"__esModule",{value:!0});var H=C(79984),ce=C(4153),ue=C(17309),ge=function(){function re(z,N){this._finished=!1,this._inner=new z,this._outer=new z,this.blockSize=this._outer.blockSize,this.digestLength=this._outer.digestLength;var T=new Uint8Array(this.blockSize);N.length>this.blockSize?this._inner.update(N).finish(T).clean():T.set(N);for(var j=0;j<T.length;j++)T[j]^=54;this._inner.update(T);for(var j=0;j<T.length;j++)T[j]^=106;this._outer.update(T),H.isSerializableHash(this._inner)&&H.isSerializableHash(this._outer)&&(this._innerKeyedState=this._inner.saveState(),this._outerKeyedState=this._outer.saveState()),ue.wipe(T)}return re.prototype.reset=function(){if(!H.isSerializableHash(this._inner)||!H.isSerializableHash(this._outer))throw new Error("hmac: can't reset() because hash doesn't implement restoreState()");return this._inner.restoreState(this._innerKeyedState),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},re.prototype.clean=function(){H.isSerializableHash(this._inner)&&this._inner.cleanSavedState(this._innerKeyedState),H.isSerializableHash(this._outer)&&this._outer.cleanSavedState(this._outerKeyedState),this._inner.clean(),this._outer.clean()},re.prototype.update=function(z){return this._inner.update(z),this},re.prototype.finish=function(z){return this._finished?(this._outer.finish(z),this):(this._inner.finish(z),this._outer.update(z.subarray(0,this.digestLength)).finish(z),this._finished=!0,this)},re.prototype.digest=function(){var z=new Uint8Array(this.digestLength);return this.finish(z),z},re.prototype.saveState=function(){if(!H.isSerializableHash(this._inner))throw new Error("hmac: can't saveState() because hash doesn't implement it");return this._inner.saveState()},re.prototype.restoreState=function(z){if(!H.isSerializableHash(this._inner)||!H.isSerializableHash(this._outer))throw new Error("hmac: can't restoreState() because hash doesn't implement it");return this._inner.restoreState(z),this._outer.restoreState(this._outerKeyedState),this._finished=!1,this},re.prototype.cleanSavedState=function(z){if(!H.isSerializableHash(this._inner))throw new Error("hmac: can't cleanSavedState() because hash doesn't implement it");this._inner.cleanSavedState(z)},re}();_.HMAC=ge;function B(re,z,N){var T=new ge(re,z);T.update(N);var j=T.digest();return T.clean(),j}_.hmac=B,_.equal=ce.equal},97117:function(Re,_){"use strict";Object.defineProperty(_,"__esModule",{value:!0});function C(re,z){var N=re>>>16&65535,T=re&65535,j=z>>>16&65535,ie=z&65535;return T*ie+(N*ie+T*j<<16>>>0)|0}_.mul=Math.imul||C;function H(re,z){return re+z|0}_.add=H;function ce(re,z){return re-z|0}_.sub=ce;function ue(re,z){return re<<z|re>>>32-z}_.rotl=ue;function ge(re,z){return re<<32-z|re>>>z}_.rotr=ge;function B(re){return typeof re=="number"&&isFinite(re)&&Math.floor(re)===re}_.isInteger=Number.isInteger||B,_.MAX_SAFE_INTEGER=9007199254740991,_.isSafeInteger=function(re){return _.isInteger(re)&&re>=-_.MAX_SAFE_INTEGER&&re<=_.MAX_SAFE_INTEGER}},63027:function(Re,_,C){"use strict";Object.defineProperty(_,"__esModule",{value:!0});var H=C(4153),ce=C(17309);_.DIGEST_LENGTH=16;var ue=function(){function re(z){this.digestLength=_.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var N=z[0]|z[1]<<8;this._r[0]=N&8191;var T=z[2]|z[3]<<8;this._r[1]=(N>>>13|T<<3)&8191;var j=z[4]|z[5]<<8;this._r[2]=(T>>>10|j<<6)&7939;var ie=z[6]|z[7]<<8;this._r[3]=(j>>>7|ie<<9)&8191;var le=z[8]|z[9]<<8;this._r[4]=(ie>>>4|le<<12)&255,this._r[5]=le>>>1&8190;var Z=z[10]|z[11]<<8;this._r[6]=(le>>>14|Z<<2)&8191;var ne=z[12]|z[13]<<8;this._r[7]=(Z>>>11|ne<<5)&8065;var fe=z[14]|z[15]<<8;this._r[8]=(ne>>>8|fe<<8)&8191,this._r[9]=fe>>>5&127,this._pad[0]=z[16]|z[17]<<8,this._pad[1]=z[18]|z[19]<<8,this._pad[2]=z[20]|z[21]<<8,this._pad[3]=z[22]|z[23]<<8,this._pad[4]=z[24]|z[25]<<8,this._pad[5]=z[26]|z[27]<<8,this._pad[6]=z[28]|z[29]<<8,this._pad[7]=z[30]|z[31]<<8}return re.prototype._blocks=function(z,N,T){for(var j=this._fin?0:2048,ie=this._h[0],le=this._h[1],Z=this._h[2],ne=this._h[3],fe=this._h[4],Pe=this._h[5],De=this._h[6],Ce=this._h[7],Ke=this._h[8],Ue=this._h[9],ye=this._r[0],we=this._r[1],x=this._r[2],h=this._r[3],P=this._r[4],W=this._r[5],f=this._r[6],E=this._r[7],g=this._r[8],v=this._r[9];T>=16;){var m=z[N+0]|z[N+1]<<8;ie+=m&8191;var y=z[N+2]|z[N+3]<<8;le+=(m>>>13|y<<3)&8191;var w=z[N+4]|z[N+5]<<8;Z+=(y>>>10|w<<6)&8191;var S=z[N+6]|z[N+7]<<8;ne+=(w>>>7|S<<9)&8191;var q=z[N+8]|z[N+9]<<8;fe+=(S>>>4|q<<12)&8191,Pe+=q>>>1&8191;var A=z[N+10]|z[N+11]<<8;De+=(q>>>14|A<<2)&8191;var V=z[N+12]|z[N+13]<<8;Ce+=(A>>>11|V<<5)&8191;var xe=z[N+14]|z[N+15]<<8;Ke+=(V>>>8|xe<<8)&8191,Ue+=xe>>>5|j;var Q=0,pe=Q;pe+=ie*ye,pe+=le*(5*v),pe+=Z*(5*g),pe+=ne*(5*E),pe+=fe*(5*f),Q=pe>>>13,pe&=8191,pe+=Pe*(5*W),pe+=De*(5*P),pe+=Ce*(5*h),pe+=Ke*(5*x),pe+=Ue*(5*we),Q+=pe>>>13,pe&=8191;var Oe=Q;Oe+=ie*we,Oe+=le*ye,Oe+=Z*(5*v),Oe+=ne*(5*g),Oe+=fe*(5*E),Q=Oe>>>13,Oe&=8191,Oe+=Pe*(5*f),Oe+=De*(5*W),Oe+=Ce*(5*P),Oe+=Ke*(5*h),Oe+=Ue*(5*x),Q+=Oe>>>13,Oe&=8191;var Ne=Q;Ne+=ie*x,Ne+=le*we,Ne+=Z*ye,Ne+=ne*(5*v),Ne+=fe*(5*g),Q=Ne>>>13,Ne&=8191,Ne+=Pe*(5*E),Ne+=De*(5*f),Ne+=Ce*(5*W),Ne+=Ke*(5*P),Ne+=Ue*(5*h),Q+=Ne>>>13,Ne&=8191;var Be=Q;Be+=ie*h,Be+=le*x,Be+=Z*we,Be+=ne*ye,Be+=fe*(5*v),Q=Be>>>13,Be&=8191,Be+=Pe*(5*g),Be+=De*(5*E),Be+=Ce*(5*f),Be+=Ke*(5*W),Be+=Ue*(5*P),Q+=Be>>>13,Be&=8191;var se=Q;se+=ie*P,se+=le*h,se+=Z*x,se+=ne*we,se+=fe*ye,Q=se>>>13,se&=8191,se+=Pe*(5*v),se+=De*(5*g),se+=Ce*(5*E),se+=Ke*(5*f),se+=Ue*(5*W),Q+=se>>>13,se&=8191;var ae=Q;ae+=ie*W,ae+=le*P,ae+=Z*h,ae+=ne*x,ae+=fe*we,Q=ae>>>13,ae&=8191,ae+=Pe*ye,ae+=De*(5*v),ae+=Ce*(5*g),ae+=Ke*(5*E),ae+=Ue*(5*f),Q+=ae>>>13,ae&=8191;var k=Q;k+=ie*f,k+=le*W,k+=Z*P,k+=ne*h,k+=fe*x,Q=k>>>13,k&=8191,k+=Pe*we,k+=De*ye,k+=Ce*(5*v),k+=Ke*(5*g),k+=Ue*(5*E),Q+=k>>>13,k&=8191;var d=Q;d+=ie*E,d+=le*f,d+=Z*W,d+=ne*P,d+=fe*h,Q=d>>>13,d&=8191,d+=Pe*x,d+=De*we,d+=Ce*ye,d+=Ke*(5*v),d+=Ue*(5*g),Q+=d>>>13,d&=8191;var $=Q;$+=ie*g,$+=le*E,$+=Z*f,$+=ne*W,$+=fe*P,Q=$>>>13,$&=8191,$+=Pe*h,$+=De*x,$+=Ce*we,$+=Ke*ye,$+=Ue*(5*v),Q+=$>>>13,$&=8191;var Ae=Q;Ae+=ie*v,Ae+=le*g,Ae+=Z*E,Ae+=ne*f,Ae+=fe*W,Q=Ae>>>13,Ae&=8191,Ae+=Pe*P,Ae+=De*h,Ae+=Ce*x,Ae+=Ke*we,Ae+=Ue*ye,Q+=Ae>>>13,Ae&=8191,Q=(Q<<2)+Q|0,Q=Q+pe|0,pe=Q&8191,Q=Q>>>13,Oe+=Q,ie=pe,le=Oe,Z=Ne,ne=Be,fe=se,Pe=ae,De=k,Ce=d,Ke=$,Ue=Ae,N+=16,T-=16}this._h[0]=ie,this._h[1]=le,this._h[2]=Z,this._h[3]=ne,this._h[4]=fe,this._h[5]=Pe,this._h[6]=De,this._h[7]=Ce,this._h[8]=Ke,this._h[9]=Ue},re.prototype.finish=function(z,N){N===void 0&&(N=0);var T=new Uint16Array(10),j,ie,le,Z;if(this._leftover){for(Z=this._leftover,this._buffer[Z++]=1;Z<16;Z++)this._buffer[Z]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(j=this._h[1]>>>13,this._h[1]&=8191,Z=2;Z<10;Z++)this._h[Z]+=j,j=this._h[Z]>>>13,this._h[Z]&=8191;for(this._h[0]+=j*5,j=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=j,j=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=j,T[0]=this._h[0]+5,j=T[0]>>>13,T[0]&=8191,Z=1;Z<10;Z++)T[Z]=this._h[Z]+j,j=T[Z]>>>13,T[Z]&=8191;for(T[9]-=8192,ie=(j^1)-1,Z=0;Z<10;Z++)T[Z]&=ie;for(ie=~ie,Z=0;Z<10;Z++)this._h[Z]=this._h[Z]&ie|T[Z];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,le=this._h[0]+this._pad[0],this._h[0]=le&65535,Z=1;Z<8;Z++)le=(this._h[Z]+this._pad[Z]|0)+(le>>>16)|0,this._h[Z]=le&65535;return z[N+0]=this._h[0]>>>0,z[N+1]=this._h[0]>>>8,z[N+2]=this._h[1]>>>0,z[N+3]=this._h[1]>>>8,z[N+4]=this._h[2]>>>0,z[N+5]=this._h[2]>>>8,z[N+6]=this._h[3]>>>0,z[N+7]=this._h[3]>>>8,z[N+8]=this._h[4]>>>0,z[N+9]=this._h[4]>>>8,z[N+10]=this._h[5]>>>0,z[N+11]=this._h[5]>>>8,z[N+12]=this._h[6]>>>0,z[N+13]=this._h[6]>>>8,z[N+14]=this._h[7]>>>0,z[N+15]=this._h[7]>>>8,this._finished=!0,this},re.prototype.update=function(z){var N=0,T=z.length,j;if(this._leftover){j=16-this._leftover,j>T&&(j=T);for(var ie=0;ie<j;ie++)this._buffer[this._leftover+ie]=z[N+ie];if(T-=j,N+=j,this._leftover+=j,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(T>=16&&(j=T-T%16,this._blocks(z,N,j),N+=j,T-=j),T){for(var ie=0;ie<T;ie++)this._buffer[this._leftover+ie]=z[N+ie];this._leftover+=T}return this},re.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var z=new Uint8Array(16);return this.finish(z),z},re.prototype.clean=function(){return ce.wipe(this._buffer),ce.wipe(this._r),ce.wipe(this._h),ce.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},re}();_.Poly1305=ue;function ge(re,z){var N=new ue(re);N.update(z);var T=N.digest();return N.clean(),T}_.oneTimeAuth=ge;function B(re,z){return re.length!==_.DIGEST_LENGTH||z.length!==_.DIGEST_LENGTH?!1:H.equal(re,z)}_.equal=B},31416:function(Re,_,C){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.randomStringForEntropy=_.randomString=_.randomUint32=_.randomBytes=_.defaultRandomSource=void 0;const H=C(46008),ce=C(98099),ue=C(17309);_.defaultRandomSource=new H.SystemRandomSource;function ge(T,j=_.defaultRandomSource){return j.randomBytes(T)}_.randomBytes=ge;function B(T=_.defaultRandomSource){const j=ge(4,T),ie=(0,ce.readUint32LE)(j);return(0,ue.wipe)(j),ie}_.randomUint32=B;const re="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function z(T,j=re,ie=_.defaultRandomSource){if(j.length<2)throw new Error("randomString charset is too short");if(j.length>256)throw new Error("randomString charset is too long");let le="";const Z=j.length,ne=256-256%Z;for(;T>0;){const fe=ge(Math.ceil(T*256/ne),ie);for(let Pe=0;Pe<fe.length&&T>0;Pe++){const De=fe[Pe];De<ne&&(le+=j.charAt(De%Z),T--)}(0,ue.wipe)(fe)}return le}_.randomString=z;function N(T,j=re,ie=_.defaultRandomSource){const le=Math.ceil(T/(Math.log(j.length)/Math.LN2));return z(le,j,ie)}_.randomStringForEntropy=N},75455:function(Re,_){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.BrowserRandomSource=void 0;const C=65536;class H{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const ue=typeof self<"u"?self.crypto||self.msCrypto:null;ue&&ue.getRandomValues!==void 0&&(this._crypto=ue,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(ue){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const ge=new Uint8Array(ue);for(let B=0;B<ge.length;B+=C)this._crypto.getRandomValues(ge.subarray(B,B+Math.min(ge.length-B,C)));return ge}}_.BrowserRandomSource=H},58871:function(Re,_,C){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.NodeRandomSource=void 0;const H=C(17309);class ce{constructor(){this.isAvailable=!1,this.isInstantiated=!1;{const ge=C(35883);ge&&ge.randomBytes&&(this._crypto=ge,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(ge){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let B=this._crypto.randomBytes(ge);if(B.length!==ge)throw new Error("NodeRandomSource: got fewer bytes than requested");const re=new Uint8Array(ge);for(let z=0;z<re.length;z++)re[z]=B[z];return(0,H.wipe)(B),re}}_.NodeRandomSource=ce},46008:function(Re,_,C){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.SystemRandomSource=void 0;const H=C(75455),ce=C(58871);class ue{constructor(){if(this.isAvailable=!1,this.name="",this._source=new H.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new ce.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(B){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(B)}}_.SystemRandomSource=ue},73294:function(Re,_,C){"use strict";var H;H={value:!0};var ce=C(98099),ue=C(17309);_.k=32,_.cn=64;var ge=function(){function N(){this.digestLength=_.k,this.blockSize=_.cn,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return N.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},N.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},N.prototype.clean=function(){ue.wipe(this._buffer),ue.wipe(this._temp),this.reset()},N.prototype.update=function(T,j){if(j===void 0&&(j=T.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var ie=0;if(this._bytesHashed+=j,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&j>0;)this._buffer[this._bufferLength++]=T[ie++],j--;this._bufferLength===this.blockSize&&(re(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(j>=this.blockSize&&(ie=re(this._temp,this._state,T,ie,j),j%=this.blockSize);j>0;)this._buffer[this._bufferLength++]=T[ie++],j--;return this},N.prototype.finish=function(T){if(!this._finished){var j=this._bytesHashed,ie=this._bufferLength,le=j/536870912|0,Z=j<<3,ne=j%64<56?64:128;this._buffer[ie]=128;for(var fe=ie+1;fe<ne-8;fe++)this._buffer[fe]=0;ce.writeUint32BE(le,this._buffer,ne-8),ce.writeUint32BE(Z,this._buffer,ne-4),re(this._temp,this._state,this._buffer,0,ne),this._finished=!0}for(var fe=0;fe<this.digestLength/4;fe++)ce.writeUint32BE(this._state[fe],T,fe*4);return this},N.prototype.digest=function(){var T=new Uint8Array(this.digestLength);return this.finish(T),T},N.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},N.prototype.restoreState=function(T){return this._state.set(T.state),this._bufferLength=T.bufferLength,T.buffer&&this._buffer.set(T.buffer),this._bytesHashed=T.bytesHashed,this._finished=!1,this},N.prototype.cleanSavedState=function(T){ue.wipe(T.state),T.buffer&&ue.wipe(T.buffer),T.bufferLength=0,T.bytesHashed=0},N}();_.mE=ge;var B=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function re(N,T,j,ie,le){for(;le>=64;){for(var Z=T[0],ne=T[1],fe=T[2],Pe=T[3],De=T[4],Ce=T[5],Ke=T[6],Ue=T[7],ye=0;ye<16;ye++){var we=ie+ye*4;N[ye]=ce.readUint32BE(j,we)}for(var ye=16;ye<64;ye++){var x=N[ye-2],h=(x>>>17|x<<32-17)^(x>>>19|x<<32-19)^x>>>10;x=N[ye-15];var P=(x>>>7|x<<32-7)^(x>>>18|x<<32-18)^x>>>3;N[ye]=(h+N[ye-7]|0)+(P+N[ye-16]|0)}for(var ye=0;ye<64;ye++){var h=(((De>>>6|De<<26)^(De>>>11|De<<21)^(De>>>25|De<<7))+(De&Ce^~De&Ke)|0)+(Ue+(B[ye]+N[ye]|0)|0)|0,P=((Z>>>2|Z<<32-2)^(Z>>>13|Z<<32-13)^(Z>>>22|Z<<32-22))+(Z&ne^Z&fe^ne&fe)|0;Ue=Ke,Ke=Ce,Ce=De,De=Pe+h|0,Pe=fe,fe=ne,ne=Z,Z=h+P|0}T[0]+=Z,T[1]+=ne,T[2]+=fe,T[3]+=Pe,T[4]+=De,T[5]+=Ce,T[6]+=Ke,T[7]+=Ue,ie+=64,le-=64}return ie}function z(N){var T=new ge;T.update(N);var j=T.digest();return T.clean(),j}_.vp=z},93350:function(Re,_,C){"use strict";Object.defineProperty(_,"__esModule",{value:!0});var H=C(98099),ce=C(17309);_.DIGEST_LENGTH=64,_.BLOCK_SIZE=128;var ue=function(){function z(){this.digestLength=_.DIGEST_LENGTH,this.blockSize=_.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return z.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},z.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},z.prototype.clean=function(){ce.wipe(this._buffer),ce.wipe(this._tempHi),ce.wipe(this._tempLo),this.reset()},z.prototype.update=function(N,T){if(T===void 0&&(T=N.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var j=0;if(this._bytesHashed+=T,this._bufferLength>0){for(;this._bufferLength<_.BLOCK_SIZE&&T>0;)this._buffer[this._bufferLength++]=N[j++],T--;this._bufferLength===this.blockSize&&(B(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(T>=this.blockSize&&(j=B(this._tempHi,this._tempLo,this._stateHi,this._stateLo,N,j,T),T%=this.blockSize);T>0;)this._buffer[this._bufferLength++]=N[j++],T--;return this},z.prototype.finish=function(N){if(!this._finished){var T=this._bytesHashed,j=this._bufferLength,ie=T/536870912|0,le=T<<3,Z=T%128<112?128:256;this._buffer[j]=128;for(var ne=j+1;ne<Z-8;ne++)this._buffer[ne]=0;H.writeUint32BE(ie,this._buffer,Z-8),H.writeUint32BE(le,this._buffer,Z-4),B(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,Z),this._finished=!0}for(var ne=0;ne<this.digestLength/8;ne++)H.writeUint32BE(this._stateHi[ne],N,ne*8),H.writeUint32BE(this._stateLo[ne],N,ne*8+4);return this},z.prototype.digest=function(){var N=new Uint8Array(this.digestLength);return this.finish(N),N},z.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},z.prototype.restoreState=function(N){return this._stateHi.set(N.stateHi),this._stateLo.set(N.stateLo),this._bufferLength=N.bufferLength,N.buffer&&this._buffer.set(N.buffer),this._bytesHashed=N.bytesHashed,this._finished=!1,this},z.prototype.cleanSavedState=function(N){ce.wipe(N.stateHi),ce.wipe(N.stateLo),N.buffer&&ce.wipe(N.buffer),N.bufferLength=0,N.bytesHashed=0},z}();_.SHA512=ue;var ge=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function B(z,N,T,j,ie,le,Z){for(var ne=T[0],fe=T[1],Pe=T[2],De=T[3],Ce=T[4],Ke=T[5],Ue=T[6],ye=T[7],we=j[0],x=j[1],h=j[2],P=j[3],W=j[4],f=j[5],E=j[6],g=j[7],v,m,y,w,S,q,A,V;Z>=128;){for(var xe=0;xe<16;xe++){var Q=8*xe+le;z[xe]=H.readUint32BE(ie,Q),N[xe]=H.readUint32BE(ie,Q+4)}for(var xe=0;xe<80;xe++){var pe=ne,Oe=fe,Ne=Pe,Be=De,se=Ce,ae=Ke,k=Ue,d=ye,$=we,Ae=x,We=h,ht=P,Ot=W,pt=f,gt=E,Vt=g;if(v=ye,m=g,S=m&65535,q=m>>>16,A=v&65535,V=v>>>16,v=(Ce>>>14|W<<32-14)^(Ce>>>18|W<<32-18)^(W>>>41-32|Ce<<32-(41-32)),m=(W>>>14|Ce<<32-14)^(W>>>18|Ce<<32-18)^(Ce>>>41-32|W<<32-(41-32)),S+=m&65535,q+=m>>>16,A+=v&65535,V+=v>>>16,v=Ce&Ke^~Ce&Ue,m=W&f^~W&E,S+=m&65535,q+=m>>>16,A+=v&65535,V+=v>>>16,v=ge[xe*2],m=ge[xe*2+1],S+=m&65535,q+=m>>>16,A+=v&65535,V+=v>>>16,v=z[xe%16],m=N[xe%16],S+=m&65535,q+=m>>>16,A+=v&65535,V+=v>>>16,q+=S>>>16,A+=q>>>16,V+=A>>>16,y=A&65535|V<<16,w=S&65535|q<<16,v=y,m=w,S=m&65535,q=m>>>16,A=v&65535,V=v>>>16,v=(ne>>>28|we<<32-28)^(we>>>34-32|ne<<32-(34-32))^(we>>>39-32|ne<<32-(39-32)),m=(we>>>28|ne<<32-28)^(ne>>>34-32|we<<32-(34-32))^(ne>>>39-32|we<<32-(39-32)),S+=m&65535,q+=m>>>16,A+=v&65535,V+=v>>>16,v=ne&fe^ne&Pe^fe&Pe,m=we&x^we&h^x&h,S+=m&65535,q+=m>>>16,A+=v&65535,V+=v>>>16,q+=S>>>16,A+=q>>>16,V+=A>>>16,d=A&65535|V<<16,Vt=S&65535|q<<16,v=Be,m=ht,S=m&65535,q=m>>>16,A=v&65535,V=v>>>16,v=y,m=w,S+=m&65535,q+=m>>>16,A+=v&65535,V+=v>>>16,q+=S>>>16,A+=q>>>16,V+=A>>>16,Be=A&65535|V<<16,ht=S&65535|q<<16,fe=pe,Pe=Oe,De=Ne,Ce=Be,Ke=se,Ue=ae,ye=k,ne=d,x=$,h=Ae,P=We,W=ht,f=Ot,E=pt,g=gt,we=Vt,xe%16===15)for(var Q=0;Q<16;Q++)v=z[Q],m=N[Q],S=m&65535,q=m>>>16,A=v&65535,V=v>>>16,v=z[(Q+9)%16],m=N[(Q+9)%16],S+=m&65535,q+=m>>>16,A+=v&65535,V+=v>>>16,y=z[(Q+1)%16],w=N[(Q+1)%16],v=(y>>>1|w<<32-1)^(y>>>8|w<<32-8)^y>>>7,m=(w>>>1|y<<32-1)^(w>>>8|y<<32-8)^(w>>>7|y<<32-7),S+=m&65535,q+=m>>>16,A+=v&65535,V+=v>>>16,y=z[(Q+14)%16],w=N[(Q+14)%16],v=(y>>>19|w<<32-19)^(w>>>61-32|y<<32-(61-32))^y>>>6,m=(w>>>19|y<<32-19)^(y>>>61-32|w<<32-(61-32))^(w>>>6|y<<32-6),S+=m&65535,q+=m>>>16,A+=v&65535,V+=v>>>16,q+=S>>>16,A+=q>>>16,V+=A>>>16,z[Q]=A&65535|V<<16,N[Q]=S&65535|q<<16}v=ne,m=we,S=m&65535,q=m>>>16,A=v&65535,V=v>>>16,v=T[0],m=j[0],S+=m&65535,q+=m>>>16,A+=v&65535,V+=v>>>16,q+=S>>>16,A+=q>>>16,V+=A>>>16,T[0]=ne=A&65535|V<<16,j[0]=we=S&65535|q<<16,v=fe,m=x,S=m&65535,q=m>>>16,A=v&65535,V=v>>>16,v=T[1],m=j[1],S+=m&65535,q+=m>>>16,A+=v&65535,V+=v>>>16,q+=S>>>16,A+=q>>>16,V+=A>>>16,T[1]=fe=A&65535|V<<16,j[1]=x=S&65535|q<<16,v=Pe,m=h,S=m&65535,q=m>>>16,A=v&65535,V=v>>>16,v=T[2],m=j[2],S+=m&65535,q+=m>>>16,A+=v&65535,V+=v>>>16,q+=S>>>16,A+=q>>>16,V+=A>>>16,T[2]=Pe=A&65535|V<<16,j[2]=h=S&65535|q<<16,v=De,m=P,S=m&65535,q=m>>>16,A=v&65535,V=v>>>16,v=T[3],m=j[3],S+=m&65535,q+=m>>>16,A+=v&65535,V+=v>>>16,q+=S>>>16,A+=q>>>16,V+=A>>>16,T[3]=De=A&65535|V<<16,j[3]=P=S&65535|q<<16,v=Ce,m=W,S=m&65535,q=m>>>16,A=v&65535,V=v>>>16,v=T[4],m=j[4],S+=m&65535,q+=m>>>16,A+=v&65535,V+=v>>>16,q+=S>>>16,A+=q>>>16,V+=A>>>16,T[4]=Ce=A&65535|V<<16,j[4]=W=S&65535|q<<16,v=Ke,m=f,S=m&65535,q=m>>>16,A=v&65535,V=v>>>16,v=T[5],m=j[5],S+=m&65535,q+=m>>>16,A+=v&65535,V+=v>>>16,q+=S>>>16,A+=q>>>16,V+=A>>>16,T[5]=Ke=A&65535|V<<16,j[5]=f=S&65535|q<<16,v=Ue,m=E,S=m&65535,q=m>>>16,A=v&65535,V=v>>>16,v=T[6],m=j[6],S+=m&65535,q+=m>>>16,A+=v&65535,V+=v>>>16,q+=S>>>16,A+=q>>>16,V+=A>>>16,T[6]=Ue=A&65535|V<<16,j[6]=E=S&65535|q<<16,v=ye,m=g,S=m&65535,q=m>>>16,A=v&65535,V=v>>>16,v=T[7],m=j[7],S+=m&65535,q+=m>>>16,A+=v&65535,V+=v>>>16,q+=S>>>16,A+=q>>>16,V+=A>>>16,T[7]=ye=A&65535|V<<16,j[7]=g=S&65535|q<<16,le+=128,Z-=128}return le}function re(z){var N=new ue;N.update(z);var T=N.digest();return N.clean(),T}_.hash=re},17309:function(Re,_){"use strict";Object.defineProperty(_,"__esModule",{value:!0});function C(H){for(var ce=0;ce<H.length;ce++)H[ce]=0;return H}_.wipe=C},57664:function(Re,_,C){"use strict";var H;H={value:!0},_.gi=_.Au=H=H=H=H=_.KS=_.kz=void 0;const ce=C(31416),ue=C(17309);_.kz=32,_.KS=32,H=32;function ge(ye){const we=new Float64Array(16);if(ye)for(let x=0;x<ye.length;x++)we[x]=ye[x];return we}const B=new Uint8Array(32);B[0]=9;const re=ge([56129,1]);function z(ye){let we=1;for(let x=0;x<16;x++){let h=ye[x]+we+65535;we=Math.floor(h/65536),ye[x]=h-we*65536}ye[0]+=we-1+37*(we-1)}function N(ye,we,x){const h=~(x-1);for(let P=0;P<16;P++){const W=h&(ye[P]^we[P]);ye[P]^=W,we[P]^=W}}function T(ye,we){const x=ge(),h=ge();for(let P=0;P<16;P++)h[P]=we[P];z(h),z(h),z(h);for(let P=0;P<2;P++){x[0]=h[0]-65517;for(let f=1;f<15;f++)x[f]=h[f]-65535-(x[f-1]>>16&1),x[f-1]&=65535;x[15]=h[15]-32767-(x[14]>>16&1);const W=x[15]>>16&1;x[14]&=65535,N(h,x,1-W)}for(let P=0;P<16;P++)ye[2*P]=h[P]&255,ye[2*P+1]=h[P]>>8}function j(ye,we){for(let x=0;x<16;x++)ye[x]=we[2*x]+(we[2*x+1]<<8);ye[15]&=32767}function ie(ye,we,x){for(let h=0;h<16;h++)ye[h]=we[h]+x[h]}function le(ye,we,x){for(let h=0;h<16;h++)ye[h]=we[h]-x[h]}function Z(ye,we,x){let h,P,W=0,f=0,E=0,g=0,v=0,m=0,y=0,w=0,S=0,q=0,A=0,V=0,xe=0,Q=0,pe=0,Oe=0,Ne=0,Be=0,se=0,ae=0,k=0,d=0,$=0,Ae=0,We=0,ht=0,Ot=0,pt=0,gt=0,Vt=0,rr=0,_t=x[0],yt=x[1],dt=x[2],lt=x[3],at=x[4],et=x[5],tt=x[6],nt=x[7],qe=x[8],vt=x[9],wt=x[10],It=x[11],xt=x[12],Et=x[13],Pt=x[14],Tt=x[15];h=we[0],W+=h*_t,f+=h*yt,E+=h*dt,g+=h*lt,v+=h*at,m+=h*et,y+=h*tt,w+=h*nt,S+=h*qe,q+=h*vt,A+=h*wt,V+=h*It,xe+=h*xt,Q+=h*Et,pe+=h*Pt,Oe+=h*Tt,h=we[1],f+=h*_t,E+=h*yt,g+=h*dt,v+=h*lt,m+=h*at,y+=h*et,w+=h*tt,S+=h*nt,q+=h*qe,A+=h*vt,V+=h*wt,xe+=h*It,Q+=h*xt,pe+=h*Et,Oe+=h*Pt,Ne+=h*Tt,h=we[2],E+=h*_t,g+=h*yt,v+=h*dt,m+=h*lt,y+=h*at,w+=h*et,S+=h*tt,q+=h*nt,A+=h*qe,V+=h*vt,xe+=h*wt,Q+=h*It,pe+=h*xt,Oe+=h*Et,Ne+=h*Pt,Be+=h*Tt,h=we[3],g+=h*_t,v+=h*yt,m+=h*dt,y+=h*lt,w+=h*at,S+=h*et,q+=h*tt,A+=h*nt,V+=h*qe,xe+=h*vt,Q+=h*wt,pe+=h*It,Oe+=h*xt,Ne+=h*Et,Be+=h*Pt,se+=h*Tt,h=we[4],v+=h*_t,m+=h*yt,y+=h*dt,w+=h*lt,S+=h*at,q+=h*et,A+=h*tt,V+=h*nt,xe+=h*qe,Q+=h*vt,pe+=h*wt,Oe+=h*It,Ne+=h*xt,Be+=h*Et,se+=h*Pt,ae+=h*Tt,h=we[5],m+=h*_t,y+=h*yt,w+=h*dt,S+=h*lt,q+=h*at,A+=h*et,V+=h*tt,xe+=h*nt,Q+=h*qe,pe+=h*vt,Oe+=h*wt,Ne+=h*It,Be+=h*xt,se+=h*Et,ae+=h*Pt,k+=h*Tt,h=we[6],y+=h*_t,w+=h*yt,S+=h*dt,q+=h*lt,A+=h*at,V+=h*et,xe+=h*tt,Q+=h*nt,pe+=h*qe,Oe+=h*vt,Ne+=h*wt,Be+=h*It,se+=h*xt,ae+=h*Et,k+=h*Pt,d+=h*Tt,h=we[7],w+=h*_t,S+=h*yt,q+=h*dt,A+=h*lt,V+=h*at,xe+=h*et,Q+=h*tt,pe+=h*nt,Oe+=h*qe,Ne+=h*vt,Be+=h*wt,se+=h*It,ae+=h*xt,k+=h*Et,d+=h*Pt,$+=h*Tt,h=we[8],S+=h*_t,q+=h*yt,A+=h*dt,V+=h*lt,xe+=h*at,Q+=h*et,pe+=h*tt,Oe+=h*nt,Ne+=h*qe,Be+=h*vt,se+=h*wt,ae+=h*It,k+=h*xt,d+=h*Et,$+=h*Pt,Ae+=h*Tt,h=we[9],q+=h*_t,A+=h*yt,V+=h*dt,xe+=h*lt,Q+=h*at,pe+=h*et,Oe+=h*tt,Ne+=h*nt,Be+=h*qe,se+=h*vt,ae+=h*wt,k+=h*It,d+=h*xt,$+=h*Et,Ae+=h*Pt,We+=h*Tt,h=we[10],A+=h*_t,V+=h*yt,xe+=h*dt,Q+=h*lt,pe+=h*at,Oe+=h*et,Ne+=h*tt,Be+=h*nt,se+=h*qe,ae+=h*vt,k+=h*wt,d+=h*It,$+=h*xt,Ae+=h*Et,We+=h*Pt,ht+=h*Tt,h=we[11],V+=h*_t,xe+=h*yt,Q+=h*dt,pe+=h*lt,Oe+=h*at,Ne+=h*et,Be+=h*tt,se+=h*nt,ae+=h*qe,k+=h*vt,d+=h*wt,$+=h*It,Ae+=h*xt,We+=h*Et,ht+=h*Pt,Ot+=h*Tt,h=we[12],xe+=h*_t,Q+=h*yt,pe+=h*dt,Oe+=h*lt,Ne+=h*at,Be+=h*et,se+=h*tt,ae+=h*nt,k+=h*qe,d+=h*vt,$+=h*wt,Ae+=h*It,We+=h*xt,ht+=h*Et,Ot+=h*Pt,pt+=h*Tt,h=we[13],Q+=h*_t,pe+=h*yt,Oe+=h*dt,Ne+=h*lt,Be+=h*at,se+=h*et,ae+=h*tt,k+=h*nt,d+=h*qe,$+=h*vt,Ae+=h*wt,We+=h*It,ht+=h*xt,Ot+=h*Et,pt+=h*Pt,gt+=h*Tt,h=we[14],pe+=h*_t,Oe+=h*yt,Ne+=h*dt,Be+=h*lt,se+=h*at,ae+=h*et,k+=h*tt,d+=h*nt,$+=h*qe,Ae+=h*vt,We+=h*wt,ht+=h*It,Ot+=h*xt,pt+=h*Et,gt+=h*Pt,Vt+=h*Tt,h=we[15],Oe+=h*_t,Ne+=h*yt,Be+=h*dt,se+=h*lt,ae+=h*at,k+=h*et,d+=h*tt,$+=h*nt,Ae+=h*qe,We+=h*vt,ht+=h*wt,Ot+=h*It,pt+=h*xt,gt+=h*Et,Vt+=h*Pt,rr+=h*Tt,W+=38*Ne,f+=38*Be,E+=38*se,g+=38*ae,v+=38*k,m+=38*d,y+=38*$,w+=38*Ae,S+=38*We,q+=38*ht,A+=38*Ot,V+=38*pt,xe+=38*gt,Q+=38*Vt,pe+=38*rr,P=1,h=W+P+65535,P=Math.floor(h/65536),W=h-P*65536,h=f+P+65535,P=Math.floor(h/65536),f=h-P*65536,h=E+P+65535,P=Math.floor(h/65536),E=h-P*65536,h=g+P+65535,P=Math.floor(h/65536),g=h-P*65536,h=v+P+65535,P=Math.floor(h/65536),v=h-P*65536,h=m+P+65535,P=Math.floor(h/65536),m=h-P*65536,h=y+P+65535,P=Math.floor(h/65536),y=h-P*65536,h=w+P+65535,P=Math.floor(h/65536),w=h-P*65536,h=S+P+65535,P=Math.floor(h/65536),S=h-P*65536,h=q+P+65535,P=Math.floor(h/65536),q=h-P*65536,h=A+P+65535,P=Math.floor(h/65536),A=h-P*65536,h=V+P+65535,P=Math.floor(h/65536),V=h-P*65536,h=xe+P+65535,P=Math.floor(h/65536),xe=h-P*65536,h=Q+P+65535,P=Math.floor(h/65536),Q=h-P*65536,h=pe+P+65535,P=Math.floor(h/65536),pe=h-P*65536,h=Oe+P+65535,P=Math.floor(h/65536),Oe=h-P*65536,W+=P-1+37*(P-1),P=1,h=W+P+65535,P=Math.floor(h/65536),W=h-P*65536,h=f+P+65535,P=Math.floor(h/65536),f=h-P*65536,h=E+P+65535,P=Math.floor(h/65536),E=h-P*65536,h=g+P+65535,P=Math.floor(h/65536),g=h-P*65536,h=v+P+65535,P=Math.floor(h/65536),v=h-P*65536,h=m+P+65535,P=Math.floor(h/65536),m=h-P*65536,h=y+P+65535,P=Math.floor(h/65536),y=h-P*65536,h=w+P+65535,P=Math.floor(h/65536),w=h-P*65536,h=S+P+65535,P=Math.floor(h/65536),S=h-P*65536,h=q+P+65535,P=Math.floor(h/65536),q=h-P*65536,h=A+P+65535,P=Math.floor(h/65536),A=h-P*65536,h=V+P+65535,P=Math.floor(h/65536),V=h-P*65536,h=xe+P+65535,P=Math.floor(h/65536),xe=h-P*65536,h=Q+P+65535,P=Math.floor(h/65536),Q=h-P*65536,h=pe+P+65535,P=Math.floor(h/65536),pe=h-P*65536,h=Oe+P+65535,P=Math.floor(h/65536),Oe=h-P*65536,W+=P-1+37*(P-1),ye[0]=W,ye[1]=f,ye[2]=E,ye[3]=g,ye[4]=v,ye[5]=m,ye[6]=y,ye[7]=w,ye[8]=S,ye[9]=q,ye[10]=A,ye[11]=V,ye[12]=xe,ye[13]=Q,ye[14]=pe,ye[15]=Oe}function ne(ye,we){Z(ye,we,we)}function fe(ye,we){const x=ge();for(let h=0;h<16;h++)x[h]=we[h];for(let h=253;h>=0;h--)ne(x,x),h!==2&&h!==4&&Z(x,x,we);for(let h=0;h<16;h++)ye[h]=x[h]}function Pe(ye,we){const x=new Uint8Array(32),h=new Float64Array(80),P=ge(),W=ge(),f=ge(),E=ge(),g=ge(),v=ge();for(let S=0;S<31;S++)x[S]=ye[S];x[31]=ye[31]&127|64,x[0]&=248,j(h,we);for(let S=0;S<16;S++)W[S]=h[S];P[0]=E[0]=1;for(let S=254;S>=0;--S){const q=x[S>>>3]>>>(S&7)&1;N(P,W,q),N(f,E,q),ie(g,P,f),le(P,P,f),ie(f,W,E),le(W,W,E),ne(E,g),ne(v,P),Z(P,f,P),Z(f,W,g),ie(g,P,f),le(P,P,f),ne(W,P),le(f,E,v),Z(P,f,re),ie(P,P,E),Z(f,f,P),Z(P,E,v),Z(E,W,h),ne(W,g),N(P,W,q),N(f,E,q)}for(let S=0;S<16;S++)h[S+16]=P[S],h[S+32]=f[S],h[S+48]=W[S],h[S+64]=E[S];const m=h.subarray(32),y=h.subarray(16);fe(m,m),Z(y,y,m);const w=new Uint8Array(32);return T(w,y),w}H=Pe;function De(ye){return Pe(ye,B)}H=De;function Ce(ye){if(ye.length!==_.KS)throw new Error(`x25519: seed must be ${_.KS} bytes`);const we=new Uint8Array(ye);return{publicKey:De(we),secretKey:we}}H=Ce;function Ke(ye){const we=(0,ce.randomBytes)(32,ye),x=Ce(we);return(0,ue.wipe)(we),x}_.Au=Ke;function Ue(ye,we,x=!1){if(ye.length!==_.kz)throw new Error("X25519: incorrect secret key length");if(we.length!==_.kz)throw new Error("X25519: incorrect public key length");const h=Pe(ye,we);if(x){let P=0;for(let W=0;W<h.length;W++)P|=h[W];if(P===0)throw new Error("X25519: invalid shared key")}return h}_.gi=Ue},20933:function(Re,_,C){"use strict";C.r(_),C.d(_,{__assign:function(){return B},__asyncDelegator:function(){return Ue},__asyncGenerator:function(){return Ke},__asyncValues:function(){return ye},__await:function(){return Ce},__awaiter:function(){return j},__classPrivateFieldGet:function(){return P},__classPrivateFieldSet:function(){return W},__createBinding:function(){return le},__decorate:function(){return z},__exportStar:function(){return Z},__extends:function(){return ge},__generator:function(){return ie},__importDefault:function(){return h},__importStar:function(){return x},__makeTemplateObject:function(){return we},__metadata:function(){return T},__param:function(){return N},__read:function(){return fe},__rest:function(){return re},__spread:function(){return Pe},__spreadArrays:function(){return De},__values:function(){return ne}});var H=C(52677),ce=C.n(H);var ue=function(E,g){return ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,m){v.__proto__=m}||function(v,m){for(var y in m)m.hasOwnProperty(y)&&(v[y]=m[y])},ue(E,g)};function ge(f,E){ue(f,E);function g(){this.constructor=f}f.prototype=E===null?Object.create(E):(g.prototype=E.prototype,new g)}var B=function(){return B=Object.assign||function(g){for(var v,m=1,y=arguments.length;m<y;m++){v=arguments[m];for(var w in v)Object.prototype.hasOwnProperty.call(v,w)&&(g[w]=v[w])}return g},B.apply(this,arguments)};function re(f,E){var g={};for(var v in f)Object.prototype.hasOwnProperty.call(f,v)&&E.indexOf(v)<0&&(g[v]=f[v]);if(f!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,v=Object.getOwnPropertySymbols(f);m<v.length;m++)E.indexOf(v[m])<0&&Object.prototype.propertyIsEnumerable.call(f,v[m])&&(g[v[m]]=f[v[m]]);return g}function z(f,E,g,v){var m=arguments.length,y=m<3?E:v===null?v=Object.getOwnPropertyDescriptor(E,g):v,w;if((typeof Reflect>"u"?"undefined":ce()(Reflect))==="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(f,E,g,v);else for(var S=f.length-1;S>=0;S--)(w=f[S])&&(y=(m<3?w(y):m>3?w(E,g,y):w(E,g))||y);return m>3&&y&&Object.defineProperty(E,g,y),y}function N(f,E){return function(g,v){E(g,v,f)}}function T(f,E){if((typeof Reflect>"u"?"undefined":ce()(Reflect))==="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(f,E)}function j(f,E,g,v){function m(y){return y instanceof g?y:new g(function(w){w(y)})}return new(g||(g=Promise))(function(y,w){function S(V){try{A(v.next(V))}catch(xe){w(xe)}}function q(V){try{A(v.throw(V))}catch(xe){w(xe)}}function A(V){V.done?y(V.value):m(V.value).then(S,q)}A((v=v.apply(f,E||[])).next())})}function ie(f,E){var g={label:0,sent:function(){if(y[0]&1)throw y[1];return y[1]},trys:[],ops:[]},v,m,y,w;return w={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function S(A){return function(V){return q([A,V])}}function q(A){if(v)throw new TypeError("Generator is already executing.");for(;g;)try{if(v=1,m&&(y=A[0]&2?m.return:A[0]?m.throw||((y=m.return)&&y.call(m),0):m.next)&&!(y=y.call(m,A[1])).done)return y;switch(m=0,y&&(A=[A[0]&2,y.value]),A[0]){case 0:case 1:y=A;break;case 4:return g.label++,{value:A[1],done:!1};case 5:g.label++,m=A[1],A=[0];continue;case 7:A=g.ops.pop(),g.trys.pop();continue;default:if(y=g.trys,!(y=y.length>0&&y[y.length-1])&&(A[0]===6||A[0]===2)){g=0;continue}if(A[0]===3&&(!y||A[1]>y[0]&&A[1]<y[3])){g.label=A[1];break}if(A[0]===6&&g.label<y[1]){g.label=y[1],y=A;break}if(y&&g.label<y[2]){g.label=y[2],g.ops.push(A);break}y[2]&&g.ops.pop(),g.trys.pop();continue}A=E.call(f,g)}catch(V){A=[6,V],m=0}finally{v=y=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}}function le(f,E,g,v){v===void 0&&(v=g),f[v]=E[g]}function Z(f,E){for(var g in f)g!=="default"&&!E.hasOwnProperty(g)&&(E[g]=f[g])}function ne(f){var E=typeof Symbol=="function"&&Symbol.iterator,g=E&&f[E],v=0;if(g)return g.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&v>=f.length&&(f=void 0),{value:f&&f[v++],done:!f}}};throw new TypeError(E?"Object is not iterable.":"Symbol.iterator is not defined.")}function fe(f,E){var g=typeof Symbol=="function"&&f[Symbol.iterator];if(!g)return f;var v=g.call(f),m,y=[],w;try{for(;(E===void 0||E-- >0)&&!(m=v.next()).done;)y.push(m.value)}catch(S){w={error:S}}finally{try{m&&!m.done&&(g=v.return)&&g.call(v)}finally{if(w)throw w.error}}return y}function Pe(){for(var f=[],E=0;E<arguments.length;E++)f=f.concat(fe(arguments[E]));return f}function De(){for(var f=0,E=0,g=arguments.length;E<g;E++)f+=arguments[E].length;for(var v=Array(f),m=0,E=0;E<g;E++)for(var y=arguments[E],w=0,S=y.length;w<S;w++,m++)v[m]=y[w];return v}function Ce(f){return this instanceof Ce?(this.v=f,this):new Ce(f)}function Ke(f,E,g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var v=g.apply(f,E||[]),m,y=[];return m={},w("next"),w("throw"),w("return"),m[Symbol.asyncIterator]=function(){return this},m;function w(Q){v[Q]&&(m[Q]=function(pe){return new Promise(function(Oe,Ne){y.push([Q,pe,Oe,Ne])>1||S(Q,pe)})})}function S(Q,pe){try{q(v[Q](pe))}catch(Oe){xe(y[0][3],Oe)}}function q(Q){Q.value instanceof Ce?Promise.resolve(Q.value.v).then(A,V):xe(y[0][2],Q)}function A(Q){S("next",Q)}function V(Q){S("throw",Q)}function xe(Q,pe){Q(pe),y.shift(),y.length&&S(y[0][0],y[0][1])}}function Ue(f){var E,g;return E={},v("next"),v("throw",function(m){throw m}),v("return"),E[Symbol.iterator]=function(){return this},E;function v(m,y){E[m]=f[m]?function(w){return(g=!g)?{value:Ce(f[m](w)),done:m==="return"}:y?y(w):w}:y}}function ye(f){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var E=f[Symbol.asyncIterator],g;return E?E.call(f):(f=typeof ne=="function"?ne(f):f[Symbol.iterator](),g={},v("next"),v("throw"),v("return"),g[Symbol.asyncIterator]=function(){return this},g);function v(y){g[y]=f[y]&&function(w){return new Promise(function(S,q){w=f[y](w),m(S,q,w.done,w.value)})}}function m(y,w,S,q){Promise.resolve(q).then(function(A){y({value:A,done:S})},w)}}function we(f,E){return Object.defineProperty?Object.defineProperty(f,"raw",{value:E}):f.raw=E,f}function x(f){if(f&&f.__esModule)return f;var E={};if(f!=null)for(var g in f)Object.hasOwnProperty.call(f,g)&&(E[g]=f[g]);return E.default=f,E}function h(f){return f&&f.__esModule?f:{default:f}}function P(f,E){if(!E.has(f))throw new TypeError("attempted to get private field on non-instance");return E.get(f)}function W(f,E,g){if(!E.has(f))throw new TypeError("attempted to set private field on non-instance");return E.set(f,g),g}},57875:function(Re,_,C){"use strict";C.r(_),C.d(_,{__assign:function(){return B},__asyncDelegator:function(){return Ue},__asyncGenerator:function(){return Ke},__asyncValues:function(){return ye},__await:function(){return Ce},__awaiter:function(){return j},__classPrivateFieldGet:function(){return P},__classPrivateFieldSet:function(){return W},__createBinding:function(){return le},__decorate:function(){return z},__exportStar:function(){return Z},__extends:function(){return ge},__generator:function(){return ie},__importDefault:function(){return h},__importStar:function(){return x},__makeTemplateObject:function(){return we},__metadata:function(){return T},__param:function(){return N},__read:function(){return fe},__rest:function(){return re},__spread:function(){return Pe},__spreadArrays:function(){return De},__values:function(){return ne}});var H=C(52677),ce=C.n(H);var ue=function(E,g){return ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,m){v.__proto__=m}||function(v,m){for(var y in m)m.hasOwnProperty(y)&&(v[y]=m[y])},ue(E,g)};function ge(f,E){ue(f,E);function g(){this.constructor=f}f.prototype=E===null?Object.create(E):(g.prototype=E.prototype,new g)}var B=function(){return B=Object.assign||function(g){for(var v,m=1,y=arguments.length;m<y;m++){v=arguments[m];for(var w in v)Object.prototype.hasOwnProperty.call(v,w)&&(g[w]=v[w])}return g},B.apply(this,arguments)};function re(f,E){var g={};for(var v in f)Object.prototype.hasOwnProperty.call(f,v)&&E.indexOf(v)<0&&(g[v]=f[v]);if(f!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,v=Object.getOwnPropertySymbols(f);m<v.length;m++)E.indexOf(v[m])<0&&Object.prototype.propertyIsEnumerable.call(f,v[m])&&(g[v[m]]=f[v[m]]);return g}function z(f,E,g,v){var m=arguments.length,y=m<3?E:v===null?v=Object.getOwnPropertyDescriptor(E,g):v,w;if((typeof Reflect>"u"?"undefined":ce()(Reflect))==="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(f,E,g,v);else for(var S=f.length-1;S>=0;S--)(w=f[S])&&(y=(m<3?w(y):m>3?w(E,g,y):w(E,g))||y);return m>3&&y&&Object.defineProperty(E,g,y),y}function N(f,E){return function(g,v){E(g,v,f)}}function T(f,E){if((typeof Reflect>"u"?"undefined":ce()(Reflect))==="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(f,E)}function j(f,E,g,v){function m(y){return y instanceof g?y:new g(function(w){w(y)})}return new(g||(g=Promise))(function(y,w){function S(V){try{A(v.next(V))}catch(xe){w(xe)}}function q(V){try{A(v.throw(V))}catch(xe){w(xe)}}function A(V){V.done?y(V.value):m(V.value).then(S,q)}A((v=v.apply(f,E||[])).next())})}function ie(f,E){var g={label:0,sent:function(){if(y[0]&1)throw y[1];return y[1]},trys:[],ops:[]},v,m,y,w;return w={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function S(A){return function(V){return q([A,V])}}function q(A){if(v)throw new TypeError("Generator is already executing.");for(;g;)try{if(v=1,m&&(y=A[0]&2?m.return:A[0]?m.throw||((y=m.return)&&y.call(m),0):m.next)&&!(y=y.call(m,A[1])).done)return y;switch(m=0,y&&(A=[A[0]&2,y.value]),A[0]){case 0:case 1:y=A;break;case 4:return g.label++,{value:A[1],done:!1};case 5:g.label++,m=A[1],A=[0];continue;case 7:A=g.ops.pop(),g.trys.pop();continue;default:if(y=g.trys,!(y=y.length>0&&y[y.length-1])&&(A[0]===6||A[0]===2)){g=0;continue}if(A[0]===3&&(!y||A[1]>y[0]&&A[1]<y[3])){g.label=A[1];break}if(A[0]===6&&g.label<y[1]){g.label=y[1],y=A;break}if(y&&g.label<y[2]){g.label=y[2],g.ops.push(A);break}y[2]&&g.ops.pop(),g.trys.pop();continue}A=E.call(f,g)}catch(V){A=[6,V],m=0}finally{v=y=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}}function le(f,E,g,v){v===void 0&&(v=g),f[v]=E[g]}function Z(f,E){for(var g in f)g!=="default"&&!E.hasOwnProperty(g)&&(E[g]=f[g])}function ne(f){var E=typeof Symbol=="function"&&Symbol.iterator,g=E&&f[E],v=0;if(g)return g.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&v>=f.length&&(f=void 0),{value:f&&f[v++],done:!f}}};throw new TypeError(E?"Object is not iterable.":"Symbol.iterator is not defined.")}function fe(f,E){var g=typeof Symbol=="function"&&f[Symbol.iterator];if(!g)return f;var v=g.call(f),m,y=[],w;try{for(;(E===void 0||E-- >0)&&!(m=v.next()).done;)y.push(m.value)}catch(S){w={error:S}}finally{try{m&&!m.done&&(g=v.return)&&g.call(v)}finally{if(w)throw w.error}}return y}function Pe(){for(var f=[],E=0;E<arguments.length;E++)f=f.concat(fe(arguments[E]));return f}function De(){for(var f=0,E=0,g=arguments.length;E<g;E++)f+=arguments[E].length;for(var v=Array(f),m=0,E=0;E<g;E++)for(var y=arguments[E],w=0,S=y.length;w<S;w++,m++)v[m]=y[w];return v}function Ce(f){return this instanceof Ce?(this.v=f,this):new Ce(f)}function Ke(f,E,g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var v=g.apply(f,E||[]),m,y=[];return m={},w("next"),w("throw"),w("return"),m[Symbol.asyncIterator]=function(){return this},m;function w(Q){v[Q]&&(m[Q]=function(pe){return new Promise(function(Oe,Ne){y.push([Q,pe,Oe,Ne])>1||S(Q,pe)})})}function S(Q,pe){try{q(v[Q](pe))}catch(Oe){xe(y[0][3],Oe)}}function q(Q){Q.value instanceof Ce?Promise.resolve(Q.value.v).then(A,V):xe(y[0][2],Q)}function A(Q){S("next",Q)}function V(Q){S("throw",Q)}function xe(Q,pe){Q(pe),y.shift(),y.length&&S(y[0][0],y[0][1])}}function Ue(f){var E,g;return E={},v("next"),v("throw",function(m){throw m}),v("return"),E[Symbol.iterator]=function(){return this},E;function v(m,y){E[m]=f[m]?function(w){return(g=!g)?{value:Ce(f[m](w)),done:m==="return"}:y?y(w):w}:y}}function ye(f){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var E=f[Symbol.asyncIterator],g;return E?E.call(f):(f=typeof ne=="function"?ne(f):f[Symbol.iterator](),g={},v("next"),v("throw"),v("return"),g[Symbol.asyncIterator]=function(){return this},g);function v(y){g[y]=f[y]&&function(w){return new Promise(function(S,q){w=f[y](w),m(S,q,w.done,w.value)})}}function m(y,w,S,q){Promise.resolve(q).then(function(A){y({value:A,done:S})},w)}}function we(f,E){return Object.defineProperty?Object.defineProperty(f,"raw",{value:E}):f.raw=E,f}function x(f){if(f&&f.__esModule)return f;var E={};if(f!=null)for(var g in f)Object.hasOwnProperty.call(f,g)&&(E[g]=f[g]);return E.default=f,E}function h(f){return f&&f.__esModule?f:{default:f}}function P(f,E){if(!E.has(f))throw new TypeError("attempted to get private field on non-instance");return E.get(f)}function W(f,E,g){if(!E.has(f))throw new TypeError("attempted to set private field on non-instance");return E.set(f,g),g}},85906:function(Re,_,C){"use strict";C.r(_),C.d(_,{__assign:function(){return B},__asyncDelegator:function(){return Ue},__asyncGenerator:function(){return Ke},__asyncValues:function(){return ye},__await:function(){return Ce},__awaiter:function(){return j},__classPrivateFieldGet:function(){return P},__classPrivateFieldSet:function(){return W},__createBinding:function(){return le},__decorate:function(){return z},__exportStar:function(){return Z},__extends:function(){return ge},__generator:function(){return ie},__importDefault:function(){return h},__importStar:function(){return x},__makeTemplateObject:function(){return we},__metadata:function(){return T},__param:function(){return N},__read:function(){return fe},__rest:function(){return re},__spread:function(){return Pe},__spreadArrays:function(){return De},__values:function(){return ne}});var H=C(52677),ce=C.n(H);var ue=function(E,g){return ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,m){v.__proto__=m}||function(v,m){for(var y in m)m.hasOwnProperty(y)&&(v[y]=m[y])},ue(E,g)};function ge(f,E){ue(f,E);function g(){this.constructor=f}f.prototype=E===null?Object.create(E):(g.prototype=E.prototype,new g)}var B=function(){return B=Object.assign||function(g){for(var v,m=1,y=arguments.length;m<y;m++){v=arguments[m];for(var w in v)Object.prototype.hasOwnProperty.call(v,w)&&(g[w]=v[w])}return g},B.apply(this,arguments)};function re(f,E){var g={};for(var v in f)Object.prototype.hasOwnProperty.call(f,v)&&E.indexOf(v)<0&&(g[v]=f[v]);if(f!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,v=Object.getOwnPropertySymbols(f);m<v.length;m++)E.indexOf(v[m])<0&&Object.prototype.propertyIsEnumerable.call(f,v[m])&&(g[v[m]]=f[v[m]]);return g}function z(f,E,g,v){var m=arguments.length,y=m<3?E:v===null?v=Object.getOwnPropertyDescriptor(E,g):v,w;if((typeof Reflect>"u"?"undefined":ce()(Reflect))==="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(f,E,g,v);else for(var S=f.length-1;S>=0;S--)(w=f[S])&&(y=(m<3?w(y):m>3?w(E,g,y):w(E,g))||y);return m>3&&y&&Object.defineProperty(E,g,y),y}function N(f,E){return function(g,v){E(g,v,f)}}function T(f,E){if((typeof Reflect>"u"?"undefined":ce()(Reflect))==="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(f,E)}function j(f,E,g,v){function m(y){return y instanceof g?y:new g(function(w){w(y)})}return new(g||(g=Promise))(function(y,w){function S(V){try{A(v.next(V))}catch(xe){w(xe)}}function q(V){try{A(v.throw(V))}catch(xe){w(xe)}}function A(V){V.done?y(V.value):m(V.value).then(S,q)}A((v=v.apply(f,E||[])).next())})}function ie(f,E){var g={label:0,sent:function(){if(y[0]&1)throw y[1];return y[1]},trys:[],ops:[]},v,m,y,w;return w={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function S(A){return function(V){return q([A,V])}}function q(A){if(v)throw new TypeError("Generator is already executing.");for(;g;)try{if(v=1,m&&(y=A[0]&2?m.return:A[0]?m.throw||((y=m.return)&&y.call(m),0):m.next)&&!(y=y.call(m,A[1])).done)return y;switch(m=0,y&&(A=[A[0]&2,y.value]),A[0]){case 0:case 1:y=A;break;case 4:return g.label++,{value:A[1],done:!1};case 5:g.label++,m=A[1],A=[0];continue;case 7:A=g.ops.pop(),g.trys.pop();continue;default:if(y=g.trys,!(y=y.length>0&&y[y.length-1])&&(A[0]===6||A[0]===2)){g=0;continue}if(A[0]===3&&(!y||A[1]>y[0]&&A[1]<y[3])){g.label=A[1];break}if(A[0]===6&&g.label<y[1]){g.label=y[1],y=A;break}if(y&&g.label<y[2]){g.label=y[2],g.ops.push(A);break}y[2]&&g.ops.pop(),g.trys.pop();continue}A=E.call(f,g)}catch(V){A=[6,V],m=0}finally{v=y=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}}function le(f,E,g,v){v===void 0&&(v=g),f[v]=E[g]}function Z(f,E){for(var g in f)g!=="default"&&!E.hasOwnProperty(g)&&(E[g]=f[g])}function ne(f){var E=typeof Symbol=="function"&&Symbol.iterator,g=E&&f[E],v=0;if(g)return g.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&v>=f.length&&(f=void 0),{value:f&&f[v++],done:!f}}};throw new TypeError(E?"Object is not iterable.":"Symbol.iterator is not defined.")}function fe(f,E){var g=typeof Symbol=="function"&&f[Symbol.iterator];if(!g)return f;var v=g.call(f),m,y=[],w;try{for(;(E===void 0||E-- >0)&&!(m=v.next()).done;)y.push(m.value)}catch(S){w={error:S}}finally{try{m&&!m.done&&(g=v.return)&&g.call(v)}finally{if(w)throw w.error}}return y}function Pe(){for(var f=[],E=0;E<arguments.length;E++)f=f.concat(fe(arguments[E]));return f}function De(){for(var f=0,E=0,g=arguments.length;E<g;E++)f+=arguments[E].length;for(var v=Array(f),m=0,E=0;E<g;E++)for(var y=arguments[E],w=0,S=y.length;w<S;w++,m++)v[m]=y[w];return v}function Ce(f){return this instanceof Ce?(this.v=f,this):new Ce(f)}function Ke(f,E,g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var v=g.apply(f,E||[]),m,y=[];return m={},w("next"),w("throw"),w("return"),m[Symbol.asyncIterator]=function(){return this},m;function w(Q){v[Q]&&(m[Q]=function(pe){return new Promise(function(Oe,Ne){y.push([Q,pe,Oe,Ne])>1||S(Q,pe)})})}function S(Q,pe){try{q(v[Q](pe))}catch(Oe){xe(y[0][3],Oe)}}function q(Q){Q.value instanceof Ce?Promise.resolve(Q.value.v).then(A,V):xe(y[0][2],Q)}function A(Q){S("next",Q)}function V(Q){S("throw",Q)}function xe(Q,pe){Q(pe),y.shift(),y.length&&S(y[0][0],y[0][1])}}function Ue(f){var E,g;return E={},v("next"),v("throw",function(m){throw m}),v("return"),E[Symbol.iterator]=function(){return this},E;function v(m,y){E[m]=f[m]?function(w){return(g=!g)?{value:Ce(f[m](w)),done:m==="return"}:y?y(w):w}:y}}function ye(f){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var E=f[Symbol.asyncIterator],g;return E?E.call(f):(f=typeof ne=="function"?ne(f):f[Symbol.iterator](),g={},v("next"),v("throw"),v("return"),g[Symbol.asyncIterator]=function(){return this},g);function v(y){g[y]=f[y]&&function(w){return new Promise(function(S,q){w=f[y](w),m(S,q,w.done,w.value)})}}function m(y,w,S,q){Promise.resolve(q).then(function(A){y({value:A,done:S})},w)}}function we(f,E){return Object.defineProperty?Object.defineProperty(f,"raw",{value:E}):f.raw=E,f}function x(f){if(f&&f.__esModule)return f;var E={};if(f!=null)for(var g in f)Object.hasOwnProperty.call(f,g)&&(E[g]=f[g]);return E.default=f,E}function h(f){return f&&f.__esModule?f:{default:f}}function P(f,E){if(!E.has(f))throw new TypeError("attempted to get private field on non-instance");return E.get(f)}function W(f,E,g){if(!E.has(f))throw new TypeError("attempted to set private field on non-instance");return E.set(f,g),g}},62108:function(Re,_,C){"use strict";C.r(_),C.d(_,{__assign:function(){return B},__asyncDelegator:function(){return Ue},__asyncGenerator:function(){return Ke},__asyncValues:function(){return ye},__await:function(){return Ce},__awaiter:function(){return j},__classPrivateFieldGet:function(){return P},__classPrivateFieldSet:function(){return W},__createBinding:function(){return le},__decorate:function(){return z},__exportStar:function(){return Z},__extends:function(){return ge},__generator:function(){return ie},__importDefault:function(){return h},__importStar:function(){return x},__makeTemplateObject:function(){return we},__metadata:function(){return T},__param:function(){return N},__read:function(){return fe},__rest:function(){return re},__spread:function(){return Pe},__spreadArrays:function(){return De},__values:function(){return ne}});var H=C(52677),ce=C.n(H);var ue=function(E,g){return ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,m){v.__proto__=m}||function(v,m){for(var y in m)m.hasOwnProperty(y)&&(v[y]=m[y])},ue(E,g)};function ge(f,E){ue(f,E);function g(){this.constructor=f}f.prototype=E===null?Object.create(E):(g.prototype=E.prototype,new g)}var B=function(){return B=Object.assign||function(g){for(var v,m=1,y=arguments.length;m<y;m++){v=arguments[m];for(var w in v)Object.prototype.hasOwnProperty.call(v,w)&&(g[w]=v[w])}return g},B.apply(this,arguments)};function re(f,E){var g={};for(var v in f)Object.prototype.hasOwnProperty.call(f,v)&&E.indexOf(v)<0&&(g[v]=f[v]);if(f!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,v=Object.getOwnPropertySymbols(f);m<v.length;m++)E.indexOf(v[m])<0&&Object.prototype.propertyIsEnumerable.call(f,v[m])&&(g[v[m]]=f[v[m]]);return g}function z(f,E,g,v){var m=arguments.length,y=m<3?E:v===null?v=Object.getOwnPropertyDescriptor(E,g):v,w;if((typeof Reflect>"u"?"undefined":ce()(Reflect))==="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(f,E,g,v);else for(var S=f.length-1;S>=0;S--)(w=f[S])&&(y=(m<3?w(y):m>3?w(E,g,y):w(E,g))||y);return m>3&&y&&Object.defineProperty(E,g,y),y}function N(f,E){return function(g,v){E(g,v,f)}}function T(f,E){if((typeof Reflect>"u"?"undefined":ce()(Reflect))==="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(f,E)}function j(f,E,g,v){function m(y){return y instanceof g?y:new g(function(w){w(y)})}return new(g||(g=Promise))(function(y,w){function S(V){try{A(v.next(V))}catch(xe){w(xe)}}function q(V){try{A(v.throw(V))}catch(xe){w(xe)}}function A(V){V.done?y(V.value):m(V.value).then(S,q)}A((v=v.apply(f,E||[])).next())})}function ie(f,E){var g={label:0,sent:function(){if(y[0]&1)throw y[1];return y[1]},trys:[],ops:[]},v,m,y,w;return w={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function S(A){return function(V){return q([A,V])}}function q(A){if(v)throw new TypeError("Generator is already executing.");for(;g;)try{if(v=1,m&&(y=A[0]&2?m.return:A[0]?m.throw||((y=m.return)&&y.call(m),0):m.next)&&!(y=y.call(m,A[1])).done)return y;switch(m=0,y&&(A=[A[0]&2,y.value]),A[0]){case 0:case 1:y=A;break;case 4:return g.label++,{value:A[1],done:!1};case 5:g.label++,m=A[1],A=[0];continue;case 7:A=g.ops.pop(),g.trys.pop();continue;default:if(y=g.trys,!(y=y.length>0&&y[y.length-1])&&(A[0]===6||A[0]===2)){g=0;continue}if(A[0]===3&&(!y||A[1]>y[0]&&A[1]<y[3])){g.label=A[1];break}if(A[0]===6&&g.label<y[1]){g.label=y[1],y=A;break}if(y&&g.label<y[2]){g.label=y[2],g.ops.push(A);break}y[2]&&g.ops.pop(),g.trys.pop();continue}A=E.call(f,g)}catch(V){A=[6,V],m=0}finally{v=y=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}}function le(f,E,g,v){v===void 0&&(v=g),f[v]=E[g]}function Z(f,E){for(var g in f)g!=="default"&&!E.hasOwnProperty(g)&&(E[g]=f[g])}function ne(f){var E=typeof Symbol=="function"&&Symbol.iterator,g=E&&f[E],v=0;if(g)return g.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&v>=f.length&&(f=void 0),{value:f&&f[v++],done:!f}}};throw new TypeError(E?"Object is not iterable.":"Symbol.iterator is not defined.")}function fe(f,E){var g=typeof Symbol=="function"&&f[Symbol.iterator];if(!g)return f;var v=g.call(f),m,y=[],w;try{for(;(E===void 0||E-- >0)&&!(m=v.next()).done;)y.push(m.value)}catch(S){w={error:S}}finally{try{m&&!m.done&&(g=v.return)&&g.call(v)}finally{if(w)throw w.error}}return y}function Pe(){for(var f=[],E=0;E<arguments.length;E++)f=f.concat(fe(arguments[E]));return f}function De(){for(var f=0,E=0,g=arguments.length;E<g;E++)f+=arguments[E].length;for(var v=Array(f),m=0,E=0;E<g;E++)for(var y=arguments[E],w=0,S=y.length;w<S;w++,m++)v[m]=y[w];return v}function Ce(f){return this instanceof Ce?(this.v=f,this):new Ce(f)}function Ke(f,E,g){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var v=g.apply(f,E||[]),m,y=[];return m={},w("next"),w("throw"),w("return"),m[Symbol.asyncIterator]=function(){return this},m;function w(Q){v[Q]&&(m[Q]=function(pe){return new Promise(function(Oe,Ne){y.push([Q,pe,Oe,Ne])>1||S(Q,pe)})})}function S(Q,pe){try{q(v[Q](pe))}catch(Oe){xe(y[0][3],Oe)}}function q(Q){Q.value instanceof Ce?Promise.resolve(Q.value.v).then(A,V):xe(y[0][2],Q)}function A(Q){S("next",Q)}function V(Q){S("throw",Q)}function xe(Q,pe){Q(pe),y.shift(),y.length&&S(y[0][0],y[0][1])}}function Ue(f){var E,g;return E={},v("next"),v("throw",function(m){throw m}),v("return"),E[Symbol.iterator]=function(){return this},E;function v(m,y){E[m]=f[m]?function(w){return(g=!g)?{value:Ce(f[m](w)),done:m==="return"}:y?y(w):w}:y}}function ye(f){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var E=f[Symbol.asyncIterator],g;return E?E.call(f):(f=typeof ne=="function"?ne(f):f[Symbol.iterator](),g={},v("next"),v("throw"),v("return"),g[Symbol.asyncIterator]=function(){return this},g);function v(y){g[y]=f[y]&&function(w){return new Promise(function(S,q){w=f[y](w),m(S,q,w.done,w.value)})}}function m(y,w,S,q){Promise.resolve(q).then(function(A){y({value:A,done:S})},w)}}function we(f,E){return Object.defineProperty?Object.defineProperty(f,"raw",{value:E}):f.raw=E,f}function x(f){if(f&&f.__esModule)return f;var E={};if(f!=null)for(var g in f)Object.hasOwnProperty.call(f,g)&&(E[g]=f[g]);return E.default=f,E}function h(f){return f&&f.__esModule?f:{default:f}}function P(f,E){if(!E.has(f))throw new TypeError("attempted to get private field on non-instance");return E.get(f)}function W(f,E,g){if(!E.has(f))throw new TypeError("attempted to set private field on non-instance");return E.set(f,g),g}},38018:function(Re,_,C){"use strict";var H=C(9783).default,ce=C(5574).default,ue=C(64599).default,ge=C(52677).default,B=C(19632).default,re=C(62072),z=C(44020),N=C(13615),T=C(92806),j=function(h){return h==null},ie=Symbol("encodeFragmentIdentifier");function le(x){switch(x.arrayFormat){case"index":return function(P){return function(W,f){var E=W.length;return f===void 0||x.skipNull&&f===null||x.skipEmptyString&&f===""?W:f===null?[].concat(B(W),[[fe(P,x),"[",E,"]"].join("")]):[].concat(B(W),[[fe(P,x),"[",fe(E,x),"]=",fe(f,x)].join("")])}};case"bracket":return function(P){return function(W,f){return f===void 0||x.skipNull&&f===null||x.skipEmptyString&&f===""?W:f===null?[].concat(B(W),[[fe(P,x),"[]"].join("")]):[].concat(B(W),[[fe(P,x),"[]=",fe(f,x)].join("")])}};case"colon-list-separator":return function(P){return function(W,f){return f===void 0||x.skipNull&&f===null||x.skipEmptyString&&f===""?W:f===null?[].concat(B(W),[[fe(P,x),":list="].join("")]):[].concat(B(W),[[fe(P,x),":list=",fe(f,x)].join("")])}};case"comma":case"separator":case"bracket-separator":{var h=x.arrayFormat==="bracket-separator"?"[]=":"=";return function(P){return function(W,f){return f===void 0||x.skipNull&&f===null||x.skipEmptyString&&f===""?W:(f=f===null?"":f,W.length===0?[[fe(P,x),h,fe(f,x)].join("")]:[[W,fe(f,x)].join(x.arrayFormatSeparator)])}}}default:return function(P){return function(W,f){return f===void 0||x.skipNull&&f===null||x.skipEmptyString&&f===""?W:f===null?[].concat(B(W),[fe(P,x)]):[].concat(B(W),[[fe(P,x),"=",fe(f,x)].join("")])}}}}function Z(x){var h;switch(x.arrayFormat){case"index":return function(P,W,f){if(h=/\[(\d*)\]$/.exec(P),P=P.replace(/\[\d*\]$/,""),!h){f[P]=W;return}f[P]===void 0&&(f[P]={}),f[P][h[1]]=W};case"bracket":return function(P,W,f){if(h=/(\[\])$/.exec(P),P=P.replace(/\[\]$/,""),!h){f[P]=W;return}if(f[P]===void 0){f[P]=[W];return}f[P]=[].concat(f[P],W)};case"colon-list-separator":return function(P,W,f){if(h=/(:list)$/.exec(P),P=P.replace(/:list$/,""),!h){f[P]=W;return}if(f[P]===void 0){f[P]=[W];return}f[P]=[].concat(f[P],W)};case"comma":case"separator":return function(P,W,f){var E=typeof W=="string"&&W.includes(x.arrayFormatSeparator),g=typeof W=="string"&&!E&&Pe(W,x).includes(x.arrayFormatSeparator);W=g?Pe(W,x):W;var v=E||g?W.split(x.arrayFormatSeparator).map(function(m){return Pe(m,x)}):W===null?W:Pe(W,x);f[P]=v};case"bracket-separator":return function(P,W,f){var E=/(\[\])$/.test(P);if(P=P.replace(/\[\]$/,""),!E){f[P]=W&&Pe(W,x);return}var g=W===null?[]:W.split(x.arrayFormatSeparator).map(function(v){return Pe(v,x)});if(f[P]===void 0){f[P]=g;return}f[P]=[].concat(f[P],g)};default:return function(P,W,f){if(f[P]===void 0){f[P]=W;return}f[P]=[].concat(f[P],W)}}}function ne(x){if(typeof x!="string"||x.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function fe(x,h){return h.encode?h.strict?re(x):encodeURIComponent(x):x}function Pe(x,h){return h.decode?z(x):x}function De(x){return Array.isArray(x)?x.sort():ge(x)==="object"?De(Object.keys(x)).sort(function(h,P){return Number(h)-Number(P)}).map(function(h){return x[h]}):x}function Ce(x){var h=x.indexOf("#");return h!==-1&&(x=x.slice(0,h)),x}function Ke(x){var h="",P=x.indexOf("#");return P!==-1&&(h=x.slice(P)),h}function Ue(x){x=Ce(x);var h=x.indexOf("?");return h===-1?"":x.slice(h+1)}function ye(x,h){return h.parseNumbers&&!Number.isNaN(Number(x))&&typeof x=="string"&&x.trim()!==""?x=Number(x):h.parseBooleans&&x!==null&&(x.toLowerCase()==="true"||x.toLowerCase()==="false")&&(x=x.toLowerCase()==="true"),x}function we(x,h){h=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},h),ne(h.arrayFormatSeparator);var P=Z(h),W=Object.create(null);if(typeof x!="string"||(x=x.trim().replace(/^[?#&]/,""),!x))return W;var f=ue(x.split("&")),E;try{for(f.s();!(E=f.n()).done;){var g=E.value;if(g!==""){var v=N(h.decode?g.replace(/\+/g," "):g,"="),m=ce(v,2),y=m[0],w=m[1];w=w===void 0?null:["comma","separator","bracket-separator"].includes(h.arrayFormat)?w:Pe(w,h),P(Pe(y,h),w,W)}}}catch(Oe){f.e(Oe)}finally{f.f()}for(var S=0,q=Object.keys(W);S<q.length;S++){var A=q[S],V=W[A];if(ge(V)==="object"&&V!==null)for(var xe=0,Q=Object.keys(V);xe<Q.length;xe++){var pe=Q[xe];V[pe]=ye(V[pe],h)}else W[A]=ye(V,h)}return h.sort===!1?W:(h.sort===!0?Object.keys(W).sort():Object.keys(W).sort(h.sort)).reduce(function(Oe,Ne){var Be=W[Ne];return Be&&ge(Be)==="object"&&!Array.isArray(Be)?Oe[Ne]=De(Be):Oe[Ne]=Be,Oe},Object.create(null))}_.extract=Ue,_.parse=we,_.stringify=function(x,h){if(!x)return"";h=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},h),ne(h.arrayFormatSeparator);for(var P=function(w){return h.skipNull&&j(x[w])||h.skipEmptyString&&x[w]===""},W=le(h),f={},E=0,g=Object.keys(x);E<g.length;E++){var v=g[E];P(v)||(f[v]=x[v])}var m=Object.keys(f);return h.sort!==!1&&m.sort(h.sort),m.map(function(y){var w=x[y];return w===void 0?"":w===null?fe(y,h):Array.isArray(w)?w.length===0&&h.arrayFormat==="bracket-separator"?fe(y,h)+"[]":w.reduce(W(y),[]).join("&"):fe(y,h)+"="+fe(w,h)}).filter(function(y){return y.length>0}).join("&")},_.parseUrl=function(x,h){h=Object.assign({decode:!0},h);var P=N(x,"#"),W=ce(P,2),f=W[0],E=W[1];return Object.assign({url:f.split("?")[0]||"",query:we(Ue(x),h)},h&&h.parseFragmentIdentifier&&E?{fragmentIdentifier:Pe(E,h)}:{})},_.stringifyUrl=function(x,h){h=Object.assign(H({encode:!0,strict:!0},ie,!0),h);var P=Ce(x.url).split("?")[0]||"",W=_.extract(x.url),f=_.parse(W,{sort:!1}),E=Object.assign(f,x.query),g=_.stringify(E,h);g&&(g="?".concat(g));var v=Ke(x.url);return x.fragmentIdentifier&&(v="#".concat(h[ie]?fe(x.fragmentIdentifier,h):x.fragmentIdentifier)),"".concat(P).concat(g).concat(v)},_.pick=function(x,h,P){P=Object.assign(H({parseFragmentIdentifier:!0},ie,!1),P);var W=_.parseUrl(x,P),f=W.url,E=W.query,g=W.fragmentIdentifier;return _.stringifyUrl({url:f,query:T(E,h),fragmentIdentifier:g},P)},_.exclude=function(x,h,P){var W=Array.isArray(h)?function(f){return!h.includes(f)}:function(f,E){return!h(f,E)};return _.pick(x,W,P)}},13615:function(Re){"use strict";Re.exports=function(_,C){if(!(typeof _=="string"&&typeof C=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(C==="")return[_];var H=_.indexOf(C);return H===-1?[_]:[_.slice(0,H),_.slice(H+C.length)]}},62072:function(Re){"use strict";Re.exports=function(_){return encodeURIComponent(_).replace(/[!'()*]/g,function(C){return"%".concat(C.charCodeAt(0).toString(16).toUpperCase())})}},1354:function(Re,_,C){Re.exports=self.fetch||(self.fetch=C(13576).default||C(13576))},13576:function(Re,_,C){"use strict";C.r(_),C.d(_,{default:function(){return H}});function H(ce,ue){return ue=ue||{},new Promise(function(ge,B){var re=new XMLHttpRequest,z=[],N=[],T={},j=function(){return{ok:(re.status/100|0)==2,statusText:re.statusText,status:re.status,url:re.responseURL,text:function(){return Promise.resolve(re.responseText)},json:function(){return Promise.resolve(re.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([re.response]))},clone:j,headers:{keys:function(){return z},entries:function(){return N},get:function(le){return T[le.toLowerCase()]},has:function(le){return le.toLowerCase()in T}}}};for(var ie in re.open(ue.method||"get",ce,!0),re.onload=function(){re.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(le,Z,ne){z.push(Z=Z.toLowerCase()),N.push([Z,ne]),T[Z]=T[Z]?T[Z]+","+ne:ne}),ge(j())},re.onerror=B,re.withCredentials=ue.credentials=="include",ue.headers)re.setRequestHeader(ie,ue.headers[ie]);re.send(ue.body||null)})}},40926:function(Re,_,C){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.isBrowserCryptoAvailable=_.getSubtleCrypto=_.getBrowerCrypto=void 0;function H(){return(C.g===null||C.g===void 0?void 0:C.g.crypto)||(C.g===null||C.g===void 0?void 0:C.g.msCrypto)||{}}_.getBrowerCrypto=H;function ce(){const ge=H();return ge.subtle||ge.webkitSubtle}_.getSubtleCrypto=ce;function ue(){return!!H()&&!!ce()}_.isBrowserCryptoAvailable=ue},88618:function(Re,_,C){"use strict";var H=C(34155);Object.defineProperty(_,"__esModule",{value:!0}),_.isBrowser=_.isNode=_.isReactNative=void 0;function ce(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}_.isReactNative=ce;function ue(){return typeof H<"u"&&typeof H.versions<"u"&&typeof H.versions.node<"u"}_.isNode=ue;function ge(){return!ce()&&!ue()}_.isBrowser=ge},1468:function(Re,_,C){"use strict";Object.defineProperty(_,"__esModule",{value:!0});const H=C(20933);H.__exportStar(C(40926),_),H.__exportStar(C(88618),_)},33138:function(Re,_,C){"use strict";C.d(_,{EthereumProvider:function(){return A1}});var H={};C.r(H),C.d(H,{identity:function(){return $}});var ce={};C.r(ce),C.d(ce,{base2:function(){return Ae}});var ue={};C.r(ue),C.d(ue,{base8:function(){return We}});var ge={};C.r(ge),C.d(ge,{base10:function(){return ht}});var B={};C.r(B),C.d(B,{base16:function(){return Ot},base16upper:function(){return pt}});var re={};C.r(re),C.d(re,{base32:function(){return gt},base32hex:function(){return yt},base32hexpad:function(){return lt},base32hexpadupper:function(){return at},base32hexupper:function(){return dt},base32pad:function(){return rr},base32padupper:function(){return _t},base32upper:function(){return Vt},base32z:function(){return et}});var z={};C.r(z),C.d(z,{base36:function(){return tt},base36upper:function(){return nt}});var N={};C.r(N),C.d(N,{base58btc:function(){return qe},base58flickr:function(){return vt}});var T={};C.r(T),C.d(T,{base64:function(){return wt},base64pad:function(){return It},base64url:function(){return xt},base64urlpad:function(){return Et}});var j={};C.r(j),C.d(j,{base256emoji:function(){return zn}});var ie={};C.r(ie),C.d(ie,{sha256:function(){return La},sha512:function(){return Ma}});var le={};C.r(le),C.d(le,{identity:function(){return za}});var Z={};C.r(Z),C.d(Z,{code:function(){return Ha},decode:function(){return Ka},encode:function(){return Wi},name:function(){return $a}});var ne={};C.r(ne),C.d(ne,{code:function(){return Va},decode:function(){return Wa},encode:function(){return qa},name:function(){return po}});var fe=C(17187),Pe=C.n(fe),De=C(15501),Ce=C(512),Ke=C(31416),Ue=C(73294),ye=C(57664);function we(s){return globalThis.Buffer!=null?new Uint8Array(s.buffer,s.byteOffset,s.byteLength):s}function x(s=0){return globalThis.Buffer!=null&&globalThis.Buffer.alloc!=null?asUint8Array(globalThis.Buffer.alloc(s)):new Uint8Array(s)}function h(s=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?we(globalThis.Buffer.allocUnsafe(s)):new Uint8Array(s)}function P(s,e){e||(e=s.reduce((u,p)=>u+p.length,0));const r=h(e);let o=0;for(const u of s)r.set(u,o),o+=u.length;return we(r)}function W(s,e){if(s.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),o=0;o<r.length;o++)r[o]=255;for(var u=0;u<s.length;u++){var p=s.charAt(u),D=p.charCodeAt(0);if(r[D]!==255)throw new TypeError(p+" is ambiguous");r[D]=u}var F=s.length,G=s.charAt(0),U=Math.log(F)/Math.log(256),te=Math.log(256)/Math.log(F);function oe(ve){if(ve instanceof Uint8Array||(ArrayBuffer.isView(ve)?ve=new Uint8Array(ve.buffer,ve.byteOffset,ve.byteLength):Array.isArray(ve)&&(ve=Uint8Array.from(ve))),!(ve instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(ve.length===0)return"";for(var Me=0,Ge=0,Xe=0,Rt=ve.length;Xe!==Rt&&ve[Xe]===0;)Xe++,Me++;for(var ct=(Rt-Xe)*te+1>>>0,Ze=new Uint8Array(ct);Xe!==Rt;){for(var Je=ve[Xe],Ct=0,At=ct-1;(Je!==0||Ct<Ge)&&At!==-1;At--,Ct++)Je+=256*Ze[At]>>>0,Ze[At]=Je%F>>>0,Je=Je/F>>>0;if(Je!==0)throw new Error("Non-zero carry");Ge=Ct,Xe++}for(var Ht=ct-Ge;Ht!==ct&&Ze[Ht]===0;)Ht++;for(var Zr=G.repeat(Me);Ht<ct;++Ht)Zr+=s.charAt(Ze[Ht]);return Zr}function _e(ve){if(typeof ve!="string")throw new TypeError("Expected String");if(ve.length===0)return new Uint8Array;var Me=0;if(ve[Me]!==" "){for(var Ge=0,Xe=0;ve[Me]===G;)Ge++,Me++;for(var Rt=(ve.length-Me)*U+1>>>0,ct=new Uint8Array(Rt);ve[Me];){var Ze=r[ve.charCodeAt(Me)];if(Ze===255)return;for(var Je=0,Ct=Rt-1;(Ze!==0||Je<Xe)&&Ct!==-1;Ct--,Je++)Ze+=F*ct[Ct]>>>0,ct[Ct]=Ze%256>>>0,Ze=Ze/256>>>0;if(Ze!==0)throw new Error("Non-zero carry");Xe=Je,Me++}if(ve[Me]!==" "){for(var At=Rt-Xe;At!==Rt&&ct[At]===0;)At++;for(var Ht=new Uint8Array(Ge+(Rt-At)),Zr=Ge;At!==Rt;)Ht[Zr++]=ct[At++];return Ht}}}function ze(ve){var Me=_e(ve);if(Me)return Me;throw new Error(`Non-${e} character`)}return{encode:oe,decodeUnsafe:_e,decode:ze}}var f=W,E=f,g=E;const v=new Uint8Array(0),m=s=>s.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),""),y=s=>{const e=s.match(/../g);return e?new Uint8Array(e.map(r=>parseInt(r,16))):v},w=(s,e)=>{if(s===e)return!0;if(s.byteLength!==e.byteLength)return!1;for(let r=0;r<s.byteLength;r++)if(s[r]!==e[r])return!1;return!0},S=s=>{if(s instanceof Uint8Array&&s.constructor.name==="Uint8Array")return s;if(s instanceof ArrayBuffer)return new Uint8Array(s);if(ArrayBuffer.isView(s))return new Uint8Array(s.buffer,s.byteOffset,s.byteLength);throw new Error("Unknown type, must be binary type")},q=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),A=s=>new TextEncoder().encode(s),V=s=>new TextDecoder().decode(s);class xe{constructor(e,r,o){this.name=e,this.prefix=r,this.baseEncode=o}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Q{constructor(e,r,o){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=o}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Oe(this,e)}}class pe{constructor(e){this.decoders=e}or(e){return Oe(this,e)}decode(e){const r=e[0],o=this.decoders[r];if(o)return o.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Oe=(s,e)=>new pe({...s.decoders||{[s.prefix]:s},...e.decoders||{[e.prefix]:e}});class Ne{constructor(e,r,o,u){this.name=e,this.prefix=r,this.baseEncode=o,this.baseDecode=u,this.encoder=new xe(e,r,o),this.decoder=new Q(e,r,u)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const Be=({name:s,prefix:e,encode:r,decode:o})=>new Ne(s,e,r,o),se=({prefix:s,name:e,alphabet:r})=>{const{encode:o,decode:u}=g(r,e);return Be({prefix:s,name:e,encode:o,decode:p=>S(u(p))})},ae=(s,e,r,o)=>{const u={};for(let te=0;te<e.length;++te)u[e[te]]=te;let p=s.length;for(;s[p-1]==="=";)--p;const D=new Uint8Array(p*r/8|0);let F=0,G=0,U=0;for(let te=0;te<p;++te){const oe=u[s[te]];if(oe===void 0)throw new SyntaxError(`Non-${o} character`);G=G<<r|oe,F+=r,F>=8&&(F-=8,D[U++]=255&G>>F)}if(F>=r||255&G<<8-F)throw new SyntaxError("Unexpected end of data");return D},k=(s,e,r)=>{const o=e[e.length-1]==="=",u=(1<<r)-1;let p="",D=0,F=0;for(let G=0;G<s.length;++G)for(F=F<<8|s[G],D+=8;D>r;)D-=r,p+=e[u&F>>D];if(D&&(p+=e[u&F<<r-D]),o)for(;p.length*r&7;)p+="=";return p},d=({name:s,prefix:e,bitsPerChar:r,alphabet:o})=>Be({prefix:e,name:s,encode(u){return k(u,o,r)},decode(u){return ae(u,o,r,s)}}),$=Be({prefix:"\0",name:"identity",encode:s=>V(s),decode:s=>A(s)}),Ae=d({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),We=d({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),ht=se({prefix:"9",name:"base10",alphabet:"0123456789"}),Ot=d({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),pt=d({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),gt=d({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Vt=d({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),rr=d({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),_t=d({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),yt=d({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),dt=d({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),lt=d({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),at=d({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),et=d({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),tt=se({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),nt=se({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),qe=se({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),vt=se({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),wt=d({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),It=d({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),xt=d({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Et=d({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Pt=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),Tt=Pt.reduce((s,e,r)=>(s[r]=e,s),[]),an=Pt.reduce((s,e,r)=>(s[e.codePointAt(0)]=r,s),[]);function Sr(s){return s.reduce((e,r)=>(e+=Tt[r],e),"")}function mn(s){const e=[];for(const r of s){const o=an[r.codePointAt(0)];if(o===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(o)}return new Uint8Array(e)}const zn=Be({prefix:"\u{1F680}",name:"base256emoji",encode:Sr,decode:mn});var oi=Jt,An=128,Rn=127,Qt=~Rn,Xt=Math.pow(2,31);function Jt(s,e,r){e=e||[],r=r||0;for(var o=r;s>=Xt;)e[r++]=s&255|An,s/=128;for(;s&Qt;)e[r++]=s&255|An,s>>>=7;return e[r]=s|0,Jt.bytes=r-o+1,e}var qt=Zt,cr=128,nr=127;function Zt(s,o){var r=0,o=o||0,u=0,p=o,D,F=s.length;do{if(p>=F)throw Zt.bytes=0,new RangeError("Could not decode varint");D=s[p++],r+=u<28?(D&nr)<<u:(D&nr)*Math.pow(2,u),u+=7}while(D>=cr);return Zt.bytes=p-o,r}var ur=Math.pow(2,7),hr=Math.pow(2,14),ir=Math.pow(2,21),er=Math.pow(2,28),Mt=Math.pow(2,35),lr=Math.pow(2,42),fr=Math.pow(2,49),dr=Math.pow(2,56),pr=Math.pow(2,63),Ta=function(s){return s<ur?1:s<hr?2:s<ir?3:s<er?4:s<Mt?5:s<lr?6:s<fr?7:s<dr?8:s<pr?9:10},_n={encode:oi,decode:qt,encodingLength:Ta},Na=_n,Ki=Na;const Is=(s,e=0)=>[Ki.decode(s,e),Ki.decode.bytes],Vi=(s,e,r=0)=>(Ki.encode(s,e,r),e),qi=s=>Ki.encodingLength(s),cn=(s,e)=>{const r=e.byteLength,o=qi(s),u=o+qi(r),p=new Uint8Array(u+r);return Vi(s,p,0),Vi(r,p,o),p.set(e,u),new xs(s,r,e,p)},Fa=s=>{const e=S(s),[r,o]=Is(e),[u,p]=Is(e.subarray(o)),D=e.subarray(o+p);if(D.byteLength!==u)throw new Error("Incorrect length");return new xs(r,u,D,e)},Ua=(s,e)=>s===e?!0:s.code===e.code&&s.size===e.size&&w(s.bytes,e.bytes);class xs{constructor(e,r,o,u){this.code=e,this.size=r,this.digest=o,this.bytes=u}}const ho=({name:s,code:e,encode:r})=>new ja(s,e,r);class ja{constructor(e,r,o){this.name=e,this.code=r,this.encode=o}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?cn(this.code,r):r.then(o=>cn(this.code,o))}else throw Error("Unknown type, must be binary type")}}const Di=s=>async e=>new Uint8Array(await crypto.subtle.digest(s,e)),La=ho({name:"sha2-256",code:18,encode:Di("SHA-256")}),Ma=ho({name:"sha2-512",code:19,encode:Di("SHA-512")}),wn=0,Ba="identity",lo=S,za={code:wn,name:Ba,encode:lo,digest:s=>cn(wn,lo(s))},$a="raw",Ha=85,Wi=s=>S(s),Ka=s=>S(s),Si=new TextEncoder,fo=new TextDecoder,po="json",Va=512,qa=s=>Si.encode(JSON.stringify(s)),Wa=s=>JSON.parse(fo.decode(s));class Ir{constructor(e,r,o,u){this.code=r,this.version=e,this.multihash=o,this.bytes=u,this.byteOffset=u.byteOffset,this.byteLength=u.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:Jr,byteLength:Jr,code:ki,version:ki,multihash:ki,bytes:ki,_baseCache:Jr,asCID:Jr})}toV0(){switch(this.version){case 0:return this;default:{const{code:e,multihash:r}=this;if(e!==ai)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==Gi)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Ir.createV0(r)}}}toV1(){switch(this.version){case 0:{const{code:e,digest:r}=this.multihash,o=cn(e,r);return Ir.createV1(this.code,o)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&Ua(this.multihash,e.multihash)}toString(e){const{bytes:r,version:o,_baseCache:u}=this;switch(o){case 0:return Ga(r,u,e||qe.encoder);default:return ka(r,u,e||gt.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return Ya(/^0\.0/,Qa),!!(e&&(e[yo]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof Ir)return e;if(e!=null&&e.asCID===e){const{version:r,code:o,multihash:u,bytes:p}=e;return new Ir(r,o,u,p||$n(r,o,u.bytes))}else if(e!=null&&e[yo]===!0){const{version:r,multihash:o,code:u}=e,p=Fa(o);return Ir.create(r,u,p)}else return null}static create(e,r,o){if(typeof r!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(r!==ai)throw new Error(`Version 0 CID must use dag-pb (code: ${ai}) block encoding`);return new Ir(e,r,o,o.bytes)}case 1:{const u=$n(e,r,o.bytes);return new Ir(e,r,o,u)}default:throw new Error("Invalid version")}}static createV0(e){return Ir.create(0,ai,e)}static createV1(e,r){return Ir.create(1,e,r)}static decode(e){const[r,o]=Ir.decodeFirst(e);if(o.length)throw new Error("Incorrect length");return r}static decodeFirst(e){const r=Ir.inspectBytes(e),o=r.size-r.multihashSize,u=S(e.subarray(o,o+r.multihashSize));if(u.byteLength!==r.multihashSize)throw new Error("Incorrect length");const p=u.subarray(r.multihashSize-r.digestSize),D=new xs(r.multihashCode,r.digestSize,p,u);return[r.version===0?Ir.createV0(D):Ir.createV1(r.codec,D),e.subarray(r.size)]}static inspectBytes(e){let r=0;const o=()=>{const[oe,_e]=Is(e.subarray(r));return r+=_e,oe};let u=o(),p=ai;if(u===18?(u=0,r=0):u===1&&(p=o()),u!==0&&u!==1)throw new RangeError(`Invalid CID version ${u}`);const D=r,F=o(),G=o(),U=r+G,te=U-D;return{version:u,codec:p,multihashCode:F,digestSize:G,multihashSize:te,size:U}}static parse(e,r){const[o,u]=go(e,r),p=Ir.decode(u);return p._baseCache.set(o,e),p}}const go=(s,e)=>{switch(s[0]){case"Q":{const r=e||qe;return[qe.prefix,r.decode(`${qe.prefix}${s}`)]}case qe.prefix:{const r=e||qe;return[qe.prefix,r.decode(s)]}case gt.prefix:{const r=e||gt;return[gt.prefix,r.decode(s)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[s[0],e.decode(s)]}}},Ga=(s,e,r)=>{const{prefix:o}=r;if(o!==qe.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const u=e.get(o);if(u==null){const p=r.encode(s).slice(1);return e.set(o,p),p}else return u},ka=(s,e,r)=>{const{prefix:o}=r,u=e.get(o);if(u==null){const p=r.encode(s);return e.set(o,p),p}else return u},ai=112,Gi=18,$n=(s,e,r)=>{const o=qi(s),u=o+qi(e),p=new Uint8Array(u+r.byteLength);return Vi(s,p,0),Vi(e,p,o),p.set(r,u),p},yo=Symbol.for("@ipld/js-cid/CID"),ki={writable:!1,configurable:!1,enumerable:!0},Jr={writable:!1,enumerable:!1,configurable:!1},Ja="0.0.0-dev",Ya=(s,e)=>{if(s.test(Ja))console.warn(e);else throw new Error(e)},Qa=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`,vo={...H,...ce,...ue,...ge,...B,...re,...z,...N,...T,...j},lh={...ie,...le},ci={raw:Z,json:ne};function Os(s,e,r,o){return{name:s,prefix:e,encoder:{name:s,prefix:e,encode:r},decoder:{decode:o}}}const mo=Os("utf8","u",s=>"u"+new TextDecoder("utf8").decode(s),s=>new TextEncoder().encode(s.substring(1))),ui=Os("ascii","a",s=>{let e="a";for(let r=0;r<s.length;r++)e+=String.fromCharCode(s[r]);return e},s=>{s=s.substring(1);const e=h(s.length);for(let r=0;r<s.length;r++)e[r]=s.charCodeAt(r);return e});var Ji={utf8:mo,"utf-8":mo,hex:vo.base16,latin1:ui,ascii:ui,binary:ui,...vo};function Cr(s,e="utf8"){const r=Ji[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?we(globalThis.Buffer.from(s,"utf-8")):r.decoder.decode(`${r.prefix}${s}`)}function _r(s,e="utf8"){const r=Ji[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(s.buffer,s.byteOffset,s.byteLength).toString("utf8"):r.encoder.encode(s).substring(1)}var Ii=C(34155),Ps=function(s,e,r){if(r||arguments.length===2)for(var o=0,u=e.length,p;o<u;o++)(p||!(o in e))&&(p||(p=Array.prototype.slice.call(e,0,o)),p[o]=e[o]);return s.concat(p||Array.prototype.slice.call(e))},xi=function(){function s(e,r,o){this.name=e,this.version=r,this.os=o,this.type="browser"}return s}(),_o=function(){function s(e){this.version=e,this.type="node",this.name="node",this.os=Ii.platform}return s}(),Xa=function(){function s(e,r,o,u){this.name=e,this.version=r,this.os=o,this.bot=u,this.type="bot-device"}return s}(),Za=function(){function s(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return s}(),ec=function(){function s(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return s}(),R=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,J=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,Se=3,$e=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",R]],jt=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function it(s){return s?gr(s):typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new ec:typeof navigator<"u"?gr(navigator.userAgent):Nr()}function zt(s){return s!==""&&$e.reduce(function(e,r){var o=r[0],u=r[1];if(e)return e;var p=u.exec(s);return!!p&&[o,p]},!1)}function yr(s){var e=zt(s);return e?e[0]:null}function gr(s){var e=zt(s);if(!e)return null;var r=e[0],o=e[1];if(r==="searchbot")return new Za;var u=o[1]&&o[1].split(".").join("_").split("_").slice(0,3);u?u.length<Se&&(u=Ps(Ps([],u,!0),Yr(Se-u.length),!0)):u=[];var p=u.join("."),D=$t(s),F=J.exec(s);return F&&F[1]?new Xa(r,p,D,F[1]):new xi(r,p,D)}function $t(s){for(var e=0,r=jt.length;e<r;e++){var o=jt[e],u=o[0],p=o[1],D=p.exec(s);if(D)return u}return null}function Nr(){var s=typeof Ii<"u"&&Ii.version;return s?new _o(Ii.version.slice(1)):null}function Yr(s){for(var e=[],r=0;r<s;r++)e.push("0");return e}var Le=C(66736),wr=C(62873),zr=C(65755),Qr=C(38018),Tn=C(61882);const Hn={waku:{publish:"waku_publish",batchPublish:"waku_batchPublish",subscribe:"waku_subscribe",batchSubscribe:"waku_batchSubscribe",subscription:"waku_subscription",unsubscribe:"waku_unsubscribe",batchUnsubscribe:"waku_batchUnsubscribe"},irn:{publish:"irn_publish",batchPublish:"irn_batchPublish",subscribe:"irn_subscribe",batchSubscribe:"irn_batchSubscribe",subscription:"irn_subscription",unsubscribe:"irn_unsubscribe",batchUnsubscribe:"irn_batchUnsubscribe"},iridium:{publish:"iridium_publish",batchPublish:"iridium_batchPublish",subscribe:"iridium_subscribe",batchSubscribe:"iridium_batchSubscribe",subscription:"iridium_subscription",unsubscribe:"iridium_unsubscribe",batchUnsubscribe:"iridium_batchUnsubscribe"}};var Yi=C(34155);const Kn=":";function Oi(s){const[e,r]=s.split(Kn);return{namespace:e,reference:r}}function Wp(s){const{namespace:e,reference:r}=s;return[e,r].join(Kn)}function dh(s){const[e,r,o]=s.split(Kn);return{namespace:e,reference:r,address:o}}function Gp(s){const{namespace:e,reference:r,address:o}=s;return[e,r,o].join(Kn)}function ph(s,e){const r=[];return s.forEach(o=>{const u=e(o);r.includes(u)||r.push(u)}),r}function kp(s){const{address:e}=dh(s);return e}function Jp(s){const{namespace:e,reference:r}=dh(s);return Wp({namespace:e,reference:r})}function xS(s,e){const{namespace:r,reference:o}=Oi(e);return Gp({namespace:r,reference:o,address:s})}function OS(s){return ph(s,kp)}function Yp(s){return ph(s,Jp)}function Qp(s,e=[]){const r=[];return Object.keys(s).forEach(o=>{if(e.length&&!e.includes(o))return;const u=s[o];r.push(...u.accounts)}),r}function PS(s,e=[]){const r=[];return Object.keys(s).forEach(o=>{if(e.length&&!e.includes(o))return;const u=s[o];r.push(...Yp(u.accounts))}),r}function CS(s,e=[]){const r=[];return Object.keys(s).forEach(o=>{if(e.length&&!e.includes(o))return;const u=s[o];r.push(...tc(o,u))}),r}function tc(s,e){return s.includes(":")?[s]:e.chains||[]}const rc=s=>s==null?void 0:s.split(":"),Xp=s=>{const e=s&&rc(s);if(e)return e[3]},AS=s=>{const e=s&&rc(s);if(e)return e[2]+":"+e[3]},Zp=s=>{const e=s&&rc(s);if(e)return e.pop()},RS=(s,e)=>{const r=`${s.domain} wants you to sign in with your Ethereum account:`,o=Zp(e),u=s.statement,p=`URI: ${s.aud}`,D=`Version: ${s.version}`,F=`Chain ID: ${Xp(e)}`,G=`Nonce: ${s.nonce}`,U=`Issued At: ${s.iat}`,te=s.resources&&s.resources.length>0?`Resources:
${s.resources.map(oe=>`- ${oe}`).join(`
`)}`:void 0;return[r,o,"",u,"",p,D,F,G,U,te].filter(oe=>oe!=null).join(`
`)},gh="base10",Fr="base16",nc="base64pad",ic="utf8",yh=0,Pi=1,eg=0,vh=1,sc=12,oc=32;function tg(){const s=ye.Au();return{privateKey:_r(s.secretKey,Fr),publicKey:_r(s.publicKey,Fr)}}function ac(){const s=(0,Ke.randomBytes)(oc);return _r(s,Fr)}function rg(s,e){const r=ye.gi(Cr(s,Fr),Cr(e,Fr),!0),o=new Ce.t(Ue.mE,r).expand(oc);return _r(o,Fr)}function ng(s){const e=(0,Ue.vp)(Cr(s,Fr));return _r(e,Fr)}function Qi(s){const e=(0,Ue.vp)(Cr(s,ic));return _r(e,Fr)}function ig(s){return Cr(`${s}`,gh)}function Cs(s){return Number(_r(s,gh))}function sg(s){const e=ig(typeof s.type<"u"?s.type:yh);if(Cs(e)===Pi&&typeof s.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const r=typeof s.senderPublicKey<"u"?Cr(s.senderPublicKey,Fr):void 0,o=typeof s.iv<"u"?Cr(s.iv,Fr):(0,Ke.randomBytes)(sc),u=new De.OK(Cr(s.symKey,Fr)).seal(o,Cr(s.message,ic));return ag({type:e,sealed:u,iv:o,senderPublicKey:r})}function og(s){const e=new De.OK(Cr(s.symKey,Fr)),{sealed:r,iv:o}=wo(s.encoded),u=e.open(o,r);if(u===null)throw new Error("Failed to decrypt");return _r(u,ic)}function ag(s){if(Cs(s.type)===Pi){if(typeof s.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return _r(P([s.type,s.senderPublicKey,s.iv,s.sealed]),nc)}return _r(P([s.type,s.iv,s.sealed]),nc)}function wo(s){const e=Cr(s,nc),r=e.slice(eg,vh),o=vh;if(Cs(r)===Pi){const F=o+oc,G=F+sc,U=e.slice(o,F),te=e.slice(F,G),oe=e.slice(G);return{type:r,sealed:oe,iv:te,senderPublicKey:U}}const u=o+sc,p=e.slice(o,u),D=e.slice(u);return{type:r,sealed:D,iv:p}}function cg(s,e){const r=wo(s);return mh({type:Cs(r.type),senderPublicKey:typeof r.senderPublicKey<"u"?_r(r.senderPublicKey,Fr):void 0,receiverPublicKey:e==null?void 0:e.receiverPublicKey})}function mh(s){const e=(s==null?void 0:s.type)||yh;if(e===Pi){if(typeof(s==null?void 0:s.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(s==null?void 0:s.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:e,senderPublicKey:s==null?void 0:s.senderPublicKey,receiverPublicKey:s==null?void 0:s.receiverPublicKey}}function _h(s){return s.type===Pi&&typeof s.senderPublicKey=="string"&&typeof s.receiverPublicKey=="string"}var ug=Object.defineProperty,wh=Object.getOwnPropertySymbols,hg=Object.prototype.hasOwnProperty,lg=Object.prototype.propertyIsEnumerable,bh=(s,e,r)=>e in s?ug(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r,Eh=(s,e)=>{for(var r in e||(e={}))hg.call(e,r)&&bh(s,r,e[r]);if(wh)for(var r of wh(e))lg.call(e,r)&&bh(s,r,e[r]);return s};const fg="ReactNative",$r={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},cc=" ",TS=":",dg="/",Dh=2,NS=1e3,pg="js";function uc(){return typeof Yi<"u"&&typeof Yi.versions<"u"&&typeof Yi.versions.node<"u"}function Xi(){return!(0,wr.getDocument)()&&!!(0,wr.getNavigator)()&&navigator.product===fg}function Zi(){return!uc()&&!!(0,wr.getNavigator)()&&!!(0,wr.getDocument)()}function es(){return Xi()?$r.reactNative:uc()?$r.node:Zi()?$r.browser:$r.unknown}function gg(){var s;try{return Xi()&&typeof C.g<"u"&&typeof(C.g==null?void 0:C.g.Application)<"u"?(s=C.g.Application)==null?void 0:s.applicationId:void 0}catch{return}}function yg(s,e){let r=Qr.parse(s);return r=Eh(Eh({},r),e),s=Qr.stringify(r),s}function vg(){return(0,zr.D)()||{name:"",description:"",url:"",icons:[""]}}function FS(s,e){var r;const o=es(),u={protocol:s,version:e,env:o};return o==="browser"&&(u.host=((r=he())==null?void 0:r.host)||"unknown"),u}function mg(){if(es()===$r.reactNative&&typeof C.g<"u"&&typeof(C.g==null?void 0:C.g.Platform)<"u"){const{OS:r,Version:o}=C.g.Platform;return[r,o].join("-")}const s=it();if(s===null)return"unknown";const e=s.os?s.os.replace(" ","").toLowerCase():"unknown";return s.type==="browser"?[e,s.name,s.version].join("-"):[e,s.version].join("-")}function _g(){var s;const e=es();return e===$r.browser?[e,((s=(0,wr.getLocation)())==null?void 0:s.host)||"unknown"].join(":"):e}function wg(s,e,r){const o=mg(),u=_g();return[[s,e].join("-"),[pg,r].join("-"),o,u].join("/")}function bg({protocol:s,version:e,relayUrl:r,sdkVersion:o,auth:u,projectId:p,useOnCloseEvent:D,bundleId:F}){const G=r.split("?"),U=wg(s,e,o),te={auth:u,ua:U,projectId:p,useOnCloseEvent:D||void 0,origin:F||void 0},oe=yg(G[1]||"",te);return G[0]+"?"+oe}function US(s){let e=(s.match(/^[^:]+(?=:\/\/)/gi)||[])[0];const r=typeof e<"u"?s.split("://")[1]:s;return e=e==="wss"?"https":"http",[e,r].join("://")}function jS(s,e,r){if(!s[e]||typeof s[e]!==r)throw new Error(`Missing or invalid "${e}" param`)}function Eg(s,e=Dh){return Dg(s.split(dg),e)}function LS(s){return Eg(s).join(cc)}function Ci(s,e){return s.filter(r=>e.includes(r)).length===s.length}function Dg(s,e=Dh){return s.slice(Math.max(s.length-e,0))}function Sh(s){return Object.fromEntries(s.entries())}function Ih(s){return new Map(Object.entries(s))}function MS(s,e){const r={};return Object.keys(s).forEach(o=>{r[o]=e(s[o])}),r}const BS=s=>s;function Sg(s){return s.trim().replace(/^\w/,e=>e.toUpperCase())}function zS(s){return s.split(cc).map(e=>Sg(e)).join(cc)}function ts(s=Le.FIVE_MINUTES,e){const r=(0,Le.toMiliseconds)(s||Le.FIVE_MINUTES);let o,u,p;return{resolve:D=>{p&&o&&(clearTimeout(p),o(D))},reject:D=>{p&&u&&(clearTimeout(p),u(D))},done:()=>new Promise((D,F)=>{p=setTimeout(()=>{F(new Error(e))},r),o=D,u=F})}}function As(s,e,r){return new Promise(async(o,u)=>{const p=setTimeout(()=>u(new Error(r)),e);try{const D=await s;o(D)}catch(D){u(D)}clearTimeout(p)})}function xh(s,e){if(typeof e=="string"&&e.startsWith(`${s}:`))return e;if(s.toLowerCase()==="topic"){if(typeof e!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${e}`}else if(s.toLowerCase()==="id"){if(typeof e!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${e}`}throw new Error(`Unknown expirer target type: ${s}`)}function Ig(s){return xh("topic",s)}function xg(s){return xh("id",s)}function Oh(s){const[e,r]=s.split(":"),o={id:void 0,topic:void 0};if(e==="topic"&&typeof r=="string")o.topic=r;else if(e==="id"&&Number.isInteger(Number(r)))o.id=Number(r);else throw new Error(`Invalid target, expected id:number or topic:string, got ${e}:${r}`);return o}function Xr(s,e){return(0,Le.fromMiliseconds)((e||Date.now())+(0,Le.toMiliseconds)(s))}function hi(s){return Date.now()>=(0,Le.toMiliseconds)(s)}function sr(s,e){return`${s}${e?`:${e}`:""}`}function Nn(s=[],e=[]){return[...new Set([...s,...e])]}async function Og({id:s,topic:e,wcDeepLink:r}){try{if(!r)return;const o=typeof r=="string"?JSON.parse(r):r;let u=o==null?void 0:o.href;if(typeof u!="string")return;u.endsWith("/")&&(u=u.slice(0,-1));const p=`${u}/wc?requestId=${s}&sessionTopic=${e}`,D=es();D===$r.browser?p.startsWith("https://")?window.open(p,"_blank","noreferrer noopener"):window.open(p,"_self","noreferrer noopener"):D===$r.reactNative&&typeof(C.g==null?void 0:C.g.Linking)<"u"&&await C.g.Linking.openURL(p)}catch(o){console.error(o)}}async function Pg(s,e){try{return await s.getItem(e)||(Zi()?localStorage.getItem(e):void 0)}catch(r){console.error(r)}}const Cg="irn";function hc(s){return(s==null?void 0:s.relay)||{protocol:Cg}}function bo(s){const e=Hn[s];if(typeof e>"u")throw new Error(`Relay Protocol not supported: ${s}`);return e}var Ag=Object.defineProperty,Rg=Object.defineProperties,Tg=Object.getOwnPropertyDescriptors,Ph=Object.getOwnPropertySymbols,Ng=Object.prototype.hasOwnProperty,Fg=Object.prototype.propertyIsEnumerable,Ch=(s,e,r)=>e in s?Ag(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r,Ug=(s,e)=>{for(var r in e||(e={}))Ng.call(e,r)&&Ch(s,r,e[r]);if(Ph)for(var r of Ph(e))Fg.call(e,r)&&Ch(s,r,e[r]);return s},jg=(s,e)=>Rg(s,Tg(e));function Lg(s,e="-"){const r={},o="relay"+e;return Object.keys(s).forEach(u=>{if(u.startsWith(o)){const p=u.replace(o,""),D=s[u];r[p]=D}}),r}function Ah(s){s=s.includes("wc://")?s.replace("wc://",""):s,s=s.includes("wc:")?s.replace("wc:",""):s;const e=s.indexOf(":"),r=s.indexOf("?")!==-1?s.indexOf("?"):void 0,o=s.substring(0,e),u=s.substring(e+1,r).split("@"),p=typeof r<"u"?s.substring(r):"",D=Qr.parse(p);return{protocol:o,topic:Mg(u[0]),version:parseInt(u[1],10),symKey:D.symKey,relay:Lg(D),expiryTimestamp:D.expiryTimestamp?parseInt(D.expiryTimestamp,10):void 0}}function Mg(s){return s.startsWith("//")?s.substring(2):s}function Bg(s,e="-"){const r="relay",o={};return Object.keys(s).forEach(u=>{const p=r+e+u;s[u]&&(o[p]=s[u])}),o}function zg(s){return`${s.protocol}:${s.topic}@${s.version}?`+Qr.stringify(jg(Ug({symKey:s.symKey},Bg(s.relay)),{expiryTimestamp:s.expiryTimestamp}))}var $g=Object.defineProperty,Hg=Object.defineProperties,Kg=Object.getOwnPropertyDescriptors,Rh=Object.getOwnPropertySymbols,Vg=Object.prototype.hasOwnProperty,qg=Object.prototype.propertyIsEnumerable,Th=(s,e,r)=>e in s?$g(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r,Wg=(s,e)=>{for(var r in e||(e={}))Vg.call(e,r)&&Th(s,r,e[r]);if(Rh)for(var r of Rh(e))qg.call(e,r)&&Th(s,r,e[r]);return s},Gg=(s,e)=>Hg(s,Kg(e));function rs(s){const e=[];return s.forEach(r=>{const[o,u]=r.split(":");e.push(`${o}:${u}`)}),e}function kg(s){const e=[];return Object.values(s).forEach(r=>{e.push(...rs(r.accounts))}),e}function Jg(s,e){const r=[];return Object.values(s).forEach(o=>{rs(o.accounts).includes(e)&&r.push(...o.methods)}),r}function Yg(s,e){const r=[];return Object.values(s).forEach(o=>{rs(o.accounts).includes(e)&&r.push(...o.events)}),r}function $S(s,e){const r=So(s,e);if(r)throw new Error(r.message);const o={};for(const[u,p]of Object.entries(s))o[u]={methods:p.methods,events:p.events,chains:p.accounts.map(D=>`${D.split(":")[0]}:${D.split(":")[1]}`)};return o}function HS(s){const{proposal:{requiredNamespaces:e,optionalNamespaces:r={}},supportedNamespaces:o}=s,u=Nh(e),p=Nh(r),D={};Object.keys(o).forEach(U=>{const te=o[U].chains,oe=o[U].methods,_e=o[U].events,ze=o[U].accounts;te.forEach(ve=>{if(!ze.some(Me=>Me.includes(ve)))throw new Error(`No accounts provided for chain ${ve} in namespace ${U}`)}),D[U]={chains:te,methods:oe,events:_e,accounts:ze}});const F=fc(e,D,"approve()");if(F)throw new Error(F.message);const G={};return!Object.keys(e).length&&!Object.keys(r).length?D:(Object.keys(u).forEach(U=>{const te=o[U].chains.filter(ve=>{var Me,Ge;return(Ge=(Me=u[U])==null?void 0:Me.chains)==null?void 0:Ge.includes(ve)}),oe=o[U].methods.filter(ve=>{var Me,Ge;return(Ge=(Me=u[U])==null?void 0:Me.methods)==null?void 0:Ge.includes(ve)}),_e=o[U].events.filter(ve=>{var Me,Ge;return(Ge=(Me=u[U])==null?void 0:Me.events)==null?void 0:Ge.includes(ve)}),ze=te.map(ve=>o[U].accounts.filter(Me=>Me.includes(`${ve}:`))).flat();G[U]={chains:te,methods:oe,events:_e,accounts:ze}}),Object.keys(p).forEach(U=>{var te,oe,_e,ze,ve,Me;if(!o[U])return;const Ge=(oe=(te=p[U])==null?void 0:te.chains)==null?void 0:oe.filter(Ze=>o[U].chains.includes(Ze)),Xe=o[U].methods.filter(Ze=>{var Je,Ct;return(Ct=(Je=p[U])==null?void 0:Je.methods)==null?void 0:Ct.includes(Ze)}),Rt=o[U].events.filter(Ze=>{var Je,Ct;return(Ct=(Je=p[U])==null?void 0:Je.events)==null?void 0:Ct.includes(Ze)}),ct=Ge==null?void 0:Ge.map(Ze=>o[U].accounts.filter(Je=>Je.includes(`${Ze}:`))).flat();G[U]={chains:Nn((_e=G[U])==null?void 0:_e.chains,Ge),methods:Nn((ze=G[U])==null?void 0:ze.methods,Xe),events:Nn((ve=G[U])==null?void 0:ve.events,Rt),accounts:Nn((Me=G[U])==null?void 0:Me.accounts,ct)}}),G)}function Eo(s){return s.includes(":")}function ns(s){return Eo(s)?s.split(":")[0]:s}function Nh(s){var e,r,o;const u={};if(!is(s))return u;for(const[p,D]of Object.entries(s)){const F=Eo(p)?[p]:D.chains,G=D.methods||[],U=D.events||[],te=ns(p);u[te]=Gg(Wg({},u[te]),{chains:Nn(F,(e=u[te])==null?void 0:e.chains),methods:Nn(G,(r=u[te])==null?void 0:r.methods),events:Nn(U,(o=u[te])==null?void 0:o.events)})}return u}const Qg={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},Xg={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function Te(s,e){const{message:r,code:o}=Xg[s];return{message:e?`${r} ${e}`:r,code:o}}function Wt(s,e){const{message:r,code:o}=Qg[s];return{message:e?`${r} ${e}`:r,code:o}}function Fn(s,e){return Array.isArray(s)?typeof e<"u"&&s.length?s.every(e):!0:!1}function is(s){return Object.getPrototypeOf(s)===Object.prototype&&Object.keys(s).length}function Ur(s){return typeof s>"u"}function br(s,e){return e&&Ur(s)?!0:typeof s=="string"&&!!s.trim().length}function lc(s,e){return e&&Ur(s)?!0:typeof s=="number"&&!isNaN(s)}function Zg(s,e){const{requiredNamespaces:r}=e,o=Object.keys(s.namespaces),u=Object.keys(r);let p=!0;return Ci(u,o)?(o.forEach(D=>{const{accounts:F,methods:G,events:U}=s.namespaces[D],te=rs(F),oe=r[D];(!Ci(tc(D,oe),te)||!Ci(oe.methods,G)||!Ci(oe.events,U))&&(p=!1)}),p):!1}function Do(s){return br(s,!1)&&s.includes(":")?s.split(":").length===2:!1}function e0(s){if(br(s,!1)&&s.includes(":")){const e=s.split(":");if(e.length===3){const r=e[0]+":"+e[1];return!!e[2]&&Do(r)}}return!1}function t0(s){if(br(s,!1))try{return typeof new URL(s)<"u"}catch{return!1}return!1}function r0(s){var e;return(e=s==null?void 0:s.proposer)==null?void 0:e.publicKey}function n0(s){return s==null?void 0:s.topic}function i0(s,e){let r=null;return br(s==null?void 0:s.publicKey,!1)||(r=Te("MISSING_OR_INVALID",`${e} controller public key should be a string`)),r}function Fh(s){let e=!0;return Fn(s)?s.length&&(e=s.every(r=>br(r,!1))):e=!1,e}function s0(s,e,r){let o=null;return Fn(e)&&e.length?e.forEach(u=>{o||Do(u)||(o=Wt("UNSUPPORTED_CHAINS",`${r}, chain ${u} should be a string and conform to "namespace:chainId" format`))}):Do(s)||(o=Wt("UNSUPPORTED_CHAINS",`${r}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),o}function o0(s,e,r){let o=null;return Object.entries(s).forEach(([u,p])=>{if(o)return;const D=s0(u,tc(u,p),`${e} ${r}`);D&&(o=D)}),o}function a0(s,e){let r=null;return Fn(s)?s.forEach(o=>{r||e0(o)||(r=Wt("UNSUPPORTED_ACCOUNTS",`${e}, account ${o} should be a string and conform to "namespace:chainId:address" format`))}):r=Wt("UNSUPPORTED_ACCOUNTS",`${e}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),r}function c0(s,e){let r=null;return Object.values(s).forEach(o=>{if(r)return;const u=a0(o==null?void 0:o.accounts,`${e} namespace`);u&&(r=u)}),r}function u0(s,e){let r=null;return Fh(s==null?void 0:s.methods)?Fh(s==null?void 0:s.events)||(r=Wt("UNSUPPORTED_EVENTS",`${e}, events should be an array of strings or empty array for no events`)):r=Wt("UNSUPPORTED_METHODS",`${e}, methods should be an array of strings or empty array for no methods`),r}function Uh(s,e){let r=null;return Object.values(s).forEach(o=>{if(r)return;const u=u0(o,`${e}, namespace`);u&&(r=u)}),r}function h0(s,e,r){let o=null;if(s&&is(s)){const u=Uh(s,e);u&&(o=u);const p=o0(s,e,r);p&&(o=p)}else o=Te("MISSING_OR_INVALID",`${e}, ${r} should be an object with data`);return o}function So(s,e){let r=null;if(s&&is(s)){const o=Uh(s,e);o&&(r=o);const u=c0(s,e);u&&(r=u)}else r=Te("MISSING_OR_INVALID",`${e}, namespaces should be an object with data`);return r}function jh(s){return br(s.protocol,!0)}function l0(s,e){let r=!1;return e&&!s?r=!0:s&&Fn(s)&&s.length&&s.forEach(o=>{r=jh(o)}),r}function f0(s){return typeof s=="number"}function Hr(s){return typeof s<"u"&&typeof s!==null}function d0(s){return!(!s||typeof s!="object"||!s.code||!lc(s.code,!1)||!s.message||!br(s.message,!1))}function p0(s){return!(Ur(s)||!br(s.method,!1))}function g0(s){return!(Ur(s)||Ur(s.result)&&Ur(s.error)||!lc(s.id,!1)||!br(s.jsonrpc,!1))}function y0(s){return!(Ur(s)||!br(s.name,!1))}function Lh(s,e){return!(!Do(e)||!kg(s).includes(e))}function v0(s,e,r){return br(r,!1)?Jg(s,e).includes(r):!1}function m0(s,e,r){return br(r,!1)?Yg(s,e).includes(r):!1}function fc(s,e,r){let o=null;const u=_0(s),p=w0(e),D=Object.keys(u),F=Object.keys(p),G=Mh(Object.keys(s)),U=Mh(Object.keys(e)),te=G.filter(oe=>!U.includes(oe));return te.length&&(o=Te("NON_CONFORMING_NAMESPACES",`${r} namespaces keys don't satisfy requiredNamespaces.
      Required: ${te.toString()}
      Received: ${Object.keys(e).toString()}`)),Ci(D,F)||(o=Te("NON_CONFORMING_NAMESPACES",`${r} namespaces chains don't satisfy required namespaces.
      Required: ${D.toString()}
      Approved: ${F.toString()}`)),Object.keys(e).forEach(oe=>{if(!oe.includes(":")||o)return;const _e=rs(e[oe].accounts);_e.includes(oe)||(o=Te("NON_CONFORMING_NAMESPACES",`${r} namespaces accounts don't satisfy namespace accounts for ${oe}
        Required: ${oe}
        Approved: ${_e.toString()}`))}),D.forEach(oe=>{o||(Ci(u[oe].methods,p[oe].methods)?Ci(u[oe].events,p[oe].events)||(o=Te("NON_CONFORMING_NAMESPACES",`${r} namespaces events don't satisfy namespace events for ${oe}`)):o=Te("NON_CONFORMING_NAMESPACES",`${r} namespaces methods don't satisfy namespace methods for ${oe}`))}),o}function _0(s){const e={};return Object.keys(s).forEach(r=>{var o;r.includes(":")?e[r]=s[r]:(o=s[r].chains)==null||o.forEach(u=>{e[u]={methods:s[r].methods,events:s[r].events}})}),e}function Mh(s){return[...new Set(s.map(e=>e.includes(":")?e.split(":")[0]:e))]}function w0(s){const e={};return Object.keys(s).forEach(r=>{if(r.includes(":"))e[r]=s[r];else{const o=rs(s[r].accounts);o==null||o.forEach(u=>{e[u]={accounts:s[r].accounts.filter(p=>p.includes(`${u}:`)),methods:s[r].methods,events:s[r].events}})}}),e}function b0(s,e){return lc(s,!1)&&s<=e.max&&s>=e.min}function Bh(){const s=es();return new Promise(e=>{switch(s){case $r.browser:e(E0());break;case $r.reactNative:e(D0());break;case $r.node:e(S0());break;default:e(!0)}})}function E0(){return Zi()&&(navigator==null?void 0:navigator.onLine)}async function D0(){if(Xi()&&typeof C.g<"u"&&C.g!=null&&C.g.NetInfo){const s=await(C.g==null?void 0:C.g.NetInfo.fetch());return s==null?void 0:s.isConnected}return!0}function S0(){return!0}function I0(s){switch(es()){case $r.browser:x0(s);break;case $r.reactNative:O0(s);break;case $r.node:break}}function x0(s){!Xi()&&Zi()&&(window.addEventListener("online",()=>s(!0)),window.addEventListener("offline",()=>s(!1)))}function O0(s){var e;Xi()&&typeof C.g<"u"&&C.g!=null&&C.g.NetInfo&&((e=C.g)==null||e.NetInfo.addEventListener(r=>s(r==null?void 0:r.isConnected)))}const dc={};class Io{static get(e){return dc[e]}static set(e,r){dc[e]=r}static delete(e){delete dc[e]}}const P0=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,C0=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,A0=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function R0(s,e){if(s==="__proto__"||s==="constructor"&&e&&typeof e=="object"&&"prototype"in e){T0(s);return}return e}function T0(s){console.warn(`[destr] Dropping "${s}" key to prevent prototype pollution.`)}function Rs(s,e={}){if(typeof s!="string")return s;const r=s.trim();if(s[0]==='"'&&s.endsWith('"')&&!s.includes("\\"))return r.slice(1,-1);if(r.length<=9){const o=r.toLowerCase();if(o==="true")return!0;if(o==="false")return!1;if(o==="undefined")return;if(o==="null")return null;if(o==="nan")return Number.NaN;if(o==="infinity")return Number.POSITIVE_INFINITY;if(o==="-infinity")return Number.NEGATIVE_INFINITY}if(!A0.test(s)){if(e.strict)throw new SyntaxError("[destr] Invalid JSON");return s}try{if(P0.test(s)||C0.test(s)){if(e.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(s,R0)}return JSON.parse(s)}catch(o){if(e.strict)throw o;return s}}function KS(s,e={}){return Rs(s,{...e,strict:!0})}var pc=C(48764).Buffer;function N0(s){return!s||typeof s.then!="function"?Promise.resolve(s):s}function Er(s,...e){try{return N0(s(...e))}catch(r){return Promise.reject(r)}}function F0(s){const e=typeof s;return s===null||e!=="object"&&e!=="function"}function U0(s){const e=Object.getPrototypeOf(s);return!e||e.isPrototypeOf(Object)}function xo(s){if(F0(s))return String(s);if(U0(s)||Array.isArray(s))return JSON.stringify(s);if(typeof s.toJSON=="function")return xo(s.toJSON());throw new Error("[unstorage] Cannot stringify value!")}function zh(){if(typeof pc===void 0)throw new TypeError("[unstorage] Buffer is not supported!")}const gc="base64:";function j0(s){if(typeof s=="string")return s;zh();const e=pc.from(s).toString("base64");return gc+e}function L0(s){return typeof s!="string"||!s.startsWith(gc)?s:(zh(),pc.from(s.slice(gc.length),"base64"))}const M0=null;function VS(s,e){if(e=Ts(e),!e)return s;const r={...s};for(const o of M0)r[o]=(u="",...p)=>s[o](e+u,...p);return r.getKeys=(o="",...u)=>s.getKeys(e+o,...u).then(p=>p.map(D=>D.slice(e.length))),r}function Kr(s){return s?s.split("?")[0].replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,""):""}function B0(...s){return Kr(s.join(":"))}function Ts(s){return s=Kr(s),s?s+":":""}function qS(s){return s}const z0="memory",$0=()=>{const s=new Map;return{name:z0,options:{},hasItem(e){return s.has(e)},getItem(e){return s.get(e)??null},getItemRaw(e){return s.get(e)??null},setItem(e,r){s.set(e,r)},setItemRaw(e,r){s.set(e,r)},removeItem(e){s.delete(e)},getKeys(){return Array.from(s.keys())},clear(){s.clear()},dispose(){s.clear()}}};function H0(s={}){const e={mounts:{"":s.driver||$0()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},r=U=>{for(const te of e.mountpoints)if(U.startsWith(te))return{base:te,relativeKey:U.slice(te.length),driver:e.mounts[te]};return{base:"",relativeKey:U,driver:e.mounts[""]}},o=(U,te)=>e.mountpoints.filter(oe=>oe.startsWith(U)||te&&U.startsWith(oe)).map(oe=>({relativeBase:U.length>oe.length?U.slice(oe.length):void 0,mountpoint:oe,driver:e.mounts[oe]})),u=(U,te)=>{if(e.watching){te=Kr(te);for(const oe of e.watchListeners)oe(U,te)}},p=async()=>{if(!e.watching){e.watching=!0;for(const U in e.mounts)e.unwatch[U]=await $h(e.mounts[U],u,U)}},D=async()=>{if(e.watching){for(const U in e.unwatch)await e.unwatch[U]();e.unwatch={},e.watching=!1}},F=(U,te,oe)=>{const _e=new Map,ze=ve=>{let Me=_e.get(ve.base);return Me||(Me={driver:ve.driver,base:ve.base,items:[]},_e.set(ve.base,Me)),Me};for(const ve of U){const Me=typeof ve=="string",Ge=Kr(Me?ve:ve.key),Xe=Me?void 0:ve.value,Rt=Me||!ve.options?te:{...te,...ve.options},ct=r(Ge);ze(ct).items.push({key:Ge,value:Xe,relativeKey:ct.relativeKey,options:Rt})}return Promise.all([..._e.values()].map(ve=>oe(ve))).then(ve=>ve.flat())},G={hasItem(U,te={}){U=Kr(U);const{relativeKey:oe,driver:_e}=r(U);return Er(_e.hasItem,oe,te)},getItem(U,te={}){U=Kr(U);const{relativeKey:oe,driver:_e}=r(U);return Er(_e.getItem,oe,te).then(ze=>Rs(ze))},getItems(U,te){return F(U,te,oe=>oe.driver.getItems?Er(oe.driver.getItems,oe.items.map(_e=>({key:_e.relativeKey,options:_e.options})),te).then(_e=>_e.map(ze=>({key:B0(oe.base,ze.key),value:Rs(ze.value)}))):Promise.all(oe.items.map(_e=>Er(oe.driver.getItem,_e.relativeKey,_e.options).then(ze=>({key:_e.key,value:Rs(ze)})))))},getItemRaw(U,te={}){U=Kr(U);const{relativeKey:oe,driver:_e}=r(U);return _e.getItemRaw?Er(_e.getItemRaw,oe,te):Er(_e.getItem,oe,te).then(ze=>L0(ze))},async setItem(U,te,oe={}){if(te===void 0)return G.removeItem(U);U=Kr(U);const{relativeKey:_e,driver:ze}=r(U);ze.setItem&&(await Er(ze.setItem,_e,xo(te),oe),ze.watch||u("update",U))},async setItems(U,te){await F(U,te,async oe=>{oe.driver.setItems&&await Er(oe.driver.setItems,oe.items.map(_e=>({key:_e.relativeKey,value:xo(_e.value),options:_e.options})),te),oe.driver.setItem&&await Promise.all(oe.items.map(_e=>Er(oe.driver.setItem,_e.relativeKey,xo(_e.value),_e.options)))})},async setItemRaw(U,te,oe={}){if(te===void 0)return G.removeItem(U,oe);U=Kr(U);const{relativeKey:_e,driver:ze}=r(U);if(ze.setItemRaw)await Er(ze.setItemRaw,_e,te,oe);else if(ze.setItem)await Er(ze.setItem,_e,j0(te),oe);else return;ze.watch||u("update",U)},async removeItem(U,te={}){typeof te=="boolean"&&(te={removeMeta:te}),U=Kr(U);const{relativeKey:oe,driver:_e}=r(U);_e.removeItem&&(await Er(_e.removeItem,oe,te),(te.removeMeta||te.removeMata)&&await Er(_e.removeItem,oe+"$",te),_e.watch||u("remove",U))},async getMeta(U,te={}){typeof te=="boolean"&&(te={nativeOnly:te}),U=Kr(U);const{relativeKey:oe,driver:_e}=r(U),ze=Object.create(null);if(_e.getMeta&&Object.assign(ze,await Er(_e.getMeta,oe,te)),!te.nativeOnly){const ve=await Er(_e.getItem,oe+"$",te).then(Me=>Rs(Me));ve&&typeof ve=="object"&&(typeof ve.atime=="string"&&(ve.atime=new Date(ve.atime)),typeof ve.mtime=="string"&&(ve.mtime=new Date(ve.mtime)),Object.assign(ze,ve))}return ze},setMeta(U,te,oe={}){return this.setItem(U+"$",te,oe)},removeMeta(U,te={}){return this.removeItem(U+"$",te)},async getKeys(U,te={}){U=Ts(U);const oe=o(U,!0);let _e=[];const ze=[];for(const ve of oe){const Ge=(await Er(ve.driver.getKeys,ve.relativeBase,te)).map(Xe=>ve.mountpoint+Kr(Xe)).filter(Xe=>!_e.some(Rt=>Xe.startsWith(Rt)));ze.push(...Ge),_e=[ve.mountpoint,..._e.filter(Xe=>!Xe.startsWith(ve.mountpoint))]}return U?ze.filter(ve=>ve.startsWith(U)&&!ve.endsWith("$")):ze.filter(ve=>!ve.endsWith("$"))},async clear(U,te={}){U=Ts(U),await Promise.all(o(U,!1).map(async oe=>{if(oe.driver.clear)return Er(oe.driver.clear,oe.relativeBase,te);if(oe.driver.removeItem){const _e=await oe.driver.getKeys(oe.relativeBase||"",te);return Promise.all(_e.map(ze=>oe.driver.removeItem(ze,te)))}}))},async dispose(){await Promise.all(Object.values(e.mounts).map(U=>Hh(U)))},async watch(U){return await p(),e.watchListeners.push(U),async()=>{e.watchListeners=e.watchListeners.filter(te=>te!==U),e.watchListeners.length===0&&await D()}},async unwatch(){e.watchListeners=[],await D()},mount(U,te){if(U=Ts(U),U&&e.mounts[U])throw new Error(`already mounted at ${U}`);return U&&(e.mountpoints.push(U),e.mountpoints.sort((oe,_e)=>_e.length-oe.length)),e.mounts[U]=te,e.watching&&Promise.resolve($h(te,u,U)).then(oe=>{e.unwatch[U]=oe}).catch(console.error),G},async unmount(U,te=!0){U=Ts(U),!(!U||!e.mounts[U])&&(e.watching&&U in e.unwatch&&(e.unwatch[U](),delete e.unwatch[U]),te&&await Hh(e.mounts[U]),e.mountpoints=e.mountpoints.filter(oe=>oe!==U),delete e.mounts[U])},getMount(U=""){U=Kr(U)+":";const te=r(U);return{driver:te.driver,base:te.base}},getMounts(U="",te={}){return U=Kr(U),o(U,te.parents).map(_e=>({driver:_e.driver,base:_e.mountpoint}))}};return G}async function WS(s,e){e=normalizeBaseKey(e);const r=await s.getKeys(e),o={};return await Promise.all(r.map(async u=>{o[u.slice(e.length)]=await s.getItem(u)})),o}async function GS(s,e,r=""){r=normalizeBaseKey(r),await Promise.all(Object.entries(e).map(o=>s.setItem(r+o[0],o[1])))}function $h(s,e,r){return s.watch?s.watch((o,u)=>e(o,r+u)):()=>{}}async function Hh(s){typeof s.dispose=="function"&&await Er(s.dispose)}const kS={azureAppConfiguration:"unstorage/drivers/azure-app-configuration",azureCosmos:"unstorage/drivers/azure-cosmos",azureKeyVault:"unstorage/drivers/azure-key-vault",azureStorageBlob:"unstorage/drivers/azure-storage-blob",azureStorageTable:"unstorage/drivers/azure-storage-table",cloudflareKVBinding:"unstorage/drivers/cloudflare-kv-binding",cloudflareKVHTTP:"unstorage/drivers/cloudflare-kv-http",cloudflareR2Binding:"unstorage/drivers/cloudflare-r2-binding",fs:"unstorage/drivers/fs",fsLite:"unstorage/drivers/fs-lite",github:"unstorage/drivers/github",http:"unstorage/drivers/http",indexedb:"unstorage/drivers/indexedb",localStorage:"unstorage/drivers/localstorage",lruCache:"unstorage/drivers/lru-cache",memory:"unstorage/drivers/memory",mongodb:"unstorage/drivers/mongodb",netlifyBlobs:"unstorage/drivers/netlify-blobs",overlay:"unstorage/drivers/overlay",planetscale:"unstorage/drivers/planetscale",redis:"unstorage/drivers/redis",sessionStorage:"unstorage/drivers/session-storage",vercelKV:"unstorage/drivers/vercel-kv","cloudflare-kv-binding":"unstorage/drivers/cloudflare-kv-binding","cloudflare-kv-http":"unstorage/drivers/cloudflare-kv-http"};function Vr(s){return new Promise((e,r)=>{s.oncomplete=s.onsuccess=()=>e(s.result),s.onabort=s.onerror=()=>r(s.error)})}function Kh(s,e){const r=indexedDB.open(s);r.onupgradeneeded=()=>r.result.createObjectStore(e);const o=Vr(r);return(u,p)=>o.then(D=>p(D.transaction(e,u).objectStore(e)))}let yc;function bn(){return yc||(yc=Kh("keyval-store","keyval")),yc}function Vh(s,e=bn()){return e("readonly",r=>Vr(r.get(s)))}function K0(s,e,r=bn()){return r("readwrite",o=>(o.put(e,s),Vr(o.transaction)))}function JS(s,e=bn()){return e("readwrite",r=>(s.forEach(o=>r.put(o[1],o[0])),Vr(r.transaction)))}function YS(s,e=bn()){return e("readonly",r=>Promise.all(s.map(o=>Vr(r.get(o)))))}function QS(s,e,r=bn()){return r("readwrite",o=>new Promise((u,p)=>{o.get(s).onsuccess=function(){try{o.put(e(this.result),s),u(Vr(o.transaction))}catch(D){p(D)}}}))}function V0(s,e=bn()){return e("readwrite",r=>(r.delete(s),Vr(r.transaction)))}function XS(s,e=bn()){return e("readwrite",r=>(s.forEach(o=>r.delete(o)),Vr(r.transaction)))}function q0(s=bn()){return s("readwrite",e=>(e.clear(),Vr(e.transaction)))}function vc(s,e){return s.openCursor().onsuccess=function(){this.result&&(e(this.result),this.result.continue())},Vr(s.transaction)}function W0(s=bn()){return s("readonly",e=>{if(e.getAllKeys)return Vr(e.getAllKeys());const r=[];return vc(e,o=>r.push(o.key)).then(()=>r)})}function ZS(s=bn()){return s("readonly",e=>{if(e.getAll)return Vr(e.getAll());const r=[];return vc(e,o=>r.push(o.value)).then(()=>r)})}function eI(s=bn()){return s("readonly",e=>{if(e.getAll&&e.getAllKeys)return Promise.all([Vr(e.getAllKeys()),Vr(e.getAll())]).then(([o,u])=>o.map((p,D)=>[p,u[D]]));const r=[];return s("readonly",o=>vc(o,u=>r.push([u.key,u.value])).then(()=>r))})}const G0=s=>JSON.stringify(s,(e,r)=>typeof r=="bigint"?r.toString()+"n":r),k0=s=>{const e=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=s.replace(e,'$1"$2n"$3');return JSON.parse(r,(o,u)=>typeof u=="string"&&u.match(/^\d+n$/)?BigInt(u.substring(0,u.length-1)):u)};function Ns(s){if(typeof s!="string")throw new Error(`Cannot safe json parse value of type ${typeof s}`);try{return k0(s)}catch{return s}}function Ai(s){return typeof s=="string"?s:G0(s)||""}function tI(s){return s}const J0="idb-keyval";var Y0=(s={})=>{const e=s.base&&s.base.length>0?`${s.base}:`:"",r=u=>e+u;let o;return s.dbName&&s.storeName&&(o=Kh(s.dbName,s.storeName)),{name:J0,options:s,async hasItem(u){return!(typeof await Vh(r(u),o)>"u")},async getItem(u){return await Vh(r(u),o)??null},setItem(u,p){return K0(r(u),p,o)},removeItem(u){return V0(r(u),o)},getKeys(){return W0(o)},clear(){return q0(o)}}};const Q0="WALLET_CONNECT_V2_INDEXED_DB",X0="keyvaluestorage";class Z0{constructor(){this.indexedDb=H0({driver:Y0({dbName:Q0,storeName:X0})})}async getKeys(){return this.indexedDb.getKeys()}async getEntries(){return(await this.indexedDb.getItems(await this.indexedDb.getKeys())).map(e=>[e.key,e.value])}async getItem(e){const r=await this.indexedDb.getItem(e);if(r!==null)return r}async setItem(e,r){await this.indexedDb.setItem(e,Ai(r))}async removeItem(e){await this.indexedDb.removeItem(e)}}var mc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof C.g<"u"?C.g:typeof self<"u"?self:{},Oo={exports:{}};(function(){let s;function e(){}s=e,s.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},s.prototype.setItem=function(r,o){this[r]=String(o)},s.prototype.removeItem=function(r){delete this[r]},s.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(o){r[o]=void 0,delete r[o]})},s.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},s.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof mc<"u"&&mc.localStorage?Oo.exports=mc.localStorage:typeof window<"u"&&window.localStorage?Oo.exports=window.localStorage:Oo.exports=new e})();function ey(s){var e;return[s[0],Ns((e=s[1])!=null?e:"")]}class ty{constructor(){this.localStorage=Oo.exports}async getKeys(){return Object.keys(this.localStorage)}async getEntries(){return Object.entries(this.localStorage).map(ey)}async getItem(e){const r=this.localStorage.getItem(e);if(r!==null)return Ns(r)}async setItem(e,r){this.localStorage.setItem(e,Ai(r))}async removeItem(e){this.localStorage.removeItem(e)}}const ry="wc_storage_version",qh=1,ny=async(s,e,r)=>{const o=ry,u=await e.getItem(o);if(u&&u>=qh){r(e);return}const p=await s.getKeys();if(!p.length){r(e);return}const D=[];for(;p.length;){const F=p.shift();if(!F)continue;const G=F.toLowerCase();if(G.includes("wc@")||G.includes("walletconnect")||G.includes("wc_")||G.includes("wallet_connect")){const U=await s.getItem(F);await e.setItem(F,U),D.push(F)}}await e.setItem(o,qh),r(e),iy(s,D)},iy=async(s,e)=>{e.length&&e.forEach(async r=>{await s.removeItem(r)})};class sy{constructor(){this.initialized=!1,this.setInitialized=r=>{this.storage=r,this.initialized=!0};const e=new ty;this.storage=e;try{const r=new Z0;ny(e,r,this.setInitialized)}catch{this.initialized=!0}}async getKeys(){return await this.initialize(),this.storage.getKeys()}async getEntries(){return await this.initialize(),this.storage.getEntries()}async getItem(e){return await this.initialize(),this.storage.getItem(e)}async setItem(e,r){return await this.initialize(),this.storage.setItem(e,r)}async removeItem(e){return await this.initialize(),this.storage.removeItem(e)}async initialize(){this.initialized||await new Promise(e=>{const r=setInterval(()=>{this.initialized&&(clearInterval(r),e())},20)})}}var Fs=C(90772),Dt=C(9107),ss=C(38200);class oy extends ss.q{constructor(e){super(),this.opts=e,this.protocol="wc",this.version=2}}class rI{constructor(e,r,o){this.core=e,this.logger=r}}class ay extends ss.q{constructor(e,r){super(),this.core=e,this.logger=r,this.records=new Map}}class cy{constructor(e,r){this.logger=e,this.core=r}}class uy extends ss.q{constructor(e,r){super(),this.relayer=e,this.logger=r}}class hy extends ss.q{constructor(e){super()}}class ly{constructor(e,r,o,u){this.core=e,this.logger=r,this.name=o}}class nI{constructor(){this.map=new Map}}class fy extends ss.q{constructor(e,r){super(),this.relayer=e,this.logger=r}}class iI{constructor(e,r){this.core=e,this.logger=r}}class dy extends ss.q{constructor(e,r){super(),this.core=e,this.logger=r}}class sI{constructor(e,r){this.logger=e,this.core=r}}class py{constructor(e,r){this.projectId=e,this.logger=r}}class gy{constructor(e,r){this.projectId=e,this.logger=r}}class oI extends null{constructor(){super()}}class yy{constructor(e){this.opts=e,this.protocol="wc",this.version=2}}class aI extends null{constructor(){super()}}class vy{constructor(e){this.client=e}}var Wh=C(31050);const my="EdDSA",_y="JWT",Gh=".",kh="base64url",wy="utf8",by="utf8",Ey=":",Dy="did",Sy="key",Jh="base58btc",Iy="z",xy="K36",cI=32,Oy=32;function Po(s){return safeJsonParse(toString(fromString(s,JWT_ENCODING),JSON_ENCODING))}function Co(s){return _r(Cr(Ai(s),wy),kh)}function Yh(s){const e=Cr(xy,Jh),r=Iy+_r(P([e,s]),Jh);return[Dy,Sy,r].join(Ey)}function uI(s){const[e,r,o]=s.split(DID_DELIMITER);if(e!==DID_PREFIX||r!==DID_METHOD)throw new Error('Issuer must be a DID with method "key"');if(o.slice(0,1)!==MULTICODEC_ED25519_BASE)throw new Error("Issuer must be a key in mulicodec format");const p=fromString(o.slice(1),MULTICODEC_ED25519_ENCODING);if(toString(p.slice(0,2),MULTICODEC_ED25519_ENCODING)!==MULTICODEC_ED25519_HEADER)throw new Error('Issuer must be a public key with type "Ed25519"');const F=p.slice(2);if(F.length!==MULTICODEC_ED25519_LENGTH)throw new Error("Issuer must be a public key with length 32 bytes");return F}function Py(s){return _r(s,kh)}function Cy(s){return fromString(s,JWT_ENCODING)}function Ay(s){return Cr([Co(s.header),Co(s.payload)].join(Gh),by)}function hI(s){const e=toString(s,DATA_ENCODING).split(JWT_DELIMITER),r=Po(e[0]),o=Po(e[1]);return{header:r,payload:o}}function Ry(s){return[Co(s.header),Co(s.payload),Py(s.signature)].join(Gh)}function lI(s){const e=s.split(JWT_DELIMITER),r=Po(e[0]),o=Po(e[1]),u=Cy(e[2]),p=fromString(e.slice(0,2).join(JWT_DELIMITER),DATA_ENCODING);return{header:r,payload:o,signature:u,data:p}}function Qh(s=(0,Ke.randomBytes)(Oy)){return Wh._w(s)}async function Ty(s,e,r,o,u=(0,Le.fromMiliseconds)(Date.now())){const p={alg:my,typ:_y},D=Yh(o.publicKey),F=u+r,G={iss:D,sub:s,aud:e,iat:u,exp:F},U=Ay({header:p,payload:G}),te=Wh.Xx(o.secretKey,U);return Ry({header:p,payload:G,signature:te})}async function fI(s){const{header:e,payload:r,data:o,signature:u}=decodeJWT(s);if(e.alg!==JWT_IRIDIUM_ALG||e.typ!==JWT_IRIDIUM_TYP)throw new Error("JWT must use EdDSA algorithm");const p=decodeIss(r.iss);return ed25519.verify(p,o,u)}var dI=C(43014);const Ny="PARSE_ERROR",Fy="INVALID_REQUEST",Uy="METHOD_NOT_FOUND",jy="INVALID_PARAMS",Xh="INTERNAL_ERROR",_c="SERVER_ERROR",Ly=[-32700,-32600,-32601,-32602,-32603],pI=null,Us={[Ny]:{code:-32700,message:"Parse error"},[Fy]:{code:-32600,message:"Invalid Request"},[Uy]:{code:-32601,message:"Method not found"},[jy]:{code:-32602,message:"Invalid params"},[Xh]:{code:-32603,message:"Internal error"},[_c]:{code:-32e3,message:"Server error"}},Zh=_c;function gI(s){return s<=SERVER_ERROR_CODE_RANGE[0]&&s>=SERVER_ERROR_CODE_RANGE[1]}function el(s){return Ly.includes(s)}function My(s){return typeof s=="number"}function tl(s){return Object.keys(Us).includes(s)?Us[s]:Us[Zh]}function rl(s){const e=Object.values(Us).find(r=>r.code===s);return e||Us[Zh]}function yI(s){if(typeof s.error.code>"u")return{valid:!1,error:"Missing code for JSON-RPC error"};if(typeof s.error.message>"u")return{valid:!1,error:"Missing message for JSON-RPC error"};if(!My(s.error.code))return{valid:!1,error:`Invalid error code type for JSON-RPC: ${s.error.code}`};if(el(s.error.code)){const e=rl(s.error.code);if(e.message!==STANDARD_ERROR_MAP[DEFAULT_ERROR].message&&s.error.message===e.message)return{valid:!1,error:`Invalid error code message for JSON-RPC: ${s.error.code}`}}return{valid:!0}}function nl(s,e,r){return s.message.includes("getaddrinfo ENOTFOUND")||s.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${e}`):s}var By=C(1468);const vI=null;function wc(s=3){const e=Date.now()*Math.pow(10,s),r=Math.floor(Math.random()*Math.pow(10,s));return e+r}function il(s=6){return BigInt(wc(s))}function os(s,e,r){return{id:r||wc(),jsonrpc:"2.0",method:s,params:e}}function Ao(s,e){return{id:s,jsonrpc:"2.0",result:e}}function Ro(s,e,r){return{id:s,jsonrpc:"2.0",error:zy(e,r)}}function zy(s,e){return typeof s>"u"?tl(Xh):(typeof s=="string"&&(s=Object.assign(Object.assign({},tl(_c)),{message:s})),typeof e<"u"&&(s.data=e),el(s.code)&&(s=rl(s.code)),s)}class $y{}class mI extends null{constructor(e){super()}}class Hy extends $y{constructor(){super()}}class Ky extends Hy{constructor(e){super()}}const Vy="^https?:",qy="^wss?:";function Wy(s){const e=s.match(new RegExp(/^\w+:/,"gi"));if(!(!e||!e.length))return e[0]}function sl(s,e){const r=Wy(s);return typeof r>"u"?!1:new RegExp(e).test(r)}function ol(s){return sl(s,Vy)}function al(s){return sl(s,qy)}function Gy(s){return new RegExp("wss?://localhost(:d{2,5})?").test(s)}function cl(s){return typeof s=="object"&&"id"in s&&"jsonrpc"in s&&s.jsonrpc==="2.0"}function bc(s){return cl(s)&&"method"in s}function To(s){return cl(s)&&(Vn(s)||En(s))}function Vn(s){return"result"in s}function En(s){return"error"in s}function _I(s){return"error"in s&&s.valid===!1}class qn extends Ky{constructor(e){super(e),this.events=new fe.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(e),this.connection.connected&&this.registerEventListeners()}async connect(e=this.connection){await this.open(e)}async disconnect(){await this.close()}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async request(e,r){return this.requestStrict(os(e.method,e.params||[],e.id||il().toString()),r)}async requestStrict(e,r){return new Promise(async(o,u)=>{if(!this.connection.connected)try{await this.open()}catch(p){u(p)}this.events.on(`${e.id}`,p=>{En(p)?u(p.error):o(p.result)});try{await this.connection.send(e,r)}catch(p){u(p)}})}setConnection(e=this.connection){return e}onPayload(e){this.events.emit("payload",e),To(e)?this.events.emit(`${e.id}`,e):this.events.emit("message",{type:e.method,data:e.params})}onClose(e){e&&e.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${e.code} ${e.reason?`(${e.reason})`:""}`)),this.events.emit("disconnect")}async open(e=this.connection){this.connection===e&&this.connection.connected||(this.connection.connected&&this.close(),typeof e=="string"&&(await this.connection.open(e),e=this.connection),this.connection=this.setConnection(e),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",e=>this.onPayload(e)),this.connection.on("close",e=>this.onClose(e)),this.connection.on("error",e=>this.events.emit("error",e)),this.connection.on("register_error",e=>this.onClose()),this.hasRegisteredEventListeners=!0)}}var wI=null,bI=null;const ky=()=>typeof WebSocket<"u"?WebSocket:typeof C.g<"u"&&typeof C.g.WebSocket<"u"?C.g.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:C(72030),Jy=()=>typeof WebSocket<"u"||typeof C.g<"u"&&typeof C.g.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",ul=s=>s.split("?")[0],hl=10,Yy=ky();class Qy{constructor(e){if(this.url=e,this.events=new fe.EventEmitter,this.registering=!1,!al(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);this.url=e}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){return new Promise((e,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=o=>{this.onClose(o),e()},this.socket.close()})}async send(e){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(Ai(e))}catch(r){this.onError(e.id,r)}}register(e=this.url){if(!al(e))throw new Error(`Provided URL is not compatible with WebSocket connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((o,u)=>{this.events.once("register_error",p=>{this.resetMaxListeners(),u(p)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return u(new Error("WebSocket connection is missing or invalid"));o(this.socket)})})}return this.url=e,this.registering=!0,new Promise((r,o)=>{const u=new URLSearchParams(e).get("origin"),p=(0,By.isReactNative)()?{headers:{origin:u}}:{rejectUnauthorized:!Gy(e)},D=new Yy(e,[],p);Jy()?D.onerror=F=>{const G=F;o(this.emitError(G.error))}:D.on("error",F=>{o(this.emitError(F))}),D.onopen=()=>{this.onOpen(D),r(D)}})}onOpen(e){e.onmessage=r=>this.onPayload(r),e.onclose=r=>this.onClose(r),this.socket=e,this.registering=!1,this.events.emit("open")}onClose(e){this.socket=void 0,this.registering=!1,this.events.emit("close",e)}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Ns(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const o=this.parseError(r),u=o.message||o.toString(),p=Ro(e,u);this.events.emit("payload",p)}parseError(e,r=this.url){return nl(e,ul(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>hl&&this.events.setMaxListeners(hl)}emitError(e){const r=this.parseError(new Error((e==null?void 0:e.message)||`WebSocket connection failed for host: ${ul(this.url)}`));return this.events.emit("register_error",r),r}}var Xy=C(72307),Zy=C.n(Xy),ev=C(1354),tv=C.n(ev);function rv(s,e){if(s.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),o=0;o<r.length;o++)r[o]=255;for(var u=0;u<s.length;u++){var p=s.charAt(u),D=p.charCodeAt(0);if(r[D]!==255)throw new TypeError(p+" is ambiguous");r[D]=u}var F=s.length,G=s.charAt(0),U=Math.log(F)/Math.log(256),te=Math.log(256)/Math.log(F);function oe(ve){if(ve instanceof Uint8Array||(ArrayBuffer.isView(ve)?ve=new Uint8Array(ve.buffer,ve.byteOffset,ve.byteLength):Array.isArray(ve)&&(ve=Uint8Array.from(ve))),!(ve instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(ve.length===0)return"";for(var Me=0,Ge=0,Xe=0,Rt=ve.length;Xe!==Rt&&ve[Xe]===0;)Xe++,Me++;for(var ct=(Rt-Xe)*te+1>>>0,Ze=new Uint8Array(ct);Xe!==Rt;){for(var Je=ve[Xe],Ct=0,At=ct-1;(Je!==0||Ct<Ge)&&At!==-1;At--,Ct++)Je+=256*Ze[At]>>>0,Ze[At]=Je%F>>>0,Je=Je/F>>>0;if(Je!==0)throw new Error("Non-zero carry");Ge=Ct,Xe++}for(var Ht=ct-Ge;Ht!==ct&&Ze[Ht]===0;)Ht++;for(var Zr=G.repeat(Me);Ht<ct;++Ht)Zr+=s.charAt(Ze[Ht]);return Zr}function _e(ve){if(typeof ve!="string")throw new TypeError("Expected String");if(ve.length===0)return new Uint8Array;var Me=0;if(ve[Me]!==" "){for(var Ge=0,Xe=0;ve[Me]===G;)Ge++,Me++;for(var Rt=(ve.length-Me)*U+1>>>0,ct=new Uint8Array(Rt);ve[Me];){var Ze=r[ve.charCodeAt(Me)];if(Ze===255)return;for(var Je=0,Ct=Rt-1;(Ze!==0||Je<Xe)&&Ct!==-1;Ct--,Je++)Ze+=F*ct[Ct]>>>0,ct[Ct]=Ze%256>>>0,Ze=Ze/256>>>0;if(Ze!==0)throw new Error("Non-zero carry");Xe=Je,Me++}if(ve[Me]!==" "){for(var At=Rt-Xe;At!==Rt&&ct[At]===0;)At++;for(var Ht=new Uint8Array(Ge+(Rt-At)),Zr=Ge;At!==Rt;)Ht[Zr++]=ct[At++];return Ht}}}function ze(ve){var Me=_e(ve);if(Me)return Me;throw new Error(`Non-${e} character`)}return{encode:oe,decodeUnsafe:_e,decode:ze}}var nv=rv,iv=nv;const ll=s=>{if(s instanceof Uint8Array&&s.constructor.name==="Uint8Array")return s;if(s instanceof ArrayBuffer)return new Uint8Array(s);if(ArrayBuffer.isView(s))return new Uint8Array(s.buffer,s.byteOffset,s.byteLength);throw new Error("Unknown type, must be binary type")},sv=s=>new TextEncoder().encode(s),ov=s=>new TextDecoder().decode(s);class av{constructor(e,r,o){this.name=e,this.prefix=r,this.baseEncode=o}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class cv{constructor(e,r,o){if(this.name=e,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=o}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return fl(this,e)}}class uv{constructor(e){this.decoders=e}or(e){return fl(this,e)}decode(e){const r=e[0],o=this.decoders[r];if(o)return o.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const fl=(s,e)=>new uv({...s.decoders||{[s.prefix]:s},...e.decoders||{[e.prefix]:e}});class hv{constructor(e,r,o,u){this.name=e,this.prefix=r,this.baseEncode=o,this.baseDecode=u,this.encoder=new av(e,r,o),this.decoder=new cv(e,r,u)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const No=({name:s,prefix:e,encode:r,decode:o})=>new hv(s,e,r,o),js=({prefix:s,name:e,alphabet:r})=>{const{encode:o,decode:u}=iv(r,e);return No({prefix:s,name:e,encode:o,decode:p=>ll(u(p))})},lv=(s,e,r,o)=>{const u={};for(let te=0;te<e.length;++te)u[e[te]]=te;let p=s.length;for(;s[p-1]==="=";)--p;const D=new Uint8Array(p*r/8|0);let F=0,G=0,U=0;for(let te=0;te<p;++te){const oe=u[s[te]];if(oe===void 0)throw new SyntaxError(`Non-${o} character`);G=G<<r|oe,F+=r,F>=8&&(F-=8,D[U++]=255&G>>F)}if(F>=r||255&G<<8-F)throw new SyntaxError("Unexpected end of data");return D},fv=(s,e,r)=>{const o=e[e.length-1]==="=",u=(1<<r)-1;let p="",D=0,F=0;for(let G=0;G<s.length;++G)for(F=F<<8|s[G],D+=8;D>r;)D-=r,p+=e[u&F>>D];if(D&&(p+=e[u&F<<r-D]),o)for(;p.length*r&7;)p+="=";return p},xr=({name:s,prefix:e,bitsPerChar:r,alphabet:o})=>No({prefix:e,name:s,encode(u){return fv(u,o,r)},decode(u){return lv(u,o,r,s)}}),dv=No({prefix:"\0",name:"identity",encode:s=>ov(s),decode:s=>sv(s)});var pv=Object.freeze({__proto__:null,identity:dv});const gv=xr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var yv=Object.freeze({__proto__:null,base2:gv});const vv=xr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var mv=Object.freeze({__proto__:null,base8:vv});const _v=js({prefix:"9",name:"base10",alphabet:"0123456789"});var wv=Object.freeze({__proto__:null,base10:_v});const bv=xr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Ev=xr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Dv=Object.freeze({__proto__:null,base16:bv,base16upper:Ev});const Sv=xr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Iv=xr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),xv=xr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Ov=xr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Pv=xr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Cv=xr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Av=xr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Rv=xr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Tv=xr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Nv=Object.freeze({__proto__:null,base32:Sv,base32upper:Iv,base32pad:xv,base32padupper:Ov,base32hex:Pv,base32hexupper:Cv,base32hexpad:Av,base32hexpadupper:Rv,base32z:Tv});const Fv=js({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),Uv=js({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var jv=Object.freeze({__proto__:null,base36:Fv,base36upper:Uv});const Lv=js({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),Mv=js({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var Bv=Object.freeze({__proto__:null,base58btc:Lv,base58flickr:Mv});const zv=xr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),$v=xr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Hv=xr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Kv=xr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var Vv=Object.freeze({__proto__:null,base64:zv,base64pad:$v,base64url:Hv,base64urlpad:Kv});const dl=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),qv=dl.reduce((s,e,r)=>(s[r]=e,s),[]),Wv=dl.reduce((s,e,r)=>(s[e.codePointAt(0)]=r,s),[]);function Gv(s){return s.reduce((e,r)=>(e+=qv[r],e),"")}function kv(s){const e=[];for(const r of s){const o=Wv[r.codePointAt(0)];if(o===void 0)throw new Error(`Non-base256emoji character: ${r}`);e.push(o)}return new Uint8Array(e)}const Jv=No({prefix:"\u{1F680}",name:"base256emoji",encode:Gv,decode:kv});var Yv=Object.freeze({__proto__:null,base256emoji:Jv}),Qv=gl,pl=128,Xv=127,Zv=~Xv,em=Math.pow(2,31);function gl(s,e,r){e=e||[],r=r||0;for(var o=r;s>=em;)e[r++]=s&255|pl,s/=128;for(;s&Zv;)e[r++]=s&255|pl,s>>>=7;return e[r]=s|0,gl.bytes=r-o+1,e}var tm=Ec,rm=128,yl=127;function Ec(s,o){var r=0,o=o||0,u=0,p=o,D,F=s.length;do{if(p>=F)throw Ec.bytes=0,new RangeError("Could not decode varint");D=s[p++],r+=u<28?(D&yl)<<u:(D&yl)*Math.pow(2,u),u+=7}while(D>=rm);return Ec.bytes=p-o,r}var nm=Math.pow(2,7),im=Math.pow(2,14),sm=Math.pow(2,21),om=Math.pow(2,28),am=Math.pow(2,35),cm=Math.pow(2,42),um=Math.pow(2,49),hm=Math.pow(2,56),lm=Math.pow(2,63),fm=function(s){return s<nm?1:s<im?2:s<sm?3:s<om?4:s<am?5:s<cm?6:s<um?7:s<hm?8:s<lm?9:10},dm={encode:Qv,decode:tm,encodingLength:fm},vl=dm;const ml=(s,e,r=0)=>(vl.encode(s,e,r),e),_l=s=>vl.encodingLength(s),Dc=(s,e)=>{const r=e.byteLength,o=_l(s),u=o+_l(r),p=new Uint8Array(u+r);return ml(s,p,0),ml(r,p,o),p.set(e,u),new pm(s,r,e,p)};class pm{constructor(e,r,o,u){this.code=e,this.size=r,this.digest=o,this.bytes=u}}const wl=({name:s,code:e,encode:r})=>new gm(s,e,r);class gm{constructor(e,r,o){this.name=e,this.code=r,this.encode=o}digest(e){if(e instanceof Uint8Array){const r=this.encode(e);return r instanceof Uint8Array?Dc(this.code,r):r.then(o=>Dc(this.code,o))}else throw Error("Unknown type, must be binary type")}}const bl=s=>async e=>new Uint8Array(await crypto.subtle.digest(s,e)),ym=wl({name:"sha2-256",code:18,encode:bl("SHA-256")}),vm=wl({name:"sha2-512",code:19,encode:bl("SHA-512")});var mm=Object.freeze({__proto__:null,sha256:ym,sha512:vm});const El=0,_m="identity",Dl=ll;var wm=Object.freeze({__proto__:null,identity:{code:El,name:_m,encode:Dl,digest:s=>Dc(El,Dl(s))}});new TextEncoder,new TextDecoder;const Sl={...pv,...yv,...mv,...wv,...Dv,...Nv,...jv,...Bv,...Vv,...Yv};({...mm,...wm});function Il(s){return globalThis.Buffer!=null?new Uint8Array(s.buffer,s.byteOffset,s.byteLength):s}function bm(s=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Il(globalThis.Buffer.allocUnsafe(s)):new Uint8Array(s)}function xl(s,e,r,o){return{name:s,prefix:e,encoder:{name:s,prefix:e,encode:r},decoder:{decode:o}}}const Ol=xl("utf8","u",s=>"u"+new TextDecoder("utf8").decode(s),s=>new TextEncoder().encode(s.substring(1))),Sc=xl("ascii","a",s=>{let e="a";for(let r=0;r<s.length;r++)e+=String.fromCharCode(s[r]);return e},s=>{s=s.substring(1);const e=bm(s.length);for(let r=0;r<s.length;r++)e[r]=s.charCodeAt(r);return e}),Em={utf8:Ol,"utf-8":Ol,hex:Sl.base16,latin1:Sc,ascii:Sc,binary:Sc,...Sl};function Dm(s,e="utf8"){const r=Em[e];if(!r)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Il(globalThis.Buffer.from(s,"utf-8")):r.decoder.decode(`${r.prefix}${s}`)}const Pl="wc",Sm=2,Ic="core",li=`${Pl}@2:${Ic}:`,Im={name:Ic,logger:"error"},xm={database:":memory:"},Om="crypto",Cl="client_ed25519_seed",Pm=Le.ONE_DAY,Cm="keychain",Am="0.3",Rm="messages",Tm="0.3",Nm=Le.SIX_HOURS,Fm="publisher",Al="irn",Um="error",Rl="wss://relay.walletconnect.com",Tl="wss://relay.walletconnect.org",jm="relayer",Ar={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},Lm="_subscription",Wn={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},Mm=Le.ONE_SECOND,SI={database:":memory:"},Bm="2.11.1",zm=1e4,$m="0.3",Hm="WALLETCONNECT_CLIENT_ID",Dn={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},II=null,Km="subscription",Vm="0.3",qm=Le.FIVE_SECONDS*1e3,Wm="pairing",Gm="0.3",xI=null,Ls={wc_pairingDelete:{req:{ttl:Le.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Le.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Le.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Le.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Le.ONE_DAY,prompt:!1,tag:0},res:{ttl:Le.ONE_DAY,prompt:!1,tag:0}}},Ms={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Un={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},km="history",Jm="0.3",Ym="expirer",un={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},Qm="0.3",OI=null,xc="verify-api",as="https://verify.walletconnect.com",Oc="https://verify.walletconnect.org",Xm=[as,Oc],Zm="echo",e_="https://echo.walletconnect.com";class t_{constructor(e,r){this.core=e,this.logger=r,this.keychain=new Map,this.name=Cm,this.version=Am,this.initialized=!1,this.storagePrefix=li,this.init=async()=>{if(!this.initialized){const o=await this.getKeyChain();typeof o<"u"&&(this.keychain=o),this.initialized=!0}},this.has=o=>(this.isInitialized(),this.keychain.has(o)),this.set=async(o,u)=>{this.isInitialized(),this.keychain.set(o,u),await this.persist()},this.get=o=>{this.isInitialized();const u=this.keychain.get(o);if(typeof u>"u"){const{message:p}=Te("NO_MATCHING_KEY",`${this.name}: ${o}`);throw new Error(p)}return u},this.del=async o=>{this.isInitialized(),this.keychain.delete(o),await this.persist()},this.core=e,this.logger=(0,Dt.generateChildLogger)(r,this.name)}get context(){return(0,Dt.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(e){await this.core.storage.setItem(this.storageKey,Sh(e))}async getKeyChain(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Ih(e):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}}class r_{constructor(e,r,o){this.core=e,this.logger=r,this.name=Om,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=u=>(this.isInitialized(),this.keychain.has(u)),this.getClientId=async()=>{this.isInitialized();const u=await this.getClientSeed(),p=Qh(u);return Yh(p.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const u=tg();return this.setPrivateKey(u.publicKey,u.privateKey)},this.signJWT=async u=>{this.isInitialized();const p=await this.getClientSeed(),D=Qh(p),F=ac();return await Ty(F,u,Pm,D)},this.generateSharedKey=(u,p,D)=>{this.isInitialized();const F=this.getPrivateKey(u),G=rg(F,p);return this.setSymKey(G,D)},this.setSymKey=async(u,p)=>{this.isInitialized();const D=p||ng(u);return await this.keychain.set(D,u),D},this.deleteKeyPair=async u=>{this.isInitialized(),await this.keychain.del(u)},this.deleteSymKey=async u=>{this.isInitialized(),await this.keychain.del(u)},this.encode=async(u,p,D)=>{this.isInitialized();const F=mh(D),G=Ai(p);if(_h(F)){const _e=F.senderPublicKey,ze=F.receiverPublicKey;u=await this.generateSharedKey(_e,ze)}const U=this.getSymKey(u),{type:te,senderPublicKey:oe}=F;return sg({type:te,symKey:U,message:G,senderPublicKey:oe})},this.decode=async(u,p,D)=>{this.isInitialized();const F=cg(p,D);if(_h(F)){const G=F.receiverPublicKey,U=F.senderPublicKey;u=await this.generateSharedKey(G,U)}try{const G=this.getSymKey(u),U=og({symKey:G,encoded:p});return Ns(U)}catch(G){this.logger.error(`Failed to decode message from topic: '${u}', clientId: '${await this.getClientId()}'`),this.logger.error(G)}},this.getPayloadType=u=>{const p=wo(u);return Cs(p.type)},this.getPayloadSenderPublicKey=u=>{const p=wo(u);return p.senderPublicKey?_r(p.senderPublicKey,Fr):void 0},this.core=e,this.logger=(0,Dt.generateChildLogger)(r,this.name),this.keychain=o||new t_(this.core,this.logger)}get context(){return(0,Dt.getLoggerContext)(this.logger)}async setPrivateKey(e,r){return await this.keychain.set(e,r),e}getPrivateKey(e){return this.keychain.get(e)}async getClientSeed(){let e="";try{e=this.keychain.get(Cl)}catch{e=ac(),await this.keychain.set(Cl,e)}return Dm(e,"base16")}getSymKey(e){return this.keychain.get(e)}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}}class n_ extends cy{constructor(e,r){super(e,r),this.logger=e,this.core=r,this.messages=new Map,this.name=Rm,this.version=Tm,this.initialized=!1,this.storagePrefix=li,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const o=await this.getRelayerMessages();typeof o<"u"&&(this.messages=o),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(o){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(o)}finally{this.initialized=!0}}},this.set=async(o,u)=>{this.isInitialized();const p=Qi(u);let D=this.messages.get(o);return typeof D>"u"&&(D={}),typeof D[p]<"u"||(D[p]=u,this.messages.set(o,D),await this.persist()),p},this.get=o=>{this.isInitialized();let u=this.messages.get(o);return typeof u>"u"&&(u={}),u},this.has=(o,u)=>{this.isInitialized();const p=this.get(o),D=Qi(u);return typeof p[D]<"u"},this.del=async o=>{this.isInitialized(),this.messages.delete(o),await this.persist()},this.logger=(0,Dt.generateChildLogger)(e,this.name),this.core=r}get context(){return(0,Dt.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(e){await this.core.storage.setItem(this.storageKey,Sh(e))}async getRelayerMessages(){const e=await this.core.storage.getItem(this.storageKey);return typeof e<"u"?Ih(e):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}}class i_ extends uy{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.events=new fe.EventEmitter,this.name=Fm,this.queue=new Map,this.publishTimeout=(0,Le.toMiliseconds)(Le.TEN_SECONDS*2),this.needsTransportRestart=!1,this.publish=async(o,u,p)=>{var D;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:o,message:u,opts:p}});try{const F=(p==null?void 0:p.ttl)||Nm,G=hc(p),U=(p==null?void 0:p.prompt)||!1,te=(p==null?void 0:p.tag)||0,oe=(p==null?void 0:p.id)||il().toString(),_e={topic:o,message:u,opts:{ttl:F,relay:G,prompt:U,tag:te,id:oe}},ze=setTimeout(()=>this.queue.set(oe,_e),this.publishTimeout);try{await await As(this.rpcPublish(o,u,F,G,U,te,oe),this.publishTimeout,`Failed to publish payload, please try again. id:${oe} tag:${te}`),this.removeRequestFromQueue(oe),this.relayer.events.emit(Ar.publish,_e)}catch(ve){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(D=p==null?void 0:p.internal)!=null&&D.throwOnFailedPublish)throw this.removeRequestFromQueue(oe),ve;return}finally{clearTimeout(ze)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:o,message:u,opts:p}})}catch(F){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(F),F}},this.on=(o,u)=>{this.events.on(o,u)},this.once=(o,u)=>{this.events.once(o,u)},this.off=(o,u)=>{this.events.off(o,u)},this.removeListener=(o,u)=>{this.events.removeListener(o,u)},this.relayer=e,this.logger=(0,Dt.generateChildLogger)(r,this.name),this.registerEventListeners()}get context(){return(0,Dt.getLoggerContext)(this.logger)}rpcPublish(e,r,o,u,p,D,F){var G,U,te,oe;const _e={method:bo(u.protocol).publish,params:{topic:e,message:r,ttl:o,prompt:p,tag:D},id:F};return Ur((G=_e.params)==null?void 0:G.prompt)&&((U=_e.params)==null||delete U.prompt),Ur((te=_e.params)==null?void 0:te.tag)&&((oe=_e.params)==null||delete oe.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:_e}),this.relayer.request(_e)}removeRequestFromQueue(e){this.queue.delete(e)}checkQueue(){this.queue.forEach(async e=>{const{topic:r,message:o,opts:u}=e;await this.publish(r,o,u)})}registerEventListeners(){this.relayer.core.heartbeat.on(Fs.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Ar.connection_stalled);return}this.checkQueue()}),this.relayer.on(Ar.message_ack,e=>{this.removeRequestFromQueue(e.id.toString())})}}class s_{constructor(){this.map=new Map,this.set=(e,r)=>{const o=this.get(e);this.exists(e,r)||this.map.set(e,[...o,r])},this.get=e=>this.map.get(e)||[],this.exists=(e,r)=>this.get(e).includes(r),this.delete=(e,r)=>{if(typeof r>"u"){this.map.delete(e);return}if(!this.map.has(e))return;const o=this.get(e);if(!this.exists(e,r))return;const u=o.filter(p=>p!==r);if(!u.length){this.map.delete(e);return}this.map.set(e,u)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var o_=Object.defineProperty,a_=Object.defineProperties,c_=Object.getOwnPropertyDescriptors,Nl=Object.getOwnPropertySymbols,u_=Object.prototype.hasOwnProperty,h_=Object.prototype.propertyIsEnumerable,Fl=(s,e,r)=>e in s?o_(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r,Bs=(s,e)=>{for(var r in e||(e={}))u_.call(e,r)&&Fl(s,r,e[r]);if(Nl)for(var r of Nl(e))h_.call(e,r)&&Fl(s,r,e[r]);return s},Pc=(s,e)=>a_(s,c_(e));class l_ extends fy{constructor(e,r){super(e,r),this.relayer=e,this.logger=r,this.subscriptions=new Map,this.topicMap=new s_,this.events=new fe.EventEmitter,this.name=Km,this.version=Vm,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=li,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(o,u)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:o,opts:u}});try{const p=hc(u),D={topic:o,relay:p};this.pending.set(o,D);const F=await this.rpcSubscribe(o,p);return this.onSubscribe(F,D),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:o,opts:u}}),F}catch(p){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(p),p}},this.unsubscribe=async(o,u)=>{await this.restartToComplete(),this.isInitialized(),typeof(u==null?void 0:u.id)<"u"?await this.unsubscribeById(o,u.id,u):await this.unsubscribeByTopic(o,u)},this.isSubscribed=async o=>{if(this.topics.includes(o))return!0;const u=`${this.pendingSubscriptionWatchLabel}_${o}`;return await new Promise((p,D)=>{const F=new Le.Watch;F.start(u);const G=setInterval(()=>{!this.pending.has(o)&&this.topics.includes(o)&&(clearInterval(G),F.stop(u),p(!0)),F.elapsed(u)>=qm&&(clearInterval(G),F.stop(u),D(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1)},this.on=(o,u)=>{this.events.on(o,u)},this.once=(o,u)=>{this.events.once(o,u)},this.off=(o,u)=>{this.events.off(o,u)},this.removeListener=(o,u)=>{this.events.removeListener(o,u)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=e,this.logger=(0,Dt.generateChildLogger)(r,this.name),this.clientId=""}get context(){return(0,Dt.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(e,r){let o=!1;try{o=this.getSubscription(e).topic===r}catch{}return o}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(e,r){const o=this.topicMap.get(e);await Promise.all(o.map(async u=>await this.unsubscribeById(e,u,r)))}async unsubscribeById(e,r,o){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:o}});try{const u=hc(o);await this.rpcUnsubscribe(e,r,u);const p=Wt("USER_DISCONNECTED",`${this.name}, ${e}`);await this.onUnsubscribe(e,r,p),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:e,id:r,opts:o}})}catch(u){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(u),u}}async rpcSubscribe(e,r){const o={method:bo(r.protocol).subscribe,params:{topic:e}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o});try{await await As(this.relayer.request(o),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Ar.connection_stalled)}return Qi(e+this.clientId)}async rpcBatchSubscribe(e){if(!e.length)return;const r=e[0].relay,o={method:bo(r.protocol).batchSubscribe,params:{topics:e.map(u=>u.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o});try{return await await As(this.relayer.request(o),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(Ar.connection_stalled)}}rpcUnsubscribe(e,r,o){const u={method:bo(o.protocol).unsubscribe,params:{topic:e,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:u}),this.relayer.request(u)}onSubscribe(e,r){this.setSubscription(e,Pc(Bs({},r),{id:e})),this.pending.delete(r.topic)}onBatchSubscribe(e){e.length&&e.forEach(r=>{this.setSubscription(r.id,Bs({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(e,r,o){this.events.removeAllListeners(r),this.hasSubscription(r,e)&&this.deleteSubscription(r,o),await this.relayer.messages.del(e)}async setRelayerSubscriptions(e){await this.relayer.core.storage.setItem(this.storageKey,e)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(e,r){this.subscriptions.has(e)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:e,subscription:r}),this.addSubscription(e,r))}addSubscription(e,r){this.subscriptions.set(e,Bs({},r)),this.topicMap.set(r.topic,e),this.events.emit(Dn.created,r)}getSubscription(e){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:e});const r=this.subscriptions.get(e);if(!r){const{message:o}=Te("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(o)}return r}deleteSubscription(e,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:e,reason:r});const o=this.getSubscription(e);this.subscriptions.delete(e),this.topicMap.delete(o.topic,e),this.events.emit(Dn.deleted,Pc(Bs({},o),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Dn.sync)}async reset(){if(this.cached.length){const e=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<e;r++){const o=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(o)}}this.events.emit(Dn.resubscribed)}async restore(){try{const e=await this.getRelayerSubscriptions();if(typeof e>"u"||!e.length)return;if(this.subscriptions.size){const{message:r}=Te("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(e){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(e)}}async batchSubscribe(e){if(!e.length)return;const r=await this.rpcBatchSubscribe(e);Fn(r)&&this.onBatchSubscribe(r.map((o,u)=>Pc(Bs({},e[u]),{id:o})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const e=[];this.pending.forEach(r=>{e.push(r)}),await this.batchSubscribe(e)}registerEventListeners(){this.relayer.core.heartbeat.on(Fs.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(Ar.connect,async()=>{await this.onConnect()}),this.relayer.on(Ar.disconnect,()=>{this.onDisconnect()}),this.events.on(Dn.created,async e=>{const r=Dn.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()}),this.events.on(Dn.deleted,async e=>{const r=Dn.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}async restartToComplete(){this.restartInProgress&&await new Promise(e=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),e())},this.pollingInterval)})}}var f_=Object.defineProperty,Ul=Object.getOwnPropertySymbols,d_=Object.prototype.hasOwnProperty,p_=Object.prototype.propertyIsEnumerable,jl=(s,e,r)=>e in s?f_(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r,g_=(s,e)=>{for(var r in e||(e={}))d_.call(e,r)&&jl(s,r,e[r]);if(Ul)for(var r of Ul(e))p_.call(e,r)&&jl(s,r,e[r]);return s};class y_ extends hy{constructor(e){super(e),this.protocol="wc",this.version=2,this.events=new fe.EventEmitter,this.name=jm,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.requestsInFlight=new Map,this.request=async r=>{this.logger.debug("Publishing Request Payload");const o=r.id,u=this.provider.request(r);this.requestsInFlight.set(o,{promise:u,request:r});try{return await this.toEstablishConnection(),await u}catch(p){throw this.logger.debug("Failed to Publish Request"),this.logger.error(p),p}finally{this.requestsInFlight.delete(o)}},this.onPayloadHandler=r=>{this.onProviderPayload(r)},this.onConnectHandler=()=>{this.events.emit(Ar.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=r=>{this.logger.error(r),this.events.emit(Ar.error,r),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(Wn.payload,this.onPayloadHandler),this.provider.on(Wn.connect,this.onConnectHandler),this.provider.on(Wn.disconnect,this.onDisconnectHandler),this.provider.on(Wn.error,this.onProviderErrorHandler)},this.core=e.core,this.logger=typeof e.logger<"u"&&typeof e.logger!="string"?(0,Dt.generateChildLogger)(e.logger,this.name):(0,Dt.pino)((0,Dt.getDefaultLoggerOptions)({level:e.logger||Um})),this.messages=new n_(this.logger,e.core),this.subscriber=new l_(this,this.logger),this.publisher=new i_(this,this.logger),this.relayUrl=(e==null?void 0:e.relayUrl)||Rl,this.projectId=e.projectId,this.bundleId=gg(),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${Tl}...`),await this.restartTransport(Tl)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},zm)}get context(){return(0,Dt.getLoggerContext)(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(e,r,o){this.isInitialized(),await this.publisher.publish(e,r,o),await this.recordMessageEvent({topic:e,message:r,publishedAt:Date.now()})}async subscribe(e,r){var o;this.isInitialized();let u=((o=this.subscriber.topicMap.get(e))==null?void 0:o[0])||"";if(u)return u;let p;const D=F=>{F.topic===e&&(this.subscriber.off(Dn.created,D),p())};return await Promise.all([new Promise(F=>{p=F,this.subscriber.on(Dn.created,D)}),new Promise(async F=>{u=await this.subscriber.subscribe(e,r),F()})]),u}async unsubscribe(e,r){this.isInitialized(),await this.subscriber.unsubscribe(e,r)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async transportClose(){this.requestsInFlight.size>0&&(this.logger.debug("Waiting for all in-flight requests to finish before closing transport..."),this.requestsInFlight.forEach(async e=>{await e.promise})),this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await As(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(e){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){e&&e!==this.relayUrl&&(this.relayUrl=e,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(r=>{if(!this.initialized)return r();this.subscriber.once(Dn.resubscribed,()=>{r()})}),new Promise(async(r,o)=>{try{await As(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(u){o(u);return}r()})])}catch(r){this.logger.error(r);const o=r;if(!this.isConnectionStalled(o.message))throw r;this.provider.events.emit(Wn.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(e){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=e||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await Bh())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(e){return this.staleConnectionErrors.some(r=>e.includes(r))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const e=await this.core.crypto.signJWT(this.relayUrl);this.provider=new qn(new Qy(bg({sdkVersion:Bm,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:e,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(e){const{topic:r,message:o}=e;await this.messages.set(r,o)}async shouldIgnoreMessageEvent(e){const{topic:r,message:o}=e;if(!o||o.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${o}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.debug(`Ignoring message for non-subscribed topic ${r}`),!0;const u=this.messages.has(r,o);return u&&this.logger.debug(`Ignoring duplicate message: ${o}`),u}async onProviderPayload(e){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:e}),bc(e)){if(!e.method.endsWith(Lm))return;const r=e.params,{topic:o,message:u,publishedAt:p}=r.data,D={topic:o,message:u,publishedAt:p};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(g_({type:"event",event:r.id},D)),this.events.emit(r.id,D),await this.acknowledgePayload(e),await this.onMessageEvent(D)}else To(e)&&this.events.emit(Ar.message_ack,e)}async onMessageEvent(e){await this.shouldIgnoreMessageEvent(e)||(this.events.emit(Ar.message,e),await this.recordMessageEvent(e))}async acknowledgePayload(e){const r=Ao(e.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(Wn.payload,this.onPayloadHandler),this.provider.off(Wn.connect,this.onConnectHandler),this.provider.off(Wn.disconnect,this.onDisconnectHandler),this.provider.off(Wn.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(Ar.connection_stalled,()=>{this.restartTransport().catch(r=>this.logger.error(r))});let e=await Bh();I0(async r=>{this.initialized&&e!==r&&(e=r,r?await this.restartTransport().catch(o=>this.logger.error(o)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(o=>this.logger.error(o))))})}onProviderDisconnect(){this.events.emit(Ar.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(e=>this.logger.error(e))},(0,Le.toMiliseconds)(Mm)))}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(e=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),e())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var v_=Object.defineProperty,Ll=Object.getOwnPropertySymbols,m_=Object.prototype.hasOwnProperty,__=Object.prototype.propertyIsEnumerable,Ml=(s,e,r)=>e in s?v_(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r,Bl=(s,e)=>{for(var r in e||(e={}))m_.call(e,r)&&Ml(s,r,e[r]);if(Ll)for(var r of Ll(e))__.call(e,r)&&Ml(s,r,e[r]);return s};class Fo extends ly{constructor(e,r,o,u=li,p=void 0){super(e,r,o,u),this.core=e,this.logger=r,this.name=o,this.map=new Map,this.version=$m,this.cached=[],this.initialized=!1,this.storagePrefix=li,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(D=>{this.getKey&&D!==null&&!Ur(D)?this.map.set(this.getKey(D),D):r0(D)?this.map.set(D.id,D):n0(D)&&this.map.set(D.topic,D)}),this.cached=[],this.initialized=!0)},this.set=async(D,F)=>{this.isInitialized(),this.map.has(D)?await this.update(D,F):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:D,value:F}),this.map.set(D,F),await this.persist())},this.get=D=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:D}),this.getData(D)),this.getAll=D=>(this.isInitialized(),D?this.values.filter(F=>Object.keys(D).every(G=>Zy()(F[G],D[G]))):this.values),this.update=async(D,F)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:D,update:F});const G=Bl(Bl({},this.getData(D)),F);this.map.set(D,G),await this.persist()},this.delete=async(D,F)=>{this.isInitialized(),this.map.has(D)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:D,reason:F}),this.map.delete(D),await this.persist())},this.logger=(0,Dt.generateChildLogger)(r,this.name),this.storagePrefix=u,this.getKey=p}get context(){return(0,Dt.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(e){await this.core.storage.setItem(this.storageKey,e)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(e){const r=this.map.get(e);if(!r){const{message:o}=Te("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(o),new Error(o)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const e=await this.getDataStore();if(typeof e>"u"||!e.length)return;if(this.map.size){const{message:r}=Te("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(e){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(e)}}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}}class w_{constructor(e,r){this.core=e,this.logger=r,this.name=Wm,this.version=Gm,this.events=new(Pe()),this.initialized=!1,this.storagePrefix=li,this.ignoredPayloadTypes=[Pi],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:o})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...o])]},this.create=async()=>{this.isInitialized();const o=ac(),u=await this.core.crypto.setSymKey(o),p=Xr(Le.FIVE_MINUTES),D={protocol:Al},F={topic:u,expiry:p,relay:D,active:!1},G=zg({protocol:this.core.protocol,version:this.core.version,topic:u,symKey:o,relay:D,expiryTimestamp:p});return await this.pairings.set(u,F),await this.core.relayer.subscribe(u),this.core.expirer.set(u,p),{topic:u,uri:G}},this.pair=async o=>{this.isInitialized(),this.isValidPair(o);const{topic:u,symKey:p,relay:D,expiryTimestamp:F}=Ah(o.uri);let G;if(this.pairings.keys.includes(u)&&(G=this.pairings.get(u),G.active))throw new Error(`Pairing already exists: ${u}. Please try again with a new connection URI.`);const U=F||Xr(Le.FIVE_MINUTES),te={topic:u,relay:D,expiry:U,active:!1};return await this.pairings.set(u,te),this.core.expirer.set(u,U),o.activatePairing&&await this.activate({topic:u}),this.events.emit(Ms.create,te),this.core.crypto.keychain.has(u)||(await this.core.crypto.setSymKey(p,u),await this.core.relayer.subscribe(u,{relay:D})),te},this.activate=async({topic:o})=>{this.isInitialized();const u=Xr(Le.THIRTY_DAYS);await this.pairings.update(o,{active:!0,expiry:u}),this.core.expirer.set(o,u)},this.ping=async o=>{this.isInitialized(),await this.isValidPing(o);const{topic:u}=o;if(this.pairings.keys.includes(u)){const p=await this.sendRequest(u,"wc_pairingPing",{}),{done:D,resolve:F,reject:G}=ts();this.events.once(sr("pairing_ping",p),({error:U})=>{U?G(U):F()}),await D()}},this.updateExpiry=async({topic:o,expiry:u})=>{this.isInitialized(),await this.pairings.update(o,{expiry:u})},this.updateMetadata=async({topic:o,metadata:u})=>{this.isInitialized(),await this.pairings.update(o,{peerMetadata:u})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async o=>{this.isInitialized(),await this.isValidDisconnect(o);const{topic:u}=o;this.pairings.keys.includes(u)&&(await this.sendRequest(u,"wc_pairingDelete",Wt("USER_DISCONNECTED")),await this.deletePairing(u))},this.sendRequest=async(o,u,p)=>{const D=os(u,p),F=await this.core.crypto.encode(o,D),G=Ls[u].req;return this.core.history.set(o,D),this.core.relayer.publish(o,F,G),D.id},this.sendResult=async(o,u,p)=>{const D=Ao(o,p),F=await this.core.crypto.encode(u,D),G=await this.core.history.get(u,o),U=Ls[G.request.method].res;await this.core.relayer.publish(u,F,U),await this.core.history.resolve(D)},this.sendError=async(o,u,p)=>{const D=Ro(o,p),F=await this.core.crypto.encode(u,D),G=await this.core.history.get(u,o),U=Ls[G.request.method]?Ls[G.request.method].res:Ls.unregistered_method.res;await this.core.relayer.publish(u,F,U),await this.core.history.resolve(D)},this.deletePairing=async(o,u)=>{await this.core.relayer.unsubscribe(o),await Promise.all([this.pairings.delete(o,Wt("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(o),u?Promise.resolve():this.core.expirer.del(o)])},this.cleanup=async()=>{const o=this.pairings.getAll().filter(u=>hi(u.expiry));await Promise.all(o.map(u=>this.deletePairing(u.topic)))},this.onRelayEventRequest=o=>{const{topic:u,payload:p}=o;switch(p.method){case"wc_pairingPing":return this.onPairingPingRequest(u,p);case"wc_pairingDelete":return this.onPairingDeleteRequest(u,p);default:return this.onUnknownRpcMethodRequest(u,p)}},this.onRelayEventResponse=async o=>{const{topic:u,payload:p}=o,D=(await this.core.history.get(u,p.id)).request.method;switch(D){case"wc_pairingPing":return this.onPairingPingResponse(u,p);default:return this.onUnknownRpcMethodResponse(D)}},this.onPairingPingRequest=async(o,u)=>{const{id:p}=u;try{this.isValidPing({topic:o}),await this.sendResult(p,o,!0),this.events.emit(Ms.ping,{id:p,topic:o})}catch(D){await this.sendError(p,o,D),this.logger.error(D)}},this.onPairingPingResponse=(o,u)=>{const{id:p}=u;setTimeout(()=>{Vn(u)?this.events.emit(sr("pairing_ping",p),{}):En(u)&&this.events.emit(sr("pairing_ping",p),{error:u.error})},500)},this.onPairingDeleteRequest=async(o,u)=>{const{id:p}=u;try{this.isValidDisconnect({topic:o}),await this.deletePairing(o),this.events.emit(Ms.delete,{id:p,topic:o})}catch(D){await this.sendError(p,o,D),this.logger.error(D)}},this.onUnknownRpcMethodRequest=async(o,u)=>{const{id:p,method:D}=u;try{if(this.registeredMethods.includes(D))return;const F=Wt("WC_METHOD_UNSUPPORTED",D);await this.sendError(p,o,F),this.logger.error(F)}catch(F){await this.sendError(p,o,F),this.logger.error(F)}},this.onUnknownRpcMethodResponse=o=>{this.registeredMethods.includes(o)||this.logger.error(Wt("WC_METHOD_UNSUPPORTED",o))},this.isValidPair=o=>{var u;if(!Hr(o)){const{message:D}=Te("MISSING_OR_INVALID",`pair() params: ${o}`);throw new Error(D)}if(!t0(o.uri)){const{message:D}=Te("MISSING_OR_INVALID",`pair() uri: ${o.uri}`);throw new Error(D)}const p=Ah(o.uri);if(!((u=p==null?void 0:p.relay)!=null&&u.protocol)){const{message:D}=Te("MISSING_OR_INVALID","pair() uri#relay-protocol");throw new Error(D)}if(!(p!=null&&p.symKey)){const{message:D}=Te("MISSING_OR_INVALID","pair() uri#symKey");throw new Error(D)}if(p!=null&&p.expiryTimestamp&&(0,Le.toMiliseconds)(p==null?void 0:p.expiryTimestamp)<Date.now()){const{message:D}=Te("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(D)}},this.isValidPing=async o=>{if(!Hr(o)){const{message:p}=Te("MISSING_OR_INVALID",`ping() params: ${o}`);throw new Error(p)}const{topic:u}=o;await this.isValidPairingTopic(u)},this.isValidDisconnect=async o=>{if(!Hr(o)){const{message:p}=Te("MISSING_OR_INVALID",`disconnect() params: ${o}`);throw new Error(p)}const{topic:u}=o;await this.isValidPairingTopic(u)},this.isValidPairingTopic=async o=>{if(!br(o,!1)){const{message:u}=Te("MISSING_OR_INVALID",`pairing topic should be a string: ${o}`);throw new Error(u)}if(!this.pairings.keys.includes(o)){const{message:u}=Te("NO_MATCHING_KEY",`pairing topic doesn't exist: ${o}`);throw new Error(u)}if(hi(this.pairings.get(o).expiry)){await this.deletePairing(o);const{message:u}=Te("EXPIRED",`pairing topic: ${o}`);throw new Error(u)}},this.core=e,this.logger=(0,Dt.generateChildLogger)(r,this.name),this.pairings=new Fo(this.core,this.logger,this.name,this.storagePrefix)}get context(){return(0,Dt.getLoggerContext)(this.logger)}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}registerRelayerEvents(){this.core.relayer.on(Ar.message,async e=>{const{topic:r,message:o}=e;if(!this.pairings.keys.includes(r)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(o)))return;const u=await this.core.crypto.decode(r,o);try{bc(u)?(this.core.history.set(r,u),this.onRelayEventRequest({topic:r,payload:u})):To(u)&&(await this.core.history.resolve(u),await this.onRelayEventResponse({topic:r,payload:u}),this.core.history.delete(r,u.id))}catch(p){this.logger.error(p)}})}registerExpirerEvents(){this.core.expirer.on(un.expired,async e=>{const{topic:r}=Oh(e.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(Ms.expire,{topic:r}))})}}class b_ extends ay{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.records=new Map,this.events=new fe.EventEmitter,this.name=km,this.version=Jm,this.cached=[],this.initialized=!1,this.storagePrefix=li,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>this.records.set(o.id,o)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(o,u,p)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:o,request:u,chainId:p}),this.records.has(u.id))return;const D={id:u.id,topic:o,request:{method:u.method,params:u.params||null},chainId:p,expiry:Xr(Le.THIRTY_DAYS)};this.records.set(D.id,D),this.events.emit(Un.created,D)},this.resolve=async o=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:o}),!this.records.has(o.id))return;const u=await this.getRecord(o.id);typeof u.response>"u"&&(u.response=En(o)?{error:o.error}:{result:o.result},this.records.set(u.id,u),this.events.emit(Un.updated,u))},this.get=async(o,u)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:o,id:u}),await this.getRecord(u)),this.delete=(o,u)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:u}),this.values.forEach(p=>{if(p.topic===o){if(typeof u<"u"&&p.id!==u)return;this.records.delete(p.id),this.events.emit(Un.deleted,p)}})},this.exists=async(o,u)=>(this.isInitialized(),this.records.has(u)?(await this.getRecord(u)).topic===o:!1),this.on=(o,u)=>{this.events.on(o,u)},this.once=(o,u)=>{this.events.once(o,u)},this.off=(o,u)=>{this.events.off(o,u)},this.removeListener=(o,u)=>{this.events.removeListener(o,u)},this.logger=(0,Dt.generateChildLogger)(r,this.name)}get context(){return(0,Dt.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const e=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const o={topic:r.topic,request:os(r.request.method,r.request.params,r.id),chainId:r.chainId};return e.push(o)}),e}async setJsonRpcRecords(e){await this.core.storage.setItem(this.storageKey,e)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(e){this.isInitialized();const r=this.records.get(e);if(!r){const{message:o}=Te("NO_MATCHING_KEY",`${this.name}: ${e}`);throw new Error(o)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Un.sync)}async restore(){try{const e=await this.getJsonRpcRecords();if(typeof e>"u"||!e.length)return;if(this.records.size){const{message:r}=Te("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(e){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(e)}}registerEventListeners(){this.events.on(Un.created,e=>{const r=Un.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(Un.updated,e=>{const r=Un.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.events.on(Un.deleted,e=>{const r=Un.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:e}),this.persist()}),this.core.heartbeat.on(Fs.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(e=>{(0,Le.toMiliseconds)(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.delete(e.topic,e.id))})}catch(e){this.logger.warn(e)}}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}}class E_ extends dy{constructor(e,r){super(e,r),this.core=e,this.logger=r,this.expirations=new Map,this.events=new fe.EventEmitter,this.name=Ym,this.version=Qm,this.cached=[],this.initialized=!1,this.storagePrefix=li,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>this.expirations.set(o.target,o)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=o=>{try{const u=this.formatTarget(o);return typeof this.getExpiration(u)<"u"}catch{return!1}},this.set=(o,u)=>{this.isInitialized();const p=this.formatTarget(o),D={target:p,expiry:u};this.expirations.set(p,D),this.checkExpiry(p,D),this.events.emit(un.created,{target:p,expiration:D})},this.get=o=>{this.isInitialized();const u=this.formatTarget(o);return this.getExpiration(u)},this.del=o=>{if(this.isInitialized(),this.has(o)){const u=this.formatTarget(o),p=this.getExpiration(u);this.expirations.delete(u),this.events.emit(un.deleted,{target:u,expiration:p})}},this.on=(o,u)=>{this.events.on(o,u)},this.once=(o,u)=>{this.events.once(o,u)},this.off=(o,u)=>{this.events.off(o,u)},this.removeListener=(o,u)=>{this.events.removeListener(o,u)},this.logger=(0,Dt.generateChildLogger)(r,this.name)}get context(){return(0,Dt.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(e){if(typeof e=="string")return Ig(e);if(typeof e=="number")return xg(e);const{message:r}=Te("UNKNOWN_TYPE",`Target type: ${typeof e}`);throw new Error(r)}async setExpirations(e){await this.core.storage.setItem(this.storageKey,e)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(un.sync)}async restore(){try{const e=await this.getExpirations();if(typeof e>"u"||!e.length)return;if(this.expirations.size){const{message:r}=Te("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=e,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(e){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(e)}}getExpiration(e){const r=this.expirations.get(e);if(!r){const{message:o}=Te("NO_MATCHING_KEY",`${this.name}: ${e}`);throw this.logger.error(o),new Error(o)}return r}checkExpiry(e,r){const{expiry:o}=r;(0,Le.toMiliseconds)(o)-Date.now()<=0&&this.expire(e,r)}expire(e,r){this.expirations.delete(e),this.events.emit(un.expired,{target:e,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((e,r)=>this.checkExpiry(r,e))}registerEventListeners(){this.core.heartbeat.on(Fs.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(un.created,e=>{const r=un.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(un.expired,e=>{const r=un.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()}),this.events.on(un.deleted,e=>{const r=un.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:e}),this.persist()})}isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}}}class D_ extends py{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.name=xc,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async o=>{if(this.verifyDisabled||Xi()||!Zi())return;const u=this.getVerifyUrl(o==null?void 0:o.verifyUrl);this.verifyUrl!==u&&this.removeIframe(),this.verifyUrl=u;try{await this.createIframe()}catch(p){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(p)}if(!this.initialized){this.removeIframe(),this.verifyUrl=Oc;try{await this.createIframe()}catch(p){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(p),this.verifyDisabled=!0}}},this.register=async o=>{this.initialized?this.sendPost(o.attestationId):(this.addToQueue(o.attestationId),await this.init())},this.resolve=async o=>{if(this.isDevEnv)return"";const u=this.getVerifyUrl(o==null?void 0:o.verifyUrl);let p;try{p=await this.fetchAttestation(o.attestationId,u)}catch(D){this.logger.info(`failed to resolve attestation: ${o.attestationId} from url: ${u}`),this.logger.info(D),p=await this.fetchAttestation(o.attestationId,Oc)}return p},this.fetchAttestation=async(o,u)=>{this.logger.info(`resolving attestation: ${o} from url: ${u}`);const p=this.startAbortTimer(Le.ONE_SECOND*2),D=await fetch(`${u}/attestation/${o}`,{signal:this.abortController.signal});return clearTimeout(p),D.status===200?await D.json():void 0},this.addToQueue=o=>{this.queue.push(o)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(o=>this.sendPost(o)),this.queue=[])},this.sendPost=o=>{var u;try{if(!this.iframe)return;(u=this.iframe.contentWindow)==null||u.postMessage(o,"*"),this.logger.info(`postMessage sent: ${o} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let o;const u=p=>{p.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",u),o())};await Promise.race([new Promise(p=>{if(document.getElementById(xc))return p();window.addEventListener("message",u);const D=document.createElement("iframe");D.id=xc,D.src=`${this.verifyUrl}/${this.projectId}`,D.style.display="none",document.body.append(D),this.iframe=D,o=p}),new Promise((p,D)=>setTimeout(()=>{window.removeEventListener("message",u),D("verify iframe load timeout")},(0,Le.toMiliseconds)(Le.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.getVerifyUrl=o=>{let u=o||as;return Xm.includes(u)||(this.logger.info(`verify url: ${u}, not included in trusted list, assigning default: ${as}`),u=as),u},this.logger=(0,Dt.generateChildLogger)(r,this.name),this.verifyUrl=as,this.abortController=new AbortController,this.isDevEnv=uc()&&{NODE_ENV:"production",PUBLIC_PATH:"/"}.IS_VITEST}get context(){return(0,Dt.getLoggerContext)(this.logger)}startAbortTimer(e){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),(0,Le.toMiliseconds)(e))}}class S_ extends gy{constructor(e,r){super(e,r),this.projectId=e,this.logger=r,this.context=Zm,this.registerDeviceToken=async o=>{const{clientId:u,token:p,notificationType:D,enableEncrypted:F=!1}=o,G=`${e_}/${this.projectId}/clients`;await tv()(G,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:u,type:D,token:p,always_raw:F})})},this.logger=(0,Dt.generateChildLogger)(r,this.context)}}var I_=Object.defineProperty,zl=Object.getOwnPropertySymbols,x_=Object.prototype.hasOwnProperty,O_=Object.prototype.propertyIsEnumerable,$l=(s,e,r)=>e in s?I_(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r,Hl=(s,e)=>{for(var r in e||(e={}))x_.call(e,r)&&$l(s,r,e[r]);if(zl)for(var r of zl(e))O_.call(e,r)&&$l(s,r,e[r]);return s};class Cc extends oy{constructor(e){super(e),this.protocol=Pl,this.version=Sm,this.name=Ic,this.events=new fe.EventEmitter,this.initialized=!1,this.on=(o,u)=>this.events.on(o,u),this.once=(o,u)=>this.events.once(o,u),this.off=(o,u)=>this.events.off(o,u),this.removeListener=(o,u)=>this.events.removeListener(o,u),this.projectId=e==null?void 0:e.projectId,this.relayUrl=(e==null?void 0:e.relayUrl)||Rl,this.customStoragePrefix=e!=null&&e.customStoragePrefix?`:${e.customStoragePrefix}`:"";const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:(0,Dt.pino)((0,Dt.getDefaultLoggerOptions)({level:(e==null?void 0:e.logger)||Im.logger}));this.logger=(0,Dt.generateChildLogger)(r,this.name),this.heartbeat=new Fs.HeartBeat,this.crypto=new r_(this,this.logger,e==null?void 0:e.keychain),this.history=new b_(this,this.logger),this.expirer=new E_(this,this.logger),this.storage=e!=null&&e.storage?e.storage:new sy(Hl(Hl({},xm),e==null?void 0:e.storageOptions)),this.relayer=new y_({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new w_(this,this.logger),this.verify=new D_(this.projectId||"",this.logger),this.echoClient=new S_(this.projectId||"",this.logger)}static async init(e){const r=new Cc(e);await r.initialize();const o=await r.crypto.getClientId();return await r.storage.setItem(Hm,o),r}get context(){return(0,Dt.getLoggerContext)(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(e){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,e),this.logger.error(e.message),e}}}const P_=Cc,Kl="wc",Vl=2,ql="client",Ac=`${Kl}@${Vl}:${ql}:`,Rc={name:ql,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},PI={session_proposal:"session_proposal",session_update:"session_update",session_extend:"session_extend",session_ping:"session_ping",session_delete:"session_delete",session_expire:"session_expire",session_request:"session_request",session_request_sent:"session_request_sent",session_event:"session_event",proposal_expire:"proposal_expire",session_request_expire:"session_request_expire"},CI={database:":memory:"},Wl="WALLETCONNECT_DEEPLINK_CHOICE",AI={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},RI="history",TI="0.3",C_="proposal",NI=null,Gl="Proposal expired",A_="session",Uo=Le.SEVEN_DAYS,R_="engine",Gn={wc_sessionPropose:{req:{ttl:Le.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Le.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:Le.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Le.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Le.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Le.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Le.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Le.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Le.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Le.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Le.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Le.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Le.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Le.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Le.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:Le.THIRTY_SECONDS,prompt:!1,tag:1115}}},Tc={min:Le.FIVE_MINUTES,max:Le.SEVEN_DAYS},kn={idle:"IDLE",active:"ACTIVE"},T_="request",N_=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var F_=Object.defineProperty,U_=Object.defineProperties,j_=Object.getOwnPropertyDescriptors,kl=Object.getOwnPropertySymbols,L_=Object.prototype.hasOwnProperty,M_=Object.prototype.propertyIsEnumerable,Jl=(s,e,r)=>e in s?F_(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r,jr=(s,e)=>{for(var r in e||(e={}))L_.call(e,r)&&Jl(s,r,e[r]);if(kl)for(var r of kl(e))M_.call(e,r)&&Jl(s,r,e[r]);return s},cs=(s,e)=>U_(s,j_(e));class B_ extends vy{constructor(e){super(e),this.name=R_,this.events=new(Pe()),this.initialized=!1,this.ignoredPayloadTypes=[Pi],this.requestQueue={state:kn.idle,queue:[]},this.sessionRequestQueue={state:kn.idle,queue:[]},this.requestQueueDelay=Le.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(Gn)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},(0,Le.toMiliseconds)(this.requestQueueDelay)))},this.connect=async r=>{await this.isInitialized();const o=cs(jr({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(o);const{pairingTopic:u,requiredNamespaces:p,optionalNamespaces:D,sessionProperties:F,relays:G}=o;let U=u,te,oe=!1;if(U&&(oe=this.client.core.pairing.pairings.get(U).active),!U||!oe){const{topic:Ze,uri:Je}=await this.client.core.pairing.create();U=Ze,te=Je}const _e=await this.client.core.crypto.generateKeyPair(),ze=Gn.wc_sessionPropose.req.ttl||Le.FIVE_MINUTES,ve=Xr(ze),Me=jr({requiredNamespaces:p,optionalNamespaces:D,relays:G??[{protocol:Al}],proposer:{publicKey:_e,metadata:this.client.metadata},expiryTimestamp:ve},F&&{sessionProperties:F}),{reject:Ge,resolve:Xe,done:Rt}=ts(ze,Gl);if(this.events.once(sr("session_connect"),async({error:Ze,session:Je})=>{if(Ze)Ge(Ze);else if(Je){Je.self.publicKey=_e;const Ct=cs(jr({},Je),{requiredNamespaces:Me.requiredNamespaces,optionalNamespaces:Me.optionalNamespaces});await this.client.session.set(Je.topic,Ct),await this.setExpiry(Je.topic,Je.expiry),U&&await this.client.core.pairing.updateMetadata({topic:U,metadata:Je.peer.metadata}),Xe(Ct)}}),!U){const{message:Ze}=Te("NO_MATCHING_KEY",`connect() pairing topic: ${U}`);throw new Error(Ze)}const ct=await this.sendRequest({topic:U,method:"wc_sessionPropose",params:Me,throwOnFailedPublish:!0});return await this.setProposal(ct,jr({id:ct},Me)),{uri:te,approval:Rt}},this.pair=async r=>(await this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{await this.isInitialized(),await this.isValidApprove(r);const{id:o,relayProtocol:u,namespaces:p,sessionProperties:D}=r,F=this.client.proposal.get(o);let{pairingTopic:G,proposer:U,requiredNamespaces:te,optionalNamespaces:oe}=F;G=G||"";const _e=await this.client.core.crypto.generateKeyPair(),ze=U.publicKey,ve=await this.client.core.crypto.generateSharedKey(_e,ze);G&&o&&(await this.client.core.pairing.updateMetadata({topic:G,metadata:U.metadata}),await this.sendResult({id:o,topic:G,result:{relay:{protocol:u??"irn"},responderPublicKey:_e}}),await this.client.proposal.delete(o,Wt("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:G}));const Me=jr({relay:{protocol:u??"irn"},namespaces:p,pairingTopic:G,controller:{publicKey:_e,metadata:this.client.metadata},expiry:Xr(Uo)},D&&{sessionProperties:D});await this.client.core.relayer.subscribe(ve);const Ge=cs(jr({},Me),{topic:ve,requiredNamespaces:te,optionalNamespaces:oe,pairingTopic:G,acknowledged:!1,self:Me.controller,peer:{publicKey:U.publicKey,metadata:U.metadata},controller:_e});await this.client.session.set(ve,Ge);try{await this.sendRequest({topic:ve,method:"wc_sessionSettle",params:Me,throwOnFailedPublish:!0})}catch(Xe){throw this.client.logger.error(Xe),this.client.session.delete(ve,Wt("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(ve),Xe}return await this.setExpiry(ve,Xr(Uo)),{topic:ve,acknowledged:()=>new Promise(Xe=>setTimeout(()=>Xe(this.client.session.get(ve)),500))}},this.reject=async r=>{await this.isInitialized(),await this.isValidReject(r);const{id:o,reason:u}=r,{pairingTopic:p}=this.client.proposal.get(o);p&&(await this.sendError(o,p,u),await this.client.proposal.delete(o,Wt("USER_DISCONNECTED")))},this.update=async r=>{await this.isInitialized(),await this.isValidUpdate(r);const{topic:o,namespaces:u}=r,p=await this.sendRequest({topic:o,method:"wc_sessionUpdate",params:{namespaces:u}}),{done:D,resolve:F,reject:G}=ts();return this.events.once(sr("session_update",p),({error:U})=>{U?G(U):F()}),await this.client.session.update(o,{namespaces:u}),{acknowledged:D}},this.extend=async r=>{await this.isInitialized(),await this.isValidExtend(r);const{topic:o}=r,u=await this.sendRequest({topic:o,method:"wc_sessionExtend",params:{}}),{done:p,resolve:D,reject:F}=ts();return this.events.once(sr("session_extend",u),({error:G})=>{G?F(G):D()}),await this.setExpiry(o,Xr(Uo)),{acknowledged:p}},this.request=async r=>{await this.isInitialized(),await this.isValidRequest(r);const{chainId:o,request:u,topic:p,expiry:D=Gn.wc_sessionRequest.req.ttl}=r,F=wc(),{done:G,resolve:U,reject:te}=ts(D,"Request expired. Please try again.");return this.events.once(sr("session_request",F),({error:oe,result:_e})=>{oe?te(oe):U(_e)}),await Promise.all([new Promise(async oe=>{await this.sendRequest({clientRpcId:F,topic:p,method:"wc_sessionRequest",params:{request:cs(jr({},u),{expiryTimestamp:Xr(D)}),chainId:o},expiry:D,throwOnFailedPublish:!0}).catch(_e=>te(_e)),this.client.events.emit("session_request_sent",{topic:p,request:u,chainId:o,id:F}),oe()}),new Promise(async oe=>{const _e=await Pg(this.client.core.storage,Wl);Og({id:F,topic:p,wcDeepLink:_e}),oe()}),G()]).then(oe=>oe[2])},this.respond=async r=>{await this.isInitialized(),await this.isValidRespond(r);const{topic:o,response:u}=r,{id:p}=u;Vn(u)?await this.sendResult({id:p,topic:o,result:u.result,throwOnFailedPublish:!0}):En(u)&&await this.sendError(p,o,u.error),this.cleanupAfterResponse(r)},this.ping=async r=>{await this.isInitialized(),await this.isValidPing(r);const{topic:o}=r;if(this.client.session.keys.includes(o)){const u=await this.sendRequest({topic:o,method:"wc_sessionPing",params:{}}),{done:p,resolve:D,reject:F}=ts();this.events.once(sr("session_ping",u),({error:G})=>{G?F(G):D()}),await p()}else this.client.core.pairing.pairings.keys.includes(o)&&await this.client.core.pairing.ping({topic:o})},this.emit=async r=>{await this.isInitialized(),await this.isValidEmit(r);const{topic:o,event:u,chainId:p}=r;await this.sendRequest({topic:o,method:"wc_sessionEvent",params:{event:u,chainId:p}})},this.disconnect=async r=>{await this.isInitialized(),await this.isValidDisconnect(r);const{topic:o}=r;if(this.client.session.keys.includes(o))await this.sendRequest({topic:o,method:"wc_sessionDelete",params:Wt("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:o,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(o))await this.client.core.pairing.disconnect({topic:o});else{const{message:u}=Te("MISMATCHED_TOPIC",`Session or pairing topic not found: ${o}`);throw new Error(u)}},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(o=>Zg(o,r))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const o=this.client.core.pairing.pairings.get(r.pairingTopic),u=this.client.core.pairing.pairings.getAll().filter(p=>{var D,F;return((D=p.peerMetadata)==null?void 0:D.url)&&((F=p.peerMetadata)==null?void 0:F.url)===r.peer.metadata.url&&p.topic&&p.topic!==o.topic});if(u.length===0)return;this.client.logger.info(`Cleaning up ${u.length} duplicate pairing(s)`),await Promise.all(u.map(p=>this.client.core.pairing.disconnect({topic:p.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(o){this.client.logger.error(o)}},this.deleteSession=async r=>{const{topic:o,expirerHasDeleted:u=!1,emitEvent:p=!0,id:D=0}=r,{self:F}=this.client.session.get(o);await this.client.core.relayer.unsubscribe(o),await this.client.session.delete(o,Wt("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(F.publicKey)&&await this.client.core.crypto.deleteKeyPair(F.publicKey),this.client.core.crypto.keychain.has(o)&&await this.client.core.crypto.deleteSymKey(o),u||this.client.core.expirer.del(o),this.client.core.storage.removeItem(Wl).catch(G=>this.client.logger.warn(G)),this.getPendingSessionRequests().forEach(G=>{G.topic===o&&this.deletePendingSessionRequest(G.id,Wt("USER_DISCONNECTED"))}),p&&this.client.events.emit("session_delete",{id:D,topic:o})},this.deleteProposal=async(r,o)=>{await Promise.all([this.client.proposal.delete(r,Wt("USER_DISCONNECTED")),o?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,o,u=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,o),u?Promise.resolve():this.client.core.expirer.del(r)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(p=>p.id!==r),u&&(this.sessionRequestQueue.state=kn.idle,this.client.events.emit("session_request_expire",{id:r}))},this.setExpiry=async(r,o)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:o}),this.client.core.expirer.set(r,o)},this.setProposal=async(r,o)=>{await this.client.proposal.set(r,o),this.client.core.expirer.set(r,Xr(Gn.wc_sessionPropose.req.ttl))},this.setPendingSessionRequest=async r=>{const{id:o,topic:u,params:p,verifyContext:D}=r,F=p.request.expiryTimestamp||Xr(Gn.wc_sessionRequest.req.ttl);await this.client.pendingRequest.set(o,{id:o,topic:u,params:p,verifyContext:D}),F&&this.client.core.expirer.set(o,F)},this.sendRequest=async r=>{const{topic:o,method:u,params:p,expiry:D,relayRpcId:F,clientRpcId:G,throwOnFailedPublish:U}=r,te=os(u,p,G);if(Zi()&&N_.includes(u)){const ze=Qi(JSON.stringify(te));this.client.core.verify.register({attestationId:ze})}const oe=await this.client.core.crypto.encode(o,te),_e=Gn[u].req;return D&&(_e.ttl=D),F&&(_e.id=F),this.client.core.history.set(o,te),U?(_e.internal=cs(jr({},_e.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(o,oe,_e)):this.client.core.relayer.publish(o,oe,_e).catch(ze=>this.client.logger.error(ze)),te.id},this.sendResult=async r=>{const{id:o,topic:u,result:p,throwOnFailedPublish:D}=r,F=Ao(o,p),G=await this.client.core.crypto.encode(u,F),U=await this.client.core.history.get(u,o),te=Gn[U.request.method].res;D?(te.internal=cs(jr({},te.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(u,G,te)):this.client.core.relayer.publish(u,G,te).catch(oe=>this.client.logger.error(oe)),await this.client.core.history.resolve(F)},this.sendError=async(r,o,u)=>{const p=Ro(r,u),D=await this.client.core.crypto.encode(o,p),F=await this.client.core.history.get(o,r),G=Gn[F.request.method].res;this.client.core.relayer.publish(o,D,G),await this.client.core.history.resolve(p)},this.cleanup=async()=>{const r=[],o=[];this.client.session.getAll().forEach(u=>{let p=!1;hi(u.expiry)&&(p=!0),this.client.core.crypto.keychain.has(u.topic)||(p=!0),p&&r.push(u.topic)}),this.client.proposal.getAll().forEach(u=>{hi(u.expiryTimestamp)&&o.push(u.id)}),await Promise.all([...r.map(u=>this.deleteSession({topic:u})),...o.map(u=>this.deleteProposal(u))])},this.onRelayEventRequest=async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===kn.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=kn.active;const r=this.requestQueue.queue.shift();if(r)try{this.processRequest(r),await new Promise(o=>setTimeout(o,300))}catch(o){this.client.logger.warn(o)}}this.requestQueue.state=kn.idle},this.processRequest=r=>{const{topic:o,payload:u}=r,p=u.method;switch(p){case"wc_sessionPropose":return this.onSessionProposeRequest(o,u);case"wc_sessionSettle":return this.onSessionSettleRequest(o,u);case"wc_sessionUpdate":return this.onSessionUpdateRequest(o,u);case"wc_sessionExtend":return this.onSessionExtendRequest(o,u);case"wc_sessionPing":return this.onSessionPingRequest(o,u);case"wc_sessionDelete":return this.onSessionDeleteRequest(o,u);case"wc_sessionRequest":return this.onSessionRequest(o,u);case"wc_sessionEvent":return this.onSessionEventRequest(o,u);default:return this.client.logger.info(`Unsupported request method ${p}`)}},this.onRelayEventResponse=async r=>{const{topic:o,payload:u}=r,p=(await this.client.core.history.get(o,u.id)).request.method;switch(p){case"wc_sessionPropose":return this.onSessionProposeResponse(o,u);case"wc_sessionSettle":return this.onSessionSettleResponse(o,u);case"wc_sessionUpdate":return this.onSessionUpdateResponse(o,u);case"wc_sessionExtend":return this.onSessionExtendResponse(o,u);case"wc_sessionPing":return this.onSessionPingResponse(o,u);case"wc_sessionRequest":return this.onSessionRequestResponse(o,u);default:return this.client.logger.info(`Unsupported response method ${p}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:o}=r,{message:u}=Te("MISSING_OR_INVALID",`Decoded payload on topic ${o} is not identifiable as a JSON-RPC request or a response.`);throw new Error(u)},this.onSessionProposeRequest=async(r,o)=>{const{params:u,id:p}=o;try{this.isValidConnect(jr({},o.params));const D=u.expiryTimestamp||Xr(Gn.wc_sessionPropose.req.ttl),F=jr({id:p,pairingTopic:r,expiryTimestamp:D},u);await this.setProposal(p,F);const G=Qi(JSON.stringify(o)),U=await this.getVerifyContext(G,F.proposer.metadata);this.client.events.emit("session_proposal",{id:p,params:F,verifyContext:U})}catch(D){await this.sendError(p,r,D),this.client.logger.error(D)}},this.onSessionProposeResponse=async(r,o)=>{const{id:u}=o;if(Vn(o)){const{result:p}=o;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:p});const D=this.client.proposal.get(u);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:D});const F=D.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:F});const G=p.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:G});const U=await this.client.core.crypto.generateSharedKey(F,G);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:U});const te=await this.client.core.relayer.subscribe(U);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:te}),await this.client.core.pairing.activate({topic:r})}else En(o)&&(await this.client.proposal.delete(u,Wt("USER_DISCONNECTED")),this.events.emit(sr("session_connect"),{error:o.error}))},this.onSessionSettleRequest=async(r,o)=>{const{id:u,params:p}=o;try{this.isValidSessionSettleRequest(p);const{relay:D,controller:F,expiry:G,namespaces:U,sessionProperties:te,pairingTopic:oe}=o.params,_e=jr({topic:r,relay:D,expiry:G,namespaces:U,acknowledged:!0,pairingTopic:oe,requiredNamespaces:{},optionalNamespaces:{},controller:F.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:F.publicKey,metadata:F.metadata}},te&&{sessionProperties:te});await this.sendResult({id:o.id,topic:r,result:!0}),this.events.emit(sr("session_connect"),{session:_e}),this.cleanupDuplicatePairings(_e)}catch(D){await this.sendError(u,r,D),this.client.logger.error(D)}},this.onSessionSettleResponse=async(r,o)=>{const{id:u}=o;Vn(o)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(sr("session_approve",u),{})):En(o)&&(await this.client.session.delete(r,Wt("USER_DISCONNECTED")),this.events.emit(sr("session_approve",u),{error:o.error}))},this.onSessionUpdateRequest=async(r,o)=>{const{params:u,id:p}=o;try{const D=`${r}_session_update`,F=Io.get(D);if(F&&this.isRequestOutOfSync(F,p)){this.client.logger.info(`Discarding out of sync request - ${p}`);return}this.isValidUpdate(jr({topic:r},u)),await this.client.session.update(r,{namespaces:u.namespaces}),await this.sendResult({id:p,topic:r,result:!0}),this.client.events.emit("session_update",{id:p,topic:r,params:u}),Io.set(D,p)}catch(D){await this.sendError(p,r,D),this.client.logger.error(D)}},this.isRequestOutOfSync=(r,o)=>parseInt(o.toString().slice(0,-3))<=parseInt(r.toString().slice(0,-3)),this.onSessionUpdateResponse=(r,o)=>{const{id:u}=o;Vn(o)?this.events.emit(sr("session_update",u),{}):En(o)&&this.events.emit(sr("session_update",u),{error:o.error})},this.onSessionExtendRequest=async(r,o)=>{const{id:u}=o;try{this.isValidExtend({topic:r}),await this.setExpiry(r,Xr(Uo)),await this.sendResult({id:u,topic:r,result:!0}),this.client.events.emit("session_extend",{id:u,topic:r})}catch(p){await this.sendError(u,r,p),this.client.logger.error(p)}},this.onSessionExtendResponse=(r,o)=>{const{id:u}=o;Vn(o)?this.events.emit(sr("session_extend",u),{}):En(o)&&this.events.emit(sr("session_extend",u),{error:o.error})},this.onSessionPingRequest=async(r,o)=>{const{id:u}=o;try{this.isValidPing({topic:r}),await this.sendResult({id:u,topic:r,result:!0}),this.client.events.emit("session_ping",{id:u,topic:r})}catch(p){await this.sendError(u,r,p),this.client.logger.error(p)}},this.onSessionPingResponse=(r,o)=>{const{id:u}=o;setTimeout(()=>{Vn(o)?this.events.emit(sr("session_ping",u),{}):En(o)&&this.events.emit(sr("session_ping",u),{error:o.error})},500)},this.onSessionDeleteRequest=async(r,o)=>{const{id:u}=o;try{this.isValidDisconnect({topic:r,reason:o.params}),await Promise.all([new Promise(p=>{this.client.core.relayer.once(Ar.publish,async()=>{p(await this.deleteSession({topic:r,id:u}))})}),this.sendResult({id:u,topic:r,result:!0}),this.cleanupPendingSentRequestsForTopic({topic:r,error:Wt("USER_DISCONNECTED")})])}catch(p){this.client.logger.error(p)}},this.onSessionRequest=async(r,o)=>{const{id:u,params:p}=o;try{this.isValidRequest(jr({topic:r},p));const D=Qi(JSON.stringify(os("wc_sessionRequest",p,u))),F=this.client.session.get(r),G=await this.getVerifyContext(D,F.peer.metadata),U={id:u,topic:r,params:p,verifyContext:G};await this.setPendingSessionRequest(U),this.addSessionRequestToSessionRequestQueue(U),this.processSessionRequestQueue()}catch(D){await this.sendError(u,r,D),this.client.logger.error(D)}},this.onSessionRequestResponse=(r,o)=>{const{id:u}=o;Vn(o)?this.events.emit(sr("session_request",u),{result:o.result}):En(o)&&this.events.emit(sr("session_request",u),{error:o.error})},this.onSessionEventRequest=async(r,o)=>{const{id:u,params:p}=o;try{const D=`${r}_session_event_${p.event.name}`,F=Io.get(D);if(F&&this.isRequestOutOfSync(F,u)){this.client.logger.info(`Discarding out of sync request - ${u}`);return}this.isValidEmit(jr({topic:r},p)),this.client.events.emit("session_event",{id:u,topic:r,params:p}),Io.set(D,u)}catch(D){await this.sendError(u,r,D),this.client.logger.error(D)}},this.addSessionRequestToSessionRequestQueue=r=>{this.sessionRequestQueue.queue.push(r)},this.cleanupAfterResponse=r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=kn.idle,this.processSessionRequestQueue()},(0,Le.toMiliseconds)(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=({topic:r,error:o})=>{const u=this.client.core.history.pending;u.length>0&&u.filter(p=>p.topic===r&&p.request.method==="wc_sessionRequest").forEach(p=>{this.events.emit(sr("session_request",p.request.id),{error:o})})},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===kn.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=kn.active,this.client.events.emit("session_request",r)}catch(o){this.client.logger.error(o)}},this.onPairingCreated=r=>{if(r.active)return;const o=this.client.proposal.getAll().find(u=>u.pairingTopic===r.topic);o&&this.onSessionProposeRequest(r.topic,os("wc_sessionPropose",{requiredNamespaces:o.requiredNamespaces,optionalNamespaces:o.optionalNamespaces,relays:o.relays,proposer:o.proposer,sessionProperties:o.sessionProperties},o.id))},this.isValidConnect=async r=>{if(!Hr(r)){const{message:G}=Te("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(G)}const{pairingTopic:o,requiredNamespaces:u,optionalNamespaces:p,sessionProperties:D,relays:F}=r;if(Ur(o)||await this.isValidPairingTopic(o),!l0(F,!0)){const{message:G}=Te("MISSING_OR_INVALID",`connect() relays: ${F}`);throw new Error(G)}!Ur(u)&&is(u)!==0&&this.validateNamespaces(u,"requiredNamespaces"),!Ur(p)&&is(p)!==0&&this.validateNamespaces(p,"optionalNamespaces"),Ur(D)||this.validateSessionProps(D,"sessionProperties")},this.validateNamespaces=(r,o)=>{const u=h0(r,"connect()",o);if(u)throw new Error(u.message)},this.isValidApprove=async r=>{if(!Hr(r))throw new Error(Te("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:o,namespaces:u,relayProtocol:p,sessionProperties:D}=r;await this.isValidProposalId(o);const F=this.client.proposal.get(o),G=So(u,"approve()");if(G)throw new Error(G.message);const U=fc(F.requiredNamespaces,u,"approve()");if(U)throw new Error(U.message);if(!br(p,!0)){const{message:te}=Te("MISSING_OR_INVALID",`approve() relayProtocol: ${p}`);throw new Error(te)}Ur(D)||this.validateSessionProps(D,"sessionProperties")},this.isValidReject=async r=>{if(!Hr(r)){const{message:p}=Te("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(p)}const{id:o,reason:u}=r;if(await this.isValidProposalId(o),!d0(u)){const{message:p}=Te("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(u)}`);throw new Error(p)}},this.isValidSessionSettleRequest=r=>{if(!Hr(r)){const{message:U}=Te("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(U)}const{relay:o,controller:u,namespaces:p,expiry:D}=r;if(!jh(o)){const{message:U}=Te("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(U)}const F=i0(u,"onSessionSettleRequest()");if(F)throw new Error(F.message);const G=So(p,"onSessionSettleRequest()");if(G)throw new Error(G.message);if(hi(D)){const{message:U}=Te("EXPIRED","onSessionSettleRequest()");throw new Error(U)}},this.isValidUpdate=async r=>{if(!Hr(r)){const{message:G}=Te("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(G)}const{topic:o,namespaces:u}=r;await this.isValidSessionTopic(o);const p=this.client.session.get(o),D=So(u,"update()");if(D)throw new Error(D.message);const F=fc(p.requiredNamespaces,u,"update()");if(F)throw new Error(F.message)},this.isValidExtend=async r=>{if(!Hr(r)){const{message:u}=Te("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(u)}const{topic:o}=r;await this.isValidSessionTopic(o)},this.isValidRequest=async r=>{if(!Hr(r)){const{message:G}=Te("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(G)}const{topic:o,request:u,chainId:p,expiry:D}=r;await this.isValidSessionTopic(o);const{namespaces:F}=this.client.session.get(o);if(!Lh(F,p)){const{message:G}=Te("MISSING_OR_INVALID",`request() chainId: ${p}`);throw new Error(G)}if(!p0(u)){const{message:G}=Te("MISSING_OR_INVALID",`request() ${JSON.stringify(u)}`);throw new Error(G)}if(!v0(F,p,u.method)){const{message:G}=Te("MISSING_OR_INVALID",`request() method: ${u.method}`);throw new Error(G)}if(D&&!b0(D,Tc)){const{message:G}=Te("MISSING_OR_INVALID",`request() expiry: ${D}. Expiry must be a number (in seconds) between ${Tc.min} and ${Tc.max}`);throw new Error(G)}},this.isValidRespond=async r=>{var o;if(!Hr(r)){const{message:D}=Te("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(D)}const{topic:u,response:p}=r;try{await this.isValidSessionTopic(u)}catch(D){throw(o=r==null?void 0:r.response)!=null&&o.id&&this.cleanupAfterResponse(r),D}if(!g0(p)){const{message:D}=Te("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(p)}`);throw new Error(D)}},this.isValidPing=async r=>{if(!Hr(r)){const{message:u}=Te("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(u)}const{topic:o}=r;await this.isValidSessionOrPairingTopic(o)},this.isValidEmit=async r=>{if(!Hr(r)){const{message:F}=Te("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(F)}const{topic:o,event:u,chainId:p}=r;await this.isValidSessionTopic(o);const{namespaces:D}=this.client.session.get(o);if(!Lh(D,p)){const{message:F}=Te("MISSING_OR_INVALID",`emit() chainId: ${p}`);throw new Error(F)}if(!y0(u)){const{message:F}=Te("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(u)}`);throw new Error(F)}if(!m0(D,p,u.name)){const{message:F}=Te("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(u)}`);throw new Error(F)}},this.isValidDisconnect=async r=>{if(!Hr(r)){const{message:u}=Te("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(u)}const{topic:o}=r;await this.isValidSessionOrPairingTopic(o)},this.getVerifyContext=async(r,o)=>{const u={verified:{verifyUrl:o.verifyUrl||as,validation:"UNKNOWN",origin:o.url||""}};try{const p=await this.client.core.verify.resolve({attestationId:r,verifyUrl:o.verifyUrl});p&&(u.verified.origin=p.origin,u.verified.isScam=p.isScam,u.verified.validation=p.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(p){this.client.logger.info(p)}return this.client.logger.info(`Verify context: ${JSON.stringify(u)}`),u},this.validateSessionProps=(r,o)=>{Object.values(r).forEach(u=>{if(!br(u,!1)){const{message:p}=Te("MISSING_OR_INVALID",`${o} must be in Record<string, string> format. Received: ${JSON.stringify(u)}`);throw new Error(p)}})}}async isInitialized(){if(!this.initialized){const{message:e}=Te("NOT_INITIALIZED",this.name);throw new Error(e)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Ar.message,async e=>{const{topic:r,message:o}=e;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(o)))return;const u=await this.client.core.crypto.decode(r,o);try{bc(u)?(this.client.core.history.set(r,u),this.onRelayEventRequest({topic:r,payload:u})):To(u)?(await this.client.core.history.resolve(u),await this.onRelayEventResponse({topic:r,payload:u}),this.client.core.history.delete(r,u.id)):this.onRelayEventUnknownPayload({topic:r,payload:u})}catch(p){this.client.logger.error(p)}})}registerExpirerEvents(){this.client.core.expirer.on(un.expired,async e=>{const{topic:r,id:o}=Oh(e.target);if(o&&this.client.pendingRequest.keys.includes(o))return await this.deletePendingSessionRequest(o,Te("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession({topic:r,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:r})):o&&(await this.deleteProposal(o,!0),this.client.events.emit("proposal_expire",{id:o}))})}registerPairingEvents(){this.client.core.pairing.events.on(Ms.create,e=>this.onPairingCreated(e))}isValidPairingTopic(e){if(!br(e,!1)){const{message:r}=Te("MISSING_OR_INVALID",`pairing topic should be a string: ${e}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(e)){const{message:r}=Te("NO_MATCHING_KEY",`pairing topic doesn't exist: ${e}`);throw new Error(r)}if(hi(this.client.core.pairing.pairings.get(e).expiry)){const{message:r}=Te("EXPIRED",`pairing topic: ${e}`);throw new Error(r)}}async isValidSessionTopic(e){if(!br(e,!1)){const{message:r}=Te("MISSING_OR_INVALID",`session topic should be a string: ${e}`);throw new Error(r)}if(!this.client.session.keys.includes(e)){const{message:r}=Te("NO_MATCHING_KEY",`session topic doesn't exist: ${e}`);throw new Error(r)}if(hi(this.client.session.get(e).expiry)){await this.deleteSession({topic:e});const{message:r}=Te("EXPIRED",`session topic: ${e}`);throw new Error(r)}if(!this.client.core.crypto.keychain.has(e)){const{message:r}=Te("MISSING_OR_INVALID",`session topic does not exist in keychain: ${e}`);throw await this.deleteSession({topic:e}),new Error(r)}}async isValidSessionOrPairingTopic(e){if(this.client.session.keys.includes(e))await this.isValidSessionTopic(e);else if(this.client.core.pairing.pairings.keys.includes(e))this.isValidPairingTopic(e);else if(br(e,!1)){const{message:r}=Te("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${e}`);throw new Error(r)}else{const{message:r}=Te("MISSING_OR_INVALID",`session or pairing topic should be a string: ${e}`);throw new Error(r)}}async isValidProposalId(e){if(!f0(e)){const{message:r}=Te("MISSING_OR_INVALID",`proposal id should be a number: ${e}`);throw new Error(r)}if(!this.client.proposal.keys.includes(e)){const{message:r}=Te("NO_MATCHING_KEY",`proposal id doesn't exist: ${e}`);throw new Error(r)}if(hi(this.client.proposal.get(e).expiryTimestamp)){await this.deleteProposal(e);const{message:r}=Te("EXPIRED",`proposal id: ${e}`);throw new Error(r)}}}class z_ extends Fo{constructor(e,r){super(e,r,C_,Ac),this.core=e,this.logger=r}}class $_ extends Fo{constructor(e,r){super(e,r,A_,Ac),this.core=e,this.logger=r}}class H_ extends Fo{constructor(e,r){super(e,r,T_,Ac,o=>o.id),this.core=e,this.logger=r}}class Nc extends yy{constructor(e){super(e),this.protocol=Kl,this.version=Vl,this.name=Rc.name,this.events=new fe.EventEmitter,this.on=(o,u)=>this.events.on(o,u),this.once=(o,u)=>this.events.once(o,u),this.off=(o,u)=>this.events.off(o,u),this.removeListener=(o,u)=>this.events.removeListener(o,u),this.removeAllListeners=o=>this.events.removeAllListeners(o),this.connect=async o=>{try{return await this.engine.connect(o)}catch(u){throw this.logger.error(u.message),u}},this.pair=async o=>{try{return await this.engine.pair(o)}catch(u){throw this.logger.error(u.message),u}},this.approve=async o=>{try{return await this.engine.approve(o)}catch(u){throw this.logger.error(u.message),u}},this.reject=async o=>{try{return await this.engine.reject(o)}catch(u){throw this.logger.error(u.message),u}},this.update=async o=>{try{return await this.engine.update(o)}catch(u){throw this.logger.error(u.message),u}},this.extend=async o=>{try{return await this.engine.extend(o)}catch(u){throw this.logger.error(u.message),u}},this.request=async o=>{try{return await this.engine.request(o)}catch(u){throw this.logger.error(u.message),u}},this.respond=async o=>{try{return await this.engine.respond(o)}catch(u){throw this.logger.error(u.message),u}},this.ping=async o=>{try{return await this.engine.ping(o)}catch(u){throw this.logger.error(u.message),u}},this.emit=async o=>{try{return await this.engine.emit(o)}catch(u){throw this.logger.error(u.message),u}},this.disconnect=async o=>{try{return await this.engine.disconnect(o)}catch(u){throw this.logger.error(u.message),u}},this.find=o=>{try{return this.engine.find(o)}catch(u){throw this.logger.error(u.message),u}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(o){throw this.logger.error(o.message),o}},this.name=(e==null?void 0:e.name)||Rc.name,this.metadata=(e==null?void 0:e.metadata)||vg();const r=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:(0,Dt.pino)((0,Dt.getDefaultLoggerOptions)({level:(e==null?void 0:e.logger)||Rc.logger}));this.core=(e==null?void 0:e.core)||new P_(e),this.logger=(0,Dt.generateChildLogger)(r,this.name),this.session=new $_(this.core,this.logger),this.proposal=new z_(this.core,this.logger),this.pendingRequest=new H_(this.core,this.logger),this.engine=new B_(this)}static async init(e){const r=new Nc(e);return await r.initialize(),r}get context(){return(0,Dt.getLoggerContext)(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(e){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(e.message),e}}}const FI=null,UI=null;var K_=C(54098),Yl=C.n(K_);const Ql={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"},Xl=10;class Zl{constructor(e,r=!1){if(this.url=e,this.disableProviderPing=r,this.events=new fe.EventEmitter,this.isAvailable=!1,this.registering=!1,!ol(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);this.url=e,this.disableProviderPing=r}get connected(){return this.isAvailable}get connecting(){return this.registering}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}off(e,r){this.events.off(e,r)}removeListener(e,r){this.events.removeListener(e,r)}async open(e=this.url){await this.register(e)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(e,r){this.isAvailable||await this.register();try{const o=Ai(e),p=await(await Yl()(this.url,Object.assign(Object.assign({},Ql),{body:o}))).json();this.onPayload({data:p})}catch(o){this.onError(e.id,o)}}async register(e=this.url){if(!ol(e))throw new Error(`Provided URL is not compatible with HTTP connection: ${e}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((o,u)=>{this.events.once("register_error",p=>{this.resetMaxListeners(),u(p)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return u(new Error("HTTP connection is missing or invalid"));o()})})}this.url=e,this.registering=!0;try{if(!this.disableProviderPing){const r=Ai({id:1,jsonrpc:"2.0",method:"test",params:[]});await Yl()(e,Object.assign(Object.assign({},Ql),{body:r}))}this.onOpen()}catch(r){const o=this.parseError(r);throw this.events.emit("register_error",o),this.onClose(),o}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(e){if(typeof e.data>"u")return;const r=typeof e.data=="string"?Ns(e.data):e.data;this.events.emit("payload",r)}onError(e,r){const o=this.parseError(r),u=o.message||o.toString(),p=Ro(e,u);this.events.emit("payload",p)}parseError(e,r=this.url){return nl(e,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Xl&&this.events.setMaxListeners(Xl)}}var V_=Zl,Ri=V_;const ef="error",q_="wss://relay.walletconnect.com",W_="wc",G_="universal_provider",tf=`${W_}@2:${G_}:`,k_="https://rpc.walletconnect.com/v1/",Jn={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var zs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof C.g<"u"?C.g:typeof self<"u"?self:{},Fc={exports:{}};(function(s,e){(function(){var r,o="4.17.21",u=200,p="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",D="Expected a function",F="Invalid `variable` option passed into `_.template`",G="__lodash_hash_undefined__",U=500,te="__lodash_placeholder__",oe=1,_e=2,ze=4,ve=1,Me=2,Ge=1,Xe=2,Rt=4,ct=8,Ze=16,Je=32,Ct=64,At=128,Ht=256,Zr=512,R1=30,T1="...",N1=800,F1=16,pf=1,U1=2,j1=3,Ni=1/0,di=9007199254740991,L1=17976931348623157e292,Bo=0/0,jn=4294967295,M1=jn-1,B1=jn>>>1,z1=[["ary",At],["bind",Ge],["bindKey",Xe],["curry",ct],["curryRight",Ze],["flip",Zr],["partial",Je],["partialRight",Ct],["rearg",Ht]],us="[object Arguments]",zo="[object Array]",$1="[object AsyncFunction]",Hs="[object Boolean]",Ks="[object Date]",H1="[object DOMException]",$o="[object Error]",Ho="[object Function]",gf="[object GeneratorFunction]",Sn="[object Map]",Vs="[object Number]",K1="[object Null]",Yn="[object Object]",yf="[object Promise]",V1="[object Proxy]",qs="[object RegExp]",In="[object Set]",Ws="[object String]",Ko="[object Symbol]",q1="[object Undefined]",Gs="[object WeakMap]",W1="[object WeakSet]",ks="[object ArrayBuffer]",hs="[object DataView]",Kc="[object Float32Array]",Vc="[object Float64Array]",qc="[object Int8Array]",Wc="[object Int16Array]",Gc="[object Int32Array]",kc="[object Uint8Array]",Jc="[object Uint8ClampedArray]",Yc="[object Uint16Array]",Qc="[object Uint32Array]",G1=/\b__p \+= '';/g,k1=/\b(__p \+=) '' \+/g,J1=/(__e\(.*?\)|\b__t\)) \+\n'';/g,vf=/&(?:amp|lt|gt|quot|#39);/g,mf=/[&<>"']/g,Y1=RegExp(vf.source),Q1=RegExp(mf.source),X1=/<%-([\s\S]+?)%>/g,Z1=/<%([\s\S]+?)%>/g,_f=/<%=([\s\S]+?)%>/g,ew=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,tw=/^\w*$/,rw=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Xc=/[\\^$.*+?()[\]{}|]/g,nw=RegExp(Xc.source),Zc=/^\s+/,iw=/\s/,sw=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ow=/\{\n\/\* \[wrapped with (.+)\] \*/,aw=/,? & /,cw=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,uw=/[()=,{}\[\]\/\s]/,hw=/\\(\\)?/g,lw=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,wf=/\w*$/,fw=/^[-+]0x[0-9a-f]+$/i,dw=/^0b[01]+$/i,pw=/^\[object .+?Constructor\]$/,gw=/^0o[0-7]+$/i,yw=/^(?:0|[1-9]\d*)$/,vw=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Vo=/($^)/,mw=/['\n\r\u2028\u2029\\]/g,qo="\\ud800-\\udfff",_w="\\u0300-\\u036f",ww="\\ufe20-\\ufe2f",bw="\\u20d0-\\u20ff",bf=_w+ww+bw,Ef="\\u2700-\\u27bf",Df="a-z\\xdf-\\xf6\\xf8-\\xff",Ew="\\xac\\xb1\\xd7\\xf7",Dw="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Sw="\\u2000-\\u206f",Iw=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Sf="A-Z\\xc0-\\xd6\\xd8-\\xde",If="\\ufe0e\\ufe0f",xf=Ew+Dw+Sw+Iw,eu="['\u2019]",xw="["+qo+"]",Of="["+xf+"]",Wo="["+bf+"]",Pf="\\d+",Ow="["+Ef+"]",Cf="["+Df+"]",Af="[^"+qo+xf+Pf+Ef+Df+Sf+"]",tu="\\ud83c[\\udffb-\\udfff]",Pw="(?:"+Wo+"|"+tu+")",Rf="[^"+qo+"]",ru="(?:\\ud83c[\\udde6-\\uddff]){2}",nu="[\\ud800-\\udbff][\\udc00-\\udfff]",ls="["+Sf+"]",Tf="\\u200d",Nf="(?:"+Cf+"|"+Af+")",Cw="(?:"+ls+"|"+Af+")",Ff="(?:"+eu+"(?:d|ll|m|re|s|t|ve))?",Uf="(?:"+eu+"(?:D|LL|M|RE|S|T|VE))?",jf=Pw+"?",Lf="["+If+"]?",Aw="(?:"+Tf+"(?:"+[Rf,ru,nu].join("|")+")"+Lf+jf+")*",Rw="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Tw="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Mf=Lf+jf+Aw,Nw="(?:"+[Ow,ru,nu].join("|")+")"+Mf,Fw="(?:"+[Rf+Wo+"?",Wo,ru,nu,xw].join("|")+")",Uw=RegExp(eu,"g"),jw=RegExp(Wo,"g"),iu=RegExp(tu+"(?="+tu+")|"+Fw+Mf,"g"),Lw=RegExp([ls+"?"+Cf+"+"+Ff+"(?="+[Of,ls,"$"].join("|")+")",Cw+"+"+Uf+"(?="+[Of,ls+Nf,"$"].join("|")+")",ls+"?"+Nf+"+"+Ff,ls+"+"+Uf,Tw,Rw,Pf,Nw].join("|"),"g"),Mw=RegExp("["+Tf+qo+bf+If+"]"),Bw=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,zw=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],$w=-1,Kt={};Kt[Kc]=Kt[Vc]=Kt[qc]=Kt[Wc]=Kt[Gc]=Kt[kc]=Kt[Jc]=Kt[Yc]=Kt[Qc]=!0,Kt[us]=Kt[zo]=Kt[ks]=Kt[Hs]=Kt[hs]=Kt[Ks]=Kt[$o]=Kt[Ho]=Kt[Sn]=Kt[Vs]=Kt[Yn]=Kt[qs]=Kt[In]=Kt[Ws]=Kt[Gs]=!1;var Bt={};Bt[us]=Bt[zo]=Bt[ks]=Bt[hs]=Bt[Hs]=Bt[Ks]=Bt[Kc]=Bt[Vc]=Bt[qc]=Bt[Wc]=Bt[Gc]=Bt[Sn]=Bt[Vs]=Bt[Yn]=Bt[qs]=Bt[In]=Bt[Ws]=Bt[Ko]=Bt[kc]=Bt[Jc]=Bt[Yc]=Bt[Qc]=!0,Bt[$o]=Bt[Ho]=Bt[Gs]=!1;var Hw={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Kw={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Vw={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},qw={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ww=parseFloat,Gw=parseInt,Bf=typeof zs=="object"&&zs&&zs.Object===Object&&zs,kw=typeof self=="object"&&self&&self.Object===Object&&self,Or=Bf||kw||Function("return this")(),su=e&&!e.nodeType&&e,Fi=su&&!0&&s&&!s.nodeType&&s,zf=Fi&&Fi.exports===su,ou=zf&&Bf.process,hn=function(){try{var Y=Fi&&Fi.require&&Fi.require("util").types;return Y||ou&&ou.binding&&ou.binding("util")}catch{}}(),$f=hn&&hn.isArrayBuffer,Hf=hn&&hn.isDate,Kf=hn&&hn.isMap,Vf=hn&&hn.isRegExp,qf=hn&&hn.isSet,Wf=hn&&hn.isTypedArray;function en(Y,me,de){switch(de.length){case 0:return Y.call(me);case 1:return Y.call(me,de[0]);case 2:return Y.call(me,de[0],de[1]);case 3:return Y.call(me,de[0],de[1],de[2])}return Y.apply(me,de)}function Jw(Y,me,de,He){for(var rt=-1,Nt=Y==null?0:Y.length;++rt<Nt;){var vr=Y[rt];me(He,vr,de(vr),Y)}return He}function ln(Y,me){for(var de=-1,He=Y==null?0:Y.length;++de<He&&me(Y[de],de,Y)!==!1;);return Y}function Yw(Y,me){for(var de=Y==null?0:Y.length;de--&&me(Y[de],de,Y)!==!1;);return Y}function Gf(Y,me){for(var de=-1,He=Y==null?0:Y.length;++de<He;)if(!me(Y[de],de,Y))return!1;return!0}function pi(Y,me){for(var de=-1,He=Y==null?0:Y.length,rt=0,Nt=[];++de<He;){var vr=Y[de];me(vr,de,Y)&&(Nt[rt++]=vr)}return Nt}function Go(Y,me){var de=Y==null?0:Y.length;return!!de&&fs(Y,me,0)>-1}function au(Y,me,de){for(var He=-1,rt=Y==null?0:Y.length;++He<rt;)if(de(me,Y[He]))return!0;return!1}function kt(Y,me){for(var de=-1,He=Y==null?0:Y.length,rt=Array(He);++de<He;)rt[de]=me(Y[de],de,Y);return rt}function gi(Y,me){for(var de=-1,He=me.length,rt=Y.length;++de<He;)Y[rt+de]=me[de];return Y}function cu(Y,me,de,He){var rt=-1,Nt=Y==null?0:Y.length;for(He&&Nt&&(de=Y[++rt]);++rt<Nt;)de=me(de,Y[rt],rt,Y);return de}function Qw(Y,me,de,He){var rt=Y==null?0:Y.length;for(He&&rt&&(de=Y[--rt]);rt--;)de=me(de,Y[rt],rt,Y);return de}function uu(Y,me){for(var de=-1,He=Y==null?0:Y.length;++de<He;)if(me(Y[de],de,Y))return!0;return!1}var Xw=hu("length");function Zw(Y){return Y.split("")}function eb(Y){return Y.match(cw)||[]}function kf(Y,me,de){var He;return de(Y,function(rt,Nt,vr){if(me(rt,Nt,vr))return He=Nt,!1}),He}function ko(Y,me,de,He){for(var rt=Y.length,Nt=de+(He?1:-1);He?Nt--:++Nt<rt;)if(me(Y[Nt],Nt,Y))return Nt;return-1}function fs(Y,me,de){return me===me?fb(Y,me,de):ko(Y,Jf,de)}function tb(Y,me,de,He){for(var rt=de-1,Nt=Y.length;++rt<Nt;)if(He(Y[rt],me))return rt;return-1}function Jf(Y){return Y!==Y}function Yf(Y,me){var de=Y==null?0:Y.length;return de?fu(Y,me)/de:Bo}function hu(Y){return function(me){return me==null?r:me[Y]}}function lu(Y){return function(me){return Y==null?r:Y[me]}}function Qf(Y,me,de,He,rt){return rt(Y,function(Nt,vr,Lt){de=He?(He=!1,Nt):me(de,Nt,vr,Lt)}),de}function rb(Y,me){var de=Y.length;for(Y.sort(me);de--;)Y[de]=Y[de].value;return Y}function fu(Y,me){for(var de,He=-1,rt=Y.length;++He<rt;){var Nt=me(Y[He]);Nt!==r&&(de=de===r?Nt:de+Nt)}return de}function du(Y,me){for(var de=-1,He=Array(Y);++de<Y;)He[de]=me(de);return He}function nb(Y,me){return kt(me,function(de){return[de,Y[de]]})}function Xf(Y){return Y&&Y.slice(0,rd(Y)+1).replace(Zc,"")}function tn(Y){return function(me){return Y(me)}}function pu(Y,me){return kt(me,function(de){return Y[de]})}function Js(Y,me){return Y.has(me)}function Zf(Y,me){for(var de=-1,He=Y.length;++de<He&&fs(me,Y[de],0)>-1;);return de}function ed(Y,me){for(var de=Y.length;de--&&fs(me,Y[de],0)>-1;);return de}function ib(Y,me){for(var de=Y.length,He=0;de--;)Y[de]===me&&++He;return He}var sb=lu(Hw),ob=lu(Kw);function ab(Y){return"\\"+qw[Y]}function cb(Y,me){return Y==null?r:Y[me]}function ds(Y){return Mw.test(Y)}function ub(Y){return Bw.test(Y)}function hb(Y){for(var me,de=[];!(me=Y.next()).done;)de.push(me.value);return de}function gu(Y){var me=-1,de=Array(Y.size);return Y.forEach(function(He,rt){de[++me]=[rt,He]}),de}function td(Y,me){return function(de){return Y(me(de))}}function yi(Y,me){for(var de=-1,He=Y.length,rt=0,Nt=[];++de<He;){var vr=Y[de];(vr===me||vr===te)&&(Y[de]=te,Nt[rt++]=de)}return Nt}function Jo(Y){var me=-1,de=Array(Y.size);return Y.forEach(function(He){de[++me]=He}),de}function lb(Y){var me=-1,de=Array(Y.size);return Y.forEach(function(He){de[++me]=[He,He]}),de}function fb(Y,me,de){for(var He=de-1,rt=Y.length;++He<rt;)if(Y[He]===me)return He;return-1}function db(Y,me,de){for(var He=de+1;He--;)if(Y[He]===me)return He;return He}function ps(Y){return ds(Y)?gb(Y):Xw(Y)}function xn(Y){return ds(Y)?yb(Y):Zw(Y)}function rd(Y){for(var me=Y.length;me--&&iw.test(Y.charAt(me)););return me}var pb=lu(Vw);function gb(Y){for(var me=iu.lastIndex=0;iu.test(Y);)++me;return me}function yb(Y){return Y.match(iu)||[]}function vb(Y){return Y.match(Lw)||[]}var mb=function Y(me){me=me==null?Or:gs.defaults(Or.Object(),me,gs.pick(Or,zw));var de=me.Array,He=me.Date,rt=me.Error,Nt=me.Function,vr=me.Math,Lt=me.Object,yu=me.RegExp,_b=me.String,fn=me.TypeError,Yo=de.prototype,wb=Nt.prototype,ys=Lt.prototype,Qo=me["__core-js_shared__"],Xo=wb.toString,Ut=ys.hasOwnProperty,bb=0,nd=function(){var t=/[^.]+$/.exec(Qo&&Qo.keys&&Qo.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Zo=ys.toString,Eb=Xo.call(Lt),Db=Or._,Sb=yu("^"+Xo.call(Ut).replace(Xc,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ea=zf?me.Buffer:r,vi=me.Symbol,ta=me.Uint8Array,id=ea?ea.allocUnsafe:r,ra=td(Lt.getPrototypeOf,Lt),sd=Lt.create,od=ys.propertyIsEnumerable,na=Yo.splice,ad=vi?vi.isConcatSpreadable:r,Ys=vi?vi.iterator:r,Ui=vi?vi.toStringTag:r,ia=function(){try{var t=zi(Lt,"defineProperty");return t({},"",{}),t}catch{}}(),Ib=me.clearTimeout!==Or.clearTimeout&&me.clearTimeout,xb=He&&He.now!==Or.Date.now&&He.now,Ob=me.setTimeout!==Or.setTimeout&&me.setTimeout,sa=vr.ceil,oa=vr.floor,vu=Lt.getOwnPropertySymbols,Pb=ea?ea.isBuffer:r,cd=me.isFinite,Cb=Yo.join,Ab=td(Lt.keys,Lt),mr=vr.max,Rr=vr.min,Rb=He.now,Tb=me.parseInt,ud=vr.random,Nb=Yo.reverse,mu=zi(me,"DataView"),Qs=zi(me,"Map"),_u=zi(me,"Promise"),vs=zi(me,"Set"),Xs=zi(me,"WeakMap"),Zs=zi(Lt,"create"),aa=Xs&&new Xs,ms={},Fb=$i(mu),Ub=$i(Qs),jb=$i(_u),Lb=$i(vs),Mb=$i(Xs),ca=vi?vi.prototype:r,eo=ca?ca.valueOf:r,hd=ca?ca.toString:r;function I(t){if(tr(t)&&!st(t)&&!(t instanceof bt)){if(t instanceof dn)return t;if(Ut.call(t,"__wrapped__"))return lp(t)}return new dn(t)}var _s=function(){function t(){}return function(n){if(!Yt(n))return{};if(sd)return sd(n);t.prototype=n;var a=new t;return t.prototype=r,a}}();function ua(){}function dn(t,n){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=r}I.templateSettings={escape:X1,evaluate:Z1,interpolate:_f,variable:"",imports:{_:I}},I.prototype=ua.prototype,I.prototype.constructor=I,dn.prototype=_s(ua.prototype),dn.prototype.constructor=dn;function bt(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=jn,this.__views__=[]}function Bb(){var t=new bt(this.__wrapped__);return t.__actions__=qr(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=qr(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=qr(this.__views__),t}function zb(){if(this.__filtered__){var t=new bt(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function $b(){var t=this.__wrapped__.value(),n=this.__dir__,a=st(t),l=n<0,b=a?t.length:0,O=ZE(0,b,this.__views__),M=O.start,K=O.end,ee=K-M,be=l?K:M-1,Ee=this.__iteratees__,Ie=Ee.length,je=0,Ve=Rr(ee,this.__takeCount__);if(!a||!l&&b==ee&&Ve==ee)return Fd(t,this.__actions__);var Ye=[];e:for(;ee--&&je<Ve;){be+=n;for(var ut=-1,Qe=t[be];++ut<Ie;){var mt=Ee[ut],St=mt.iteratee,sn=mt.type,Br=St(Qe);if(sn==U1)Qe=Br;else if(!Br){if(sn==pf)continue e;break e}}Ye[je++]=Qe}return Ye}bt.prototype=_s(ua.prototype),bt.prototype.constructor=bt;function ji(t){var n=-1,a=t==null?0:t.length;for(this.clear();++n<a;){var l=t[n];this.set(l[0],l[1])}}function Hb(){this.__data__=Zs?Zs(null):{},this.size=0}function Kb(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}function Vb(t){var n=this.__data__;if(Zs){var a=n[t];return a===G?r:a}return Ut.call(n,t)?n[t]:r}function qb(t){var n=this.__data__;return Zs?n[t]!==r:Ut.call(n,t)}function Wb(t,n){var a=this.__data__;return this.size+=this.has(t)?0:1,a[t]=Zs&&n===r?G:n,this}ji.prototype.clear=Hb,ji.prototype.delete=Kb,ji.prototype.get=Vb,ji.prototype.has=qb,ji.prototype.set=Wb;function Qn(t){var n=-1,a=t==null?0:t.length;for(this.clear();++n<a;){var l=t[n];this.set(l[0],l[1])}}function Gb(){this.__data__=[],this.size=0}function kb(t){var n=this.__data__,a=ha(n,t);if(a<0)return!1;var l=n.length-1;return a==l?n.pop():na.call(n,a,1),--this.size,!0}function Jb(t){var n=this.__data__,a=ha(n,t);return a<0?r:n[a][1]}function Yb(t){return ha(this.__data__,t)>-1}function Qb(t,n){var a=this.__data__,l=ha(a,t);return l<0?(++this.size,a.push([t,n])):a[l][1]=n,this}Qn.prototype.clear=Gb,Qn.prototype.delete=kb,Qn.prototype.get=Jb,Qn.prototype.has=Yb,Qn.prototype.set=Qb;function Xn(t){var n=-1,a=t==null?0:t.length;for(this.clear();++n<a;){var l=t[n];this.set(l[0],l[1])}}function Xb(){this.size=0,this.__data__={hash:new ji,map:new(Qs||Qn),string:new ji}}function Zb(t){var n=Ea(this,t).delete(t);return this.size-=n?1:0,n}function eE(t){return Ea(this,t).get(t)}function tE(t){return Ea(this,t).has(t)}function rE(t,n){var a=Ea(this,t),l=a.size;return a.set(t,n),this.size+=a.size==l?0:1,this}Xn.prototype.clear=Xb,Xn.prototype.delete=Zb,Xn.prototype.get=eE,Xn.prototype.has=tE,Xn.prototype.set=rE;function Li(t){var n=-1,a=t==null?0:t.length;for(this.__data__=new Xn;++n<a;)this.add(t[n])}function nE(t){return this.__data__.set(t,G),this}function iE(t){return this.__data__.has(t)}Li.prototype.add=Li.prototype.push=nE,Li.prototype.has=iE;function On(t){var n=this.__data__=new Qn(t);this.size=n.size}function sE(){this.__data__=new Qn,this.size=0}function oE(t){var n=this.__data__,a=n.delete(t);return this.size=n.size,a}function aE(t){return this.__data__.get(t)}function cE(t){return this.__data__.has(t)}function uE(t,n){var a=this.__data__;if(a instanceof Qn){var l=a.__data__;if(!Qs||l.length<u-1)return l.push([t,n]),this.size=++a.size,this;a=this.__data__=new Xn(l)}return a.set(t,n),this.size=a.size,this}On.prototype.clear=sE,On.prototype.delete=oE,On.prototype.get=aE,On.prototype.has=cE,On.prototype.set=uE;function ld(t,n){var a=st(t),l=!a&&Hi(t),b=!a&&!l&&Ei(t),O=!a&&!l&&!b&&Ds(t),M=a||l||b||O,K=M?du(t.length,_b):[],ee=K.length;for(var be in t)(n||Ut.call(t,be))&&!(M&&(be=="length"||b&&(be=="offset"||be=="parent")||O&&(be=="buffer"||be=="byteLength"||be=="byteOffset")||ri(be,ee)))&&K.push(be);return K}function fd(t){var n=t.length;return n?t[Au(0,n-1)]:r}function hE(t,n){return Da(qr(t),Mi(n,0,t.length))}function lE(t){return Da(qr(t))}function wu(t,n,a){(a!==r&&!Pn(t[n],a)||a===r&&!(n in t))&&Zn(t,n,a)}function to(t,n,a){var l=t[n];(!(Ut.call(t,n)&&Pn(l,a))||a===r&&!(n in t))&&Zn(t,n,a)}function ha(t,n){for(var a=t.length;a--;)if(Pn(t[a][0],n))return a;return-1}function fE(t,n,a,l){return mi(t,function(b,O,M){n(l,b,a(b),M)}),l}function dd(t,n){return t&&Mn(n,Dr(n),t)}function dE(t,n){return t&&Mn(n,Gr(n),t)}function Zn(t,n,a){n=="__proto__"&&ia?ia(t,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):t[n]=a}function bu(t,n){for(var a=-1,l=n.length,b=de(l),O=t==null;++a<l;)b[a]=O?r:th(t,n[a]);return b}function Mi(t,n,a){return t===t&&(a!==r&&(t=t<=a?t:a),n!==r&&(t=t>=n?t:n)),t}function pn(t,n,a,l,b,O){var M,K=n&oe,ee=n&_e,be=n&ze;if(a&&(M=b?a(t,l,b,O):a(t)),M!==r)return M;if(!Yt(t))return t;var Ee=st(t);if(Ee){if(M=t3(t),!K)return qr(t,M)}else{var Ie=Tr(t),je=Ie==Ho||Ie==gf;if(Ei(t))return Ld(t,K);if(Ie==Yn||Ie==us||je&&!b){if(M=ee||je?{}:rp(t),!K)return ee?VE(t,dE(M,t)):KE(t,dd(M,t))}else{if(!Bt[Ie])return b?t:{};M=r3(t,Ie,K)}}O||(O=new On);var Ve=O.get(t);if(Ve)return Ve;O.set(t,M),Rp(t)?t.forEach(function(Qe){M.add(pn(Qe,n,a,Qe,t,O))}):Cp(t)&&t.forEach(function(Qe,mt){M.set(mt,pn(Qe,n,a,mt,t,O))});var Ye=be?ee?$u:zu:ee?Gr:Dr,ut=Ee?r:Ye(t);return ln(ut||t,function(Qe,mt){ut&&(mt=Qe,Qe=t[mt]),to(M,mt,pn(Qe,n,a,mt,t,O))}),M}function pE(t){var n=Dr(t);return function(a){return pd(a,t,n)}}function pd(t,n,a){var l=a.length;if(t==null)return!l;for(t=Lt(t);l--;){var b=a[l],O=n[b],M=t[b];if(M===r&&!(b in t)||!O(M))return!1}return!0}function gd(t,n,a){if(typeof t!="function")throw new fn(D);return co(function(){t.apply(r,a)},n)}function ro(t,n,a,l){var b=-1,O=Go,M=!0,K=t.length,ee=[],be=n.length;if(!K)return ee;a&&(n=kt(n,tn(a))),l?(O=au,M=!1):n.length>=u&&(O=Js,M=!1,n=new Li(n));e:for(;++b<K;){var Ee=t[b],Ie=a==null?Ee:a(Ee);if(Ee=l||Ee!==0?Ee:0,M&&Ie===Ie){for(var je=be;je--;)if(n[je]===Ie)continue e;ee.push(Ee)}else O(n,Ie,l)||ee.push(Ee)}return ee}var mi=Hd(Ln),yd=Hd(Du,!0);function gE(t,n){var a=!0;return mi(t,function(l,b,O){return a=!!n(l,b,O),a}),a}function la(t,n,a){for(var l=-1,b=t.length;++l<b;){var O=t[l],M=n(O);if(M!=null&&(K===r?M===M&&!nn(M):a(M,K)))var K=M,ee=O}return ee}function yE(t,n,a,l){var b=t.length;for(a=ot(a),a<0&&(a=-a>b?0:b+a),l=l===r||l>b?b:ot(l),l<0&&(l+=b),l=a>l?0:Np(l);a<l;)t[a++]=n;return t}function vd(t,n){var a=[];return mi(t,function(l,b,O){n(l,b,O)&&a.push(l)}),a}function Pr(t,n,a,l,b){var O=-1,M=t.length;for(a||(a=i3),b||(b=[]);++O<M;){var K=t[O];n>0&&a(K)?n>1?Pr(K,n-1,a,l,b):gi(b,K):l||(b[b.length]=K)}return b}var Eu=Kd(),md=Kd(!0);function Ln(t,n){return t&&Eu(t,n,Dr)}function Du(t,n){return t&&md(t,n,Dr)}function fa(t,n){return pi(n,function(a){return ni(t[a])})}function Bi(t,n){n=wi(n,t);for(var a=0,l=n.length;t!=null&&a<l;)t=t[Bn(n[a++])];return a&&a==l?t:r}function _d(t,n,a){var l=n(t);return st(t)?l:gi(l,a(t))}function Lr(t){return t==null?t===r?q1:K1:Ui&&Ui in Lt(t)?XE(t):l3(t)}function Su(t,n){return t>n}function vE(t,n){return t!=null&&Ut.call(t,n)}function mE(t,n){return t!=null&&n in Lt(t)}function _E(t,n,a){return t>=Rr(n,a)&&t<mr(n,a)}function Iu(t,n,a){for(var l=a?au:Go,b=t[0].length,O=t.length,M=O,K=de(O),ee=1/0,be=[];M--;){var Ee=t[M];M&&n&&(Ee=kt(Ee,tn(n))),ee=Rr(Ee.length,ee),K[M]=!a&&(n||b>=120&&Ee.length>=120)?new Li(M&&Ee):r}Ee=t[0];var Ie=-1,je=K[0];e:for(;++Ie<b&&be.length<ee;){var Ve=Ee[Ie],Ye=n?n(Ve):Ve;if(Ve=a||Ve!==0?Ve:0,!(je?Js(je,Ye):l(be,Ye,a))){for(M=O;--M;){var ut=K[M];if(!(ut?Js(ut,Ye):l(t[M],Ye,a)))continue e}je&&je.push(Ye),be.push(Ve)}}return be}function wE(t,n,a,l){return Ln(t,function(b,O,M){n(l,a(b),O,M)}),l}function no(t,n,a){n=wi(n,t),t=op(t,n);var l=t==null?t:t[Bn(yn(n))];return l==null?r:en(l,t,a)}function wd(t){return tr(t)&&Lr(t)==us}function bE(t){return tr(t)&&Lr(t)==ks}function EE(t){return tr(t)&&Lr(t)==Ks}function io(t,n,a,l,b){return t===n?!0:t==null||n==null||!tr(t)&&!tr(n)?t!==t&&n!==n:DE(t,n,a,l,io,b)}function DE(t,n,a,l,b,O){var M=st(t),K=st(n),ee=M?zo:Tr(t),be=K?zo:Tr(n);ee=ee==us?Yn:ee,be=be==us?Yn:be;var Ee=ee==Yn,Ie=be==Yn,je=ee==be;if(je&&Ei(t)){if(!Ei(n))return!1;M=!0,Ee=!1}if(je&&!Ee)return O||(O=new On),M||Ds(t)?Zd(t,n,a,l,b,O):YE(t,n,ee,a,l,b,O);if(!(a&ve)){var Ve=Ee&&Ut.call(t,"__wrapped__"),Ye=Ie&&Ut.call(n,"__wrapped__");if(Ve||Ye){var ut=Ve?t.value():t,Qe=Ye?n.value():n;return O||(O=new On),b(ut,Qe,a,l,O)}}return je?(O||(O=new On),QE(t,n,a,l,b,O)):!1}function SE(t){return tr(t)&&Tr(t)==Sn}function xu(t,n,a,l){var b=a.length,O=b,M=!l;if(t==null)return!O;for(t=Lt(t);b--;){var K=a[b];if(M&&K[2]?K[1]!==t[K[0]]:!(K[0]in t))return!1}for(;++b<O;){K=a[b];var ee=K[0],be=t[ee],Ee=K[1];if(M&&K[2]){if(be===r&&!(ee in t))return!1}else{var Ie=new On;if(l)var je=l(be,Ee,ee,t,n,Ie);if(!(je===r?io(Ee,be,ve|Me,l,Ie):je))return!1}}return!0}function bd(t){if(!Yt(t)||o3(t))return!1;var n=ni(t)?Sb:pw;return n.test($i(t))}function IE(t){return tr(t)&&Lr(t)==qs}function xE(t){return tr(t)&&Tr(t)==In}function OE(t){return tr(t)&&Ca(t.length)&&!!Kt[Lr(t)]}function Ed(t){return typeof t=="function"?t:t==null?kr:typeof t=="object"?st(t)?Id(t[0],t[1]):Sd(t):Vp(t)}function Ou(t){if(!ao(t))return Ab(t);var n=[];for(var a in Lt(t))Ut.call(t,a)&&a!="constructor"&&n.push(a);return n}function PE(t){if(!Yt(t))return h3(t);var n=ao(t),a=[];for(var l in t)l=="constructor"&&(n||!Ut.call(t,l))||a.push(l);return a}function Pu(t,n){return t<n}function Dd(t,n){var a=-1,l=Wr(t)?de(t.length):[];return mi(t,function(b,O,M){l[++a]=n(b,O,M)}),l}function Sd(t){var n=Ku(t);return n.length==1&&n[0][2]?ip(n[0][0],n[0][1]):function(a){return a===t||xu(a,t,n)}}function Id(t,n){return qu(t)&&np(n)?ip(Bn(t),n):function(a){var l=th(a,t);return l===r&&l===n?rh(a,t):io(n,l,ve|Me)}}function da(t,n,a,l,b){t!==n&&Eu(n,function(O,M){if(b||(b=new On),Yt(O))CE(t,n,M,a,da,l,b);else{var K=l?l(Gu(t,M),O,M+"",t,n,b):r;K===r&&(K=O),wu(t,M,K)}},Gr)}function CE(t,n,a,l,b,O,M){var K=Gu(t,a),ee=Gu(n,a),be=M.get(ee);if(be){wu(t,a,be);return}var Ee=O?O(K,ee,a+"",t,n,M):r,Ie=Ee===r;if(Ie){var je=st(ee),Ve=!je&&Ei(ee),Ye=!je&&!Ve&&Ds(ee);Ee=ee,je||Ve||Ye?st(K)?Ee=K:or(K)?Ee=qr(K):Ve?(Ie=!1,Ee=Ld(ee,!0)):Ye?(Ie=!1,Ee=Md(ee,!0)):Ee=[]:uo(ee)||Hi(ee)?(Ee=K,Hi(K)?Ee=Fp(K):(!Yt(K)||ni(K))&&(Ee=rp(ee))):Ie=!1}Ie&&(M.set(ee,Ee),b(Ee,ee,l,O,M),M.delete(ee)),wu(t,a,Ee)}function xd(t,n){var a=t.length;if(a)return n+=n<0?a:0,ri(n,a)?t[n]:r}function Od(t,n,a){n.length?n=kt(n,function(O){return st(O)?function(M){return Bi(M,O.length===1?O[0]:O)}:O}):n=[kr];var l=-1;n=kt(n,tn(ke()));var b=Dd(t,function(O,M,K){var ee=kt(n,function(be){return be(O)});return{criteria:ee,index:++l,value:O}});return rb(b,function(O,M){return HE(O,M,a)})}function AE(t,n){return Pd(t,n,function(a,l){return rh(t,l)})}function Pd(t,n,a){for(var l=-1,b=n.length,O={};++l<b;){var M=n[l],K=Bi(t,M);a(K,M)&&so(O,wi(M,t),K)}return O}function RE(t){return function(n){return Bi(n,t)}}function Cu(t,n,a,l){var b=l?tb:fs,O=-1,M=n.length,K=t;for(t===n&&(n=qr(n)),a&&(K=kt(t,tn(a)));++O<M;)for(var ee=0,be=n[O],Ee=a?a(be):be;(ee=b(K,Ee,ee,l))>-1;)K!==t&&na.call(K,ee,1),na.call(t,ee,1);return t}function Cd(t,n){for(var a=t?n.length:0,l=a-1;a--;){var b=n[a];if(a==l||b!==O){var O=b;ri(b)?na.call(t,b,1):Nu(t,b)}}return t}function Au(t,n){return t+oa(ud()*(n-t+1))}function TE(t,n,a,l){for(var b=-1,O=mr(sa((n-t)/(a||1)),0),M=de(O);O--;)M[l?O:++b]=t,t+=a;return M}function Ru(t,n){var a="";if(!t||n<1||n>di)return a;do n%2&&(a+=t),n=oa(n/2),n&&(t+=t);while(n);return a}function ft(t,n){return ku(sp(t,n,kr),t+"")}function NE(t){return fd(Ss(t))}function FE(t,n){var a=Ss(t);return Da(a,Mi(n,0,a.length))}function so(t,n,a,l){if(!Yt(t))return t;n=wi(n,t);for(var b=-1,O=n.length,M=O-1,K=t;K!=null&&++b<O;){var ee=Bn(n[b]),be=a;if(ee==="__proto__"||ee==="constructor"||ee==="prototype")return t;if(b!=M){var Ee=K[ee];be=l?l(Ee,ee,K):r,be===r&&(be=Yt(Ee)?Ee:ri(n[b+1])?[]:{})}to(K,ee,be),K=K[ee]}return t}var Ad=aa?function(t,n){return aa.set(t,n),t}:kr,UE=ia?function(t,n){return ia(t,"toString",{configurable:!0,enumerable:!1,value:ih(n),writable:!0})}:kr;function jE(t){return Da(Ss(t))}function gn(t,n,a){var l=-1,b=t.length;n<0&&(n=-n>b?0:b+n),a=a>b?b:a,a<0&&(a+=b),b=n>a?0:a-n>>>0,n>>>=0;for(var O=de(b);++l<b;)O[l]=t[l+n];return O}function LE(t,n){var a;return mi(t,function(l,b,O){return a=n(l,b,O),!a}),!!a}function pa(t,n,a){var l=0,b=t==null?l:t.length;if(typeof n=="number"&&n===n&&b<=B1){for(;l<b;){var O=l+b>>>1,M=t[O];M!==null&&!nn(M)&&(a?M<=n:M<n)?l=O+1:b=O}return b}return Tu(t,n,kr,a)}function Tu(t,n,a,l){var b=0,O=t==null?0:t.length;if(O===0)return 0;n=a(n);for(var M=n!==n,K=n===null,ee=nn(n),be=n===r;b<O;){var Ee=oa((b+O)/2),Ie=a(t[Ee]),je=Ie!==r,Ve=Ie===null,Ye=Ie===Ie,ut=nn(Ie);if(M)var Qe=l||Ye;else be?Qe=Ye&&(l||je):K?Qe=Ye&&je&&(l||!Ve):ee?Qe=Ye&&je&&!Ve&&(l||!ut):Ve||ut?Qe=!1:Qe=l?Ie<=n:Ie<n;Qe?b=Ee+1:O=Ee}return Rr(O,M1)}function Rd(t,n){for(var a=-1,l=t.length,b=0,O=[];++a<l;){var M=t[a],K=n?n(M):M;if(!a||!Pn(K,ee)){var ee=K;O[b++]=M===0?0:M}}return O}function Td(t){return typeof t=="number"?t:nn(t)?Bo:+t}function rn(t){if(typeof t=="string")return t;if(st(t))return kt(t,rn)+"";if(nn(t))return hd?hd.call(t):"";var n=t+"";return n=="0"&&1/t==-Ni?"-0":n}function _i(t,n,a){var l=-1,b=Go,O=t.length,M=!0,K=[],ee=K;if(a)M=!1,b=au;else if(O>=u){var be=n?null:kE(t);if(be)return Jo(be);M=!1,b=Js,ee=new Li}else ee=n?[]:K;e:for(;++l<O;){var Ee=t[l],Ie=n?n(Ee):Ee;if(Ee=a||Ee!==0?Ee:0,M&&Ie===Ie){for(var je=ee.length;je--;)if(ee[je]===Ie)continue e;n&&ee.push(Ie),K.push(Ee)}else b(ee,Ie,a)||(ee!==K&&ee.push(Ie),K.push(Ee))}return K}function Nu(t,n){return n=wi(n,t),t=op(t,n),t==null||delete t[Bn(yn(n))]}function Nd(t,n,a,l){return so(t,n,a(Bi(t,n)),l)}function ga(t,n,a,l){for(var b=t.length,O=l?b:-1;(l?O--:++O<b)&&n(t[O],O,t););return a?gn(t,l?0:O,l?O+1:b):gn(t,l?O+1:0,l?b:O)}function Fd(t,n){var a=t;return a instanceof bt&&(a=a.value()),cu(n,function(l,b){return b.func.apply(b.thisArg,gi([l],b.args))},a)}function Fu(t,n,a){var l=t.length;if(l<2)return l?_i(t[0]):[];for(var b=-1,O=de(l);++b<l;)for(var M=t[b],K=-1;++K<l;)K!=b&&(O[b]=ro(O[b]||M,t[K],n,a));return _i(Pr(O,1),n,a)}function Ud(t,n,a){for(var l=-1,b=t.length,O=n.length,M={};++l<b;){var K=l<O?n[l]:r;a(M,t[l],K)}return M}function Uu(t){return or(t)?t:[]}function ju(t){return typeof t=="function"?t:kr}function wi(t,n){return st(t)?t:qu(t,n)?[t]:hp(Ft(t))}var ME=ft;function bi(t,n,a){var l=t.length;return a=a===r?l:a,!n&&a>=l?t:gn(t,n,a)}var jd=Ib||function(t){return Or.clearTimeout(t)};function Ld(t,n){if(n)return t.slice();var a=t.length,l=id?id(a):new t.constructor(a);return t.copy(l),l}function Lu(t){var n=new t.constructor(t.byteLength);return new ta(n).set(new ta(t)),n}function BE(t,n){var a=n?Lu(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.byteLength)}function zE(t){var n=new t.constructor(t.source,wf.exec(t));return n.lastIndex=t.lastIndex,n}function $E(t){return eo?Lt(eo.call(t)):{}}function Md(t,n){var a=n?Lu(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.length)}function Bd(t,n){if(t!==n){var a=t!==r,l=t===null,b=t===t,O=nn(t),M=n!==r,K=n===null,ee=n===n,be=nn(n);if(!K&&!be&&!O&&t>n||O&&M&&ee&&!K&&!be||l&&M&&ee||!a&&ee||!b)return 1;if(!l&&!O&&!be&&t<n||be&&a&&b&&!l&&!O||K&&a&&b||!M&&b||!ee)return-1}return 0}function HE(t,n,a){for(var l=-1,b=t.criteria,O=n.criteria,M=b.length,K=a.length;++l<M;){var ee=Bd(b[l],O[l]);if(ee){if(l>=K)return ee;var be=a[l];return ee*(be=="desc"?-1:1)}}return t.index-n.index}function zd(t,n,a,l){for(var b=-1,O=t.length,M=a.length,K=-1,ee=n.length,be=mr(O-M,0),Ee=de(ee+be),Ie=!l;++K<ee;)Ee[K]=n[K];for(;++b<M;)(Ie||b<O)&&(Ee[a[b]]=t[b]);for(;be--;)Ee[K++]=t[b++];return Ee}function $d(t,n,a,l){for(var b=-1,O=t.length,M=-1,K=a.length,ee=-1,be=n.length,Ee=mr(O-K,0),Ie=de(Ee+be),je=!l;++b<Ee;)Ie[b]=t[b];for(var Ve=b;++ee<be;)Ie[Ve+ee]=n[ee];for(;++M<K;)(je||b<O)&&(Ie[Ve+a[M]]=t[b++]);return Ie}function qr(t,n){var a=-1,l=t.length;for(n||(n=de(l));++a<l;)n[a]=t[a];return n}function Mn(t,n,a,l){var b=!a;a||(a={});for(var O=-1,M=n.length;++O<M;){var K=n[O],ee=l?l(a[K],t[K],K,a,t):r;ee===r&&(ee=t[K]),b?Zn(a,K,ee):to(a,K,ee)}return a}function KE(t,n){return Mn(t,Vu(t),n)}function VE(t,n){return Mn(t,ep(t),n)}function ya(t,n){return function(a,l){var b=st(a)?Jw:fE,O=n?n():{};return b(a,t,ke(l,2),O)}}function ws(t){return ft(function(n,a){var l=-1,b=a.length,O=b>1?a[b-1]:r,M=b>2?a[2]:r;for(O=t.length>3&&typeof O=="function"?(b--,O):r,M&&Mr(a[0],a[1],M)&&(O=b<3?r:O,b=1),n=Lt(n);++l<b;){var K=a[l];K&&t(n,K,l,O)}return n})}function Hd(t,n){return function(a,l){if(a==null)return a;if(!Wr(a))return t(a,l);for(var b=a.length,O=n?b:-1,M=Lt(a);(n?O--:++O<b)&&l(M[O],O,M)!==!1;);return a}}function Kd(t){return function(n,a,l){for(var b=-1,O=Lt(n),M=l(n),K=M.length;K--;){var ee=M[t?K:++b];if(a(O[ee],ee,O)===!1)break}return n}}function qE(t,n,a){var l=n&Ge,b=oo(t);function O(){var M=this&&this!==Or&&this instanceof O?b:t;return M.apply(l?a:this,arguments)}return O}function Vd(t){return function(n){n=Ft(n);var a=ds(n)?xn(n):r,l=a?a[0]:n.charAt(0),b=a?bi(a,1).join(""):n.slice(1);return l[t]()+b}}function bs(t){return function(n){return cu(Hp($p(n).replace(Uw,"")),t,"")}}function oo(t){return function(){var n=arguments;switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3]);case 5:return new t(n[0],n[1],n[2],n[3],n[4]);case 6:return new t(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new t(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var a=_s(t.prototype),l=t.apply(a,n);return Yt(l)?l:a}}function WE(t,n,a){var l=oo(t);function b(){for(var O=arguments.length,M=de(O),K=O,ee=Es(b);K--;)M[K]=arguments[K];var be=O<3&&M[0]!==ee&&M[O-1]!==ee?[]:yi(M,ee);if(O-=be.length,O<a)return Jd(t,n,va,b.placeholder,r,M,be,r,r,a-O);var Ee=this&&this!==Or&&this instanceof b?l:t;return en(Ee,this,M)}return b}function qd(t){return function(n,a,l){var b=Lt(n);if(!Wr(n)){var O=ke(a,3);n=Dr(n),a=function(K){return O(b[K],K,b)}}var M=t(n,a,l);return M>-1?b[O?n[M]:M]:r}}function Wd(t){return ti(function(n){var a=n.length,l=a,b=dn.prototype.thru;for(t&&n.reverse();l--;){var O=n[l];if(typeof O!="function")throw new fn(D);if(b&&!M&&ba(O)=="wrapper")var M=new dn([],!0)}for(l=M?l:a;++l<a;){O=n[l];var K=ba(O),ee=K=="wrapper"?Hu(O):r;ee&&Wu(ee[0])&&ee[1]==(At|ct|Je|Ht)&&!ee[4].length&&ee[9]==1?M=M[ba(ee[0])].apply(M,ee[3]):M=O.length==1&&Wu(O)?M[K]():M.thru(O)}return function(){var be=arguments,Ee=be[0];if(M&&be.length==1&&st(Ee))return M.plant(Ee).value();for(var Ie=0,je=a?n[Ie].apply(this,be):Ee;++Ie<a;)je=n[Ie].call(this,je);return je}})}function va(t,n,a,l,b,O,M,K,ee,be){var Ee=n&At,Ie=n&Ge,je=n&Xe,Ve=n&(ct|Ze),Ye=n&Zr,ut=je?r:oo(t);function Qe(){for(var mt=arguments.length,St=de(mt),sn=mt;sn--;)St[sn]=arguments[sn];if(Ve)var Br=Es(Qe),on=ib(St,Br);if(l&&(St=zd(St,l,b,Ve)),O&&(St=$d(St,O,M,Ve)),mt-=on,Ve&&mt<be){var ar=yi(St,Br);return Jd(t,n,va,Qe.placeholder,a,St,ar,K,ee,be-mt)}var Cn=Ie?a:this,si=je?Cn[t]:t;return mt=St.length,K?St=f3(St,K):Ye&&mt>1&&St.reverse(),Ee&&ee<mt&&(St.length=ee),this&&this!==Or&&this instanceof Qe&&(si=ut||oo(si)),si.apply(Cn,St)}return Qe}function Gd(t,n){return function(a,l){return wE(a,t,n(l),{})}}function ma(t,n){return function(a,l){var b;if(a===r&&l===r)return n;if(a!==r&&(b=a),l!==r){if(b===r)return l;typeof a=="string"||typeof l=="string"?(a=rn(a),l=rn(l)):(a=Td(a),l=Td(l)),b=t(a,l)}return b}}function Mu(t){return ti(function(n){return n=kt(n,tn(ke())),ft(function(a){var l=this;return t(n,function(b){return en(b,l,a)})})})}function _a(t,n){n=n===r?" ":rn(n);var a=n.length;if(a<2)return a?Ru(n,t):n;var l=Ru(n,sa(t/ps(n)));return ds(n)?bi(xn(l),0,t).join(""):l.slice(0,t)}function GE(t,n,a,l){var b=n&Ge,O=oo(t);function M(){for(var K=-1,ee=arguments.length,be=-1,Ee=l.length,Ie=de(Ee+ee),je=this&&this!==Or&&this instanceof M?O:t;++be<Ee;)Ie[be]=l[be];for(;ee--;)Ie[be++]=arguments[++K];return en(je,b?a:this,Ie)}return M}function kd(t){return function(n,a,l){return l&&typeof l!="number"&&Mr(n,a,l)&&(a=l=r),n=ii(n),a===r?(a=n,n=0):a=ii(a),l=l===r?n<a?1:-1:ii(l),TE(n,a,l,t)}}function wa(t){return function(n,a){return typeof n=="string"&&typeof a=="string"||(n=vn(n),a=vn(a)),t(n,a)}}function Jd(t,n,a,l,b,O,M,K,ee,be){var Ee=n&ct,Ie=Ee?M:r,je=Ee?r:M,Ve=Ee?O:r,Ye=Ee?r:O;n|=Ee?Je:Ct,n&=~(Ee?Ct:Je),n&Rt||(n&=~(Ge|Xe));var ut=[t,n,b,Ve,Ie,Ye,je,K,ee,be],Qe=a.apply(r,ut);return Wu(t)&&ap(Qe,ut),Qe.placeholder=l,cp(Qe,t,n)}function Bu(t){var n=vr[t];return function(a,l){if(a=vn(a),l=l==null?0:Rr(ot(l),292),l&&cd(a)){var b=(Ft(a)+"e").split("e"),O=n(b[0]+"e"+(+b[1]+l));return b=(Ft(O)+"e").split("e"),+(b[0]+"e"+(+b[1]-l))}return n(a)}}var kE=vs&&1/Jo(new vs([,-0]))[1]==Ni?function(t){return new vs(t)}:ah;function Yd(t){return function(n){var a=Tr(n);return a==Sn?gu(n):a==In?lb(n):nb(n,t(n))}}function ei(t,n,a,l,b,O,M,K){var ee=n&Xe;if(!ee&&typeof t!="function")throw new fn(D);var be=l?l.length:0;if(be||(n&=~(Je|Ct),l=b=r),M=M===r?M:mr(ot(M),0),K=K===r?K:ot(K),be-=b?b.length:0,n&Ct){var Ee=l,Ie=b;l=b=r}var je=ee?r:Hu(t),Ve=[t,n,a,l,b,Ee,Ie,O,M,K];if(je&&u3(Ve,je),t=Ve[0],n=Ve[1],a=Ve[2],l=Ve[3],b=Ve[4],K=Ve[9]=Ve[9]===r?ee?0:t.length:mr(Ve[9]-be,0),!K&&n&(ct|Ze)&&(n&=~(ct|Ze)),!n||n==Ge)var Ye=qE(t,n,a);else n==ct||n==Ze?Ye=WE(t,n,K):(n==Je||n==(Ge|Je))&&!b.length?Ye=GE(t,n,a,l):Ye=va.apply(r,Ve);var ut=je?Ad:ap;return cp(ut(Ye,Ve),t,n)}function Qd(t,n,a,l){return t===r||Pn(t,ys[a])&&!Ut.call(l,a)?n:t}function Xd(t,n,a,l,b,O){return Yt(t)&&Yt(n)&&(O.set(n,t),da(t,n,r,Xd,O),O.delete(n)),t}function JE(t){return uo(t)?r:t}function Zd(t,n,a,l,b,O){var M=a&ve,K=t.length,ee=n.length;if(K!=ee&&!(M&&ee>K))return!1;var be=O.get(t),Ee=O.get(n);if(be&&Ee)return be==n&&Ee==t;var Ie=-1,je=!0,Ve=a&Me?new Li:r;for(O.set(t,n),O.set(n,t);++Ie<K;){var Ye=t[Ie],ut=n[Ie];if(l)var Qe=M?l(ut,Ye,Ie,n,t,O):l(Ye,ut,Ie,t,n,O);if(Qe!==r){if(Qe)continue;je=!1;break}if(Ve){if(!uu(n,function(mt,St){if(!Js(Ve,St)&&(Ye===mt||b(Ye,mt,a,l,O)))return Ve.push(St)})){je=!1;break}}else if(!(Ye===ut||b(Ye,ut,a,l,O))){je=!1;break}}return O.delete(t),O.delete(n),je}function YE(t,n,a,l,b,O,M){switch(a){case hs:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case ks:return!(t.byteLength!=n.byteLength||!O(new ta(t),new ta(n)));case Hs:case Ks:case Vs:return Pn(+t,+n);case $o:return t.name==n.name&&t.message==n.message;case qs:case Ws:return t==n+"";case Sn:var K=gu;case In:var ee=l&ve;if(K||(K=Jo),t.size!=n.size&&!ee)return!1;var be=M.get(t);if(be)return be==n;l|=Me,M.set(t,n);var Ee=Zd(K(t),K(n),l,b,O,M);return M.delete(t),Ee;case Ko:if(eo)return eo.call(t)==eo.call(n)}return!1}function QE(t,n,a,l,b,O){var M=a&ve,K=zu(t),ee=K.length,be=zu(n),Ee=be.length;if(ee!=Ee&&!M)return!1;for(var Ie=ee;Ie--;){var je=K[Ie];if(!(M?je in n:Ut.call(n,je)))return!1}var Ve=O.get(t),Ye=O.get(n);if(Ve&&Ye)return Ve==n&&Ye==t;var ut=!0;O.set(t,n),O.set(n,t);for(var Qe=M;++Ie<ee;){je=K[Ie];var mt=t[je],St=n[je];if(l)var sn=M?l(St,mt,je,n,t,O):l(mt,St,je,t,n,O);if(!(sn===r?mt===St||b(mt,St,a,l,O):sn)){ut=!1;break}Qe||(Qe=je=="constructor")}if(ut&&!Qe){var Br=t.constructor,on=n.constructor;Br!=on&&"constructor"in t&&"constructor"in n&&!(typeof Br=="function"&&Br instanceof Br&&typeof on=="function"&&on instanceof on)&&(ut=!1)}return O.delete(t),O.delete(n),ut}function ti(t){return ku(sp(t,r,pp),t+"")}function zu(t){return _d(t,Dr,Vu)}function $u(t){return _d(t,Gr,ep)}var Hu=aa?function(t){return aa.get(t)}:ah;function ba(t){for(var n=t.name+"",a=ms[n],l=Ut.call(ms,n)?a.length:0;l--;){var b=a[l],O=b.func;if(O==null||O==t)return b.name}return n}function Es(t){var n=Ut.call(I,"placeholder")?I:t;return n.placeholder}function ke(){var t=I.iteratee||sh;return t=t===sh?Ed:t,arguments.length?t(arguments[0],arguments[1]):t}function Ea(t,n){var a=t.__data__;return s3(n)?a[typeof n=="string"?"string":"hash"]:a.map}function Ku(t){for(var n=Dr(t),a=n.length;a--;){var l=n[a],b=t[l];n[a]=[l,b,np(b)]}return n}function zi(t,n){var a=cb(t,n);return bd(a)?a:r}function XE(t){var n=Ut.call(t,Ui),a=t[Ui];try{t[Ui]=r;var l=!0}catch{}var b=Zo.call(t);return l&&(n?t[Ui]=a:delete t[Ui]),b}var Vu=vu?function(t){return t==null?[]:(t=Lt(t),pi(vu(t),function(n){return od.call(t,n)}))}:ch,ep=vu?function(t){for(var n=[];t;)gi(n,Vu(t)),t=ra(t);return n}:ch,Tr=Lr;(mu&&Tr(new mu(new ArrayBuffer(1)))!=hs||Qs&&Tr(new Qs)!=Sn||_u&&Tr(_u.resolve())!=yf||vs&&Tr(new vs)!=In||Xs&&Tr(new Xs)!=Gs)&&(Tr=function(t){var n=Lr(t),a=n==Yn?t.constructor:r,l=a?$i(a):"";if(l)switch(l){case Fb:return hs;case Ub:return Sn;case jb:return yf;case Lb:return In;case Mb:return Gs}return n});function ZE(t,n,a){for(var l=-1,b=a.length;++l<b;){var O=a[l],M=O.size;switch(O.type){case"drop":t+=M;break;case"dropRight":n-=M;break;case"take":n=Rr(n,t+M);break;case"takeRight":t=mr(t,n-M);break}}return{start:t,end:n}}function e3(t){var n=t.match(ow);return n?n[1].split(aw):[]}function tp(t,n,a){n=wi(n,t);for(var l=-1,b=n.length,O=!1;++l<b;){var M=Bn(n[l]);if(!(O=t!=null&&a(t,M)))break;t=t[M]}return O||++l!=b?O:(b=t==null?0:t.length,!!b&&Ca(b)&&ri(M,b)&&(st(t)||Hi(t)))}function t3(t){var n=t.length,a=new t.constructor(n);return n&&typeof t[0]=="string"&&Ut.call(t,"index")&&(a.index=t.index,a.input=t.input),a}function rp(t){return typeof t.constructor=="function"&&!ao(t)?_s(ra(t)):{}}function r3(t,n,a){var l=t.constructor;switch(n){case ks:return Lu(t);case Hs:case Ks:return new l(+t);case hs:return BE(t,a);case Kc:case Vc:case qc:case Wc:case Gc:case kc:case Jc:case Yc:case Qc:return Md(t,a);case Sn:return new l;case Vs:case Ws:return new l(t);case qs:return zE(t);case In:return new l;case Ko:return $E(t)}}function n3(t,n){var a=n.length;if(!a)return t;var l=a-1;return n[l]=(a>1?"& ":"")+n[l],n=n.join(a>2?", ":" "),t.replace(sw,`{
/* [wrapped with `+n+`] */
`)}function i3(t){return st(t)||Hi(t)||!!(ad&&t&&t[ad])}function ri(t,n){var a=typeof t;return n=n??di,!!n&&(a=="number"||a!="symbol"&&yw.test(t))&&t>-1&&t%1==0&&t<n}function Mr(t,n,a){if(!Yt(a))return!1;var l=typeof n;return(l=="number"?Wr(a)&&ri(n,a.length):l=="string"&&n in a)?Pn(a[n],t):!1}function qu(t,n){if(st(t))return!1;var a=typeof t;return a=="number"||a=="symbol"||a=="boolean"||t==null||nn(t)?!0:tw.test(t)||!ew.test(t)||n!=null&&t in Lt(n)}function s3(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}function Wu(t){var n=ba(t),a=I[n];if(typeof a!="function"||!(n in bt.prototype))return!1;if(t===a)return!0;var l=Hu(a);return!!l&&t===l[0]}function o3(t){return!!nd&&nd in t}var a3=Qo?ni:uh;function ao(t){var n=t&&t.constructor,a=typeof n=="function"&&n.prototype||ys;return t===a}function np(t){return t===t&&!Yt(t)}function ip(t,n){return function(a){return a==null?!1:a[t]===n&&(n!==r||t in Lt(a))}}function c3(t){var n=Oa(t,function(l){return a.size===U&&a.clear(),l}),a=n.cache;return n}function u3(t,n){var a=t[1],l=n[1],b=a|l,O=b<(Ge|Xe|At),M=l==At&&a==ct||l==At&&a==Ht&&t[7].length<=n[8]||l==(At|Ht)&&n[7].length<=n[8]&&a==ct;if(!(O||M))return t;l&Ge&&(t[2]=n[2],b|=a&Ge?0:Rt);var K=n[3];if(K){var ee=t[3];t[3]=ee?zd(ee,K,n[4]):K,t[4]=ee?yi(t[3],te):n[4]}return K=n[5],K&&(ee=t[5],t[5]=ee?$d(ee,K,n[6]):K,t[6]=ee?yi(t[5],te):n[6]),K=n[7],K&&(t[7]=K),l&At&&(t[8]=t[8]==null?n[8]:Rr(t[8],n[8])),t[9]==null&&(t[9]=n[9]),t[0]=n[0],t[1]=b,t}function h3(t){var n=[];if(t!=null)for(var a in Lt(t))n.push(a);return n}function l3(t){return Zo.call(t)}function sp(t,n,a){return n=mr(n===r?t.length-1:n,0),function(){for(var l=arguments,b=-1,O=mr(l.length-n,0),M=de(O);++b<O;)M[b]=l[n+b];b=-1;for(var K=de(n+1);++b<n;)K[b]=l[b];return K[n]=a(M),en(t,this,K)}}function op(t,n){return n.length<2?t:Bi(t,gn(n,0,-1))}function f3(t,n){for(var a=t.length,l=Rr(n.length,a),b=qr(t);l--;){var O=n[l];t[l]=ri(O,a)?b[O]:r}return t}function Gu(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}var ap=up(Ad),co=Ob||function(t,n){return Or.setTimeout(t,n)},ku=up(UE);function cp(t,n,a){var l=n+"";return ku(t,n3(l,d3(e3(l),a)))}function up(t){var n=0,a=0;return function(){var l=Rb(),b=F1-(l-a);if(a=l,b>0){if(++n>=N1)return arguments[0]}else n=0;return t.apply(r,arguments)}}function Da(t,n){var a=-1,l=t.length,b=l-1;for(n=n===r?l:n;++a<n;){var O=Au(a,b),M=t[O];t[O]=t[a],t[a]=M}return t.length=n,t}var hp=c3(function(t){var n=[];return t.charCodeAt(0)===46&&n.push(""),t.replace(rw,function(a,l,b,O){n.push(b?O.replace(hw,"$1"):l||a)}),n});function Bn(t){if(typeof t=="string"||nn(t))return t;var n=t+"";return n=="0"&&1/t==-Ni?"-0":n}function $i(t){if(t!=null){try{return Xo.call(t)}catch{}try{return t+""}catch{}}return""}function d3(t,n){return ln(z1,function(a){var l="_."+a[0];n&a[1]&&!Go(t,l)&&t.push(l)}),t.sort()}function lp(t){if(t instanceof bt)return t.clone();var n=new dn(t.__wrapped__,t.__chain__);return n.__actions__=qr(t.__actions__),n.__index__=t.__index__,n.__values__=t.__values__,n}function p3(t,n,a){(a?Mr(t,n,a):n===r)?n=1:n=mr(ot(n),0);var l=t==null?0:t.length;if(!l||n<1)return[];for(var b=0,O=0,M=de(sa(l/n));b<l;)M[O++]=gn(t,b,b+=n);return M}function g3(t){for(var n=-1,a=t==null?0:t.length,l=0,b=[];++n<a;){var O=t[n];O&&(b[l++]=O)}return b}function y3(){var t=arguments.length;if(!t)return[];for(var n=de(t-1),a=arguments[0],l=t;l--;)n[l-1]=arguments[l];return gi(st(a)?qr(a):[a],Pr(n,1))}var v3=ft(function(t,n){return or(t)?ro(t,Pr(n,1,or,!0)):[]}),m3=ft(function(t,n){var a=yn(n);return or(a)&&(a=r),or(t)?ro(t,Pr(n,1,or,!0),ke(a,2)):[]}),_3=ft(function(t,n){var a=yn(n);return or(a)&&(a=r),or(t)?ro(t,Pr(n,1,or,!0),r,a):[]});function w3(t,n,a){var l=t==null?0:t.length;return l?(n=a||n===r?1:ot(n),gn(t,n<0?0:n,l)):[]}function b3(t,n,a){var l=t==null?0:t.length;return l?(n=a||n===r?1:ot(n),n=l-n,gn(t,0,n<0?0:n)):[]}function E3(t,n){return t&&t.length?ga(t,ke(n,3),!0,!0):[]}function D3(t,n){return t&&t.length?ga(t,ke(n,3),!0):[]}function S3(t,n,a,l){var b=t==null?0:t.length;return b?(a&&typeof a!="number"&&Mr(t,n,a)&&(a=0,l=b),yE(t,n,a,l)):[]}function fp(t,n,a){var l=t==null?0:t.length;if(!l)return-1;var b=a==null?0:ot(a);return b<0&&(b=mr(l+b,0)),ko(t,ke(n,3),b)}function dp(t,n,a){var l=t==null?0:t.length;if(!l)return-1;var b=l-1;return a!==r&&(b=ot(a),b=a<0?mr(l+b,0):Rr(b,l-1)),ko(t,ke(n,3),b,!0)}function pp(t){var n=t==null?0:t.length;return n?Pr(t,1):[]}function I3(t){var n=t==null?0:t.length;return n?Pr(t,Ni):[]}function x3(t,n){var a=t==null?0:t.length;return a?(n=n===r?1:ot(n),Pr(t,n)):[]}function O3(t){for(var n=-1,a=t==null?0:t.length,l={};++n<a;){var b=t[n];l[b[0]]=b[1]}return l}function gp(t){return t&&t.length?t[0]:r}function P3(t,n,a){var l=t==null?0:t.length;if(!l)return-1;var b=a==null?0:ot(a);return b<0&&(b=mr(l+b,0)),fs(t,n,b)}function C3(t){var n=t==null?0:t.length;return n?gn(t,0,-1):[]}var A3=ft(function(t){var n=kt(t,Uu);return n.length&&n[0]===t[0]?Iu(n):[]}),R3=ft(function(t){var n=yn(t),a=kt(t,Uu);return n===yn(a)?n=r:a.pop(),a.length&&a[0]===t[0]?Iu(a,ke(n,2)):[]}),T3=ft(function(t){var n=yn(t),a=kt(t,Uu);return n=typeof n=="function"?n:r,n&&a.pop(),a.length&&a[0]===t[0]?Iu(a,r,n):[]});function N3(t,n){return t==null?"":Cb.call(t,n)}function yn(t){var n=t==null?0:t.length;return n?t[n-1]:r}function F3(t,n,a){var l=t==null?0:t.length;if(!l)return-1;var b=l;return a!==r&&(b=ot(a),b=b<0?mr(l+b,0):Rr(b,l-1)),n===n?db(t,n,b):ko(t,Jf,b,!0)}function U3(t,n){return t&&t.length?xd(t,ot(n)):r}var j3=ft(yp);function yp(t,n){return t&&t.length&&n&&n.length?Cu(t,n):t}function L3(t,n,a){return t&&t.length&&n&&n.length?Cu(t,n,ke(a,2)):t}function M3(t,n,a){return t&&t.length&&n&&n.length?Cu(t,n,r,a):t}var B3=ti(function(t,n){var a=t==null?0:t.length,l=bu(t,n);return Cd(t,kt(n,function(b){return ri(b,a)?+b:b}).sort(Bd)),l});function z3(t,n){var a=[];if(!(t&&t.length))return a;var l=-1,b=[],O=t.length;for(n=ke(n,3);++l<O;){var M=t[l];n(M,l,t)&&(a.push(M),b.push(l))}return Cd(t,b),a}function Ju(t){return t==null?t:Nb.call(t)}function $3(t,n,a){var l=t==null?0:t.length;return l?(a&&typeof a!="number"&&Mr(t,n,a)?(n=0,a=l):(n=n==null?0:ot(n),a=a===r?l:ot(a)),gn(t,n,a)):[]}function H3(t,n){return pa(t,n)}function K3(t,n,a){return Tu(t,n,ke(a,2))}function V3(t,n){var a=t==null?0:t.length;if(a){var l=pa(t,n);if(l<a&&Pn(t[l],n))return l}return-1}function q3(t,n){return pa(t,n,!0)}function W3(t,n,a){return Tu(t,n,ke(a,2),!0)}function G3(t,n){var a=t==null?0:t.length;if(a){var l=pa(t,n,!0)-1;if(Pn(t[l],n))return l}return-1}function k3(t){return t&&t.length?Rd(t):[]}function J3(t,n){return t&&t.length?Rd(t,ke(n,2)):[]}function Y3(t){var n=t==null?0:t.length;return n?gn(t,1,n):[]}function Q3(t,n,a){return t&&t.length?(n=a||n===r?1:ot(n),gn(t,0,n<0?0:n)):[]}function X3(t,n,a){var l=t==null?0:t.length;return l?(n=a||n===r?1:ot(n),n=l-n,gn(t,n<0?0:n,l)):[]}function Z3(t,n){return t&&t.length?ga(t,ke(n,3),!1,!0):[]}function e6(t,n){return t&&t.length?ga(t,ke(n,3)):[]}var t6=ft(function(t){return _i(Pr(t,1,or,!0))}),r6=ft(function(t){var n=yn(t);return or(n)&&(n=r),_i(Pr(t,1,or,!0),ke(n,2))}),n6=ft(function(t){var n=yn(t);return n=typeof n=="function"?n:r,_i(Pr(t,1,or,!0),r,n)});function i6(t){return t&&t.length?_i(t):[]}function s6(t,n){return t&&t.length?_i(t,ke(n,2)):[]}function o6(t,n){return n=typeof n=="function"?n:r,t&&t.length?_i(t,r,n):[]}function Yu(t){if(!(t&&t.length))return[];var n=0;return t=pi(t,function(a){if(or(a))return n=mr(a.length,n),!0}),du(n,function(a){return kt(t,hu(a))})}function vp(t,n){if(!(t&&t.length))return[];var a=Yu(t);return n==null?a:kt(a,function(l){return en(n,r,l)})}var a6=ft(function(t,n){return or(t)?ro(t,n):[]}),c6=ft(function(t){return Fu(pi(t,or))}),u6=ft(function(t){var n=yn(t);return or(n)&&(n=r),Fu(pi(t,or),ke(n,2))}),h6=ft(function(t){var n=yn(t);return n=typeof n=="function"?n:r,Fu(pi(t,or),r,n)}),l6=ft(Yu);function f6(t,n){return Ud(t||[],n||[],to)}function d6(t,n){return Ud(t||[],n||[],so)}var p6=ft(function(t){var n=t.length,a=n>1?t[n-1]:r;return a=typeof a=="function"?(t.pop(),a):r,vp(t,a)});function mp(t){var n=I(t);return n.__chain__=!0,n}function g6(t,n){return n(t),t}function Sa(t,n){return n(t)}var y6=ti(function(t){var n=t.length,a=n?t[0]:0,l=this.__wrapped__,b=function(O){return bu(O,t)};return n>1||this.__actions__.length||!(l instanceof bt)||!ri(a)?this.thru(b):(l=l.slice(a,+a+(n?1:0)),l.__actions__.push({func:Sa,args:[b],thisArg:r}),new dn(l,this.__chain__).thru(function(O){return n&&!O.length&&O.push(r),O}))});function v6(){return mp(this)}function m6(){return new dn(this.value(),this.__chain__)}function _6(){this.__values__===r&&(this.__values__=Tp(this.value()));var t=this.__index__>=this.__values__.length,n=t?r:this.__values__[this.__index__++];return{done:t,value:n}}function w6(){return this}function b6(t){for(var n,a=this;a instanceof ua;){var l=lp(a);l.__index__=0,l.__values__=r,n?b.__wrapped__=l:n=l;var b=l;a=a.__wrapped__}return b.__wrapped__=t,n}function E6(){var t=this.__wrapped__;if(t instanceof bt){var n=t;return this.__actions__.length&&(n=new bt(this)),n=n.reverse(),n.__actions__.push({func:Sa,args:[Ju],thisArg:r}),new dn(n,this.__chain__)}return this.thru(Ju)}function D6(){return Fd(this.__wrapped__,this.__actions__)}var S6=ya(function(t,n,a){Ut.call(t,a)?++t[a]:Zn(t,a,1)});function I6(t,n,a){var l=st(t)?Gf:gE;return a&&Mr(t,n,a)&&(n=r),l(t,ke(n,3))}function x6(t,n){var a=st(t)?pi:vd;return a(t,ke(n,3))}var O6=qd(fp),P6=qd(dp);function C6(t,n){return Pr(Ia(t,n),1)}function A6(t,n){return Pr(Ia(t,n),Ni)}function R6(t,n,a){return a=a===r?1:ot(a),Pr(Ia(t,n),a)}function _p(t,n){var a=st(t)?ln:mi;return a(t,ke(n,3))}function wp(t,n){var a=st(t)?Yw:yd;return a(t,ke(n,3))}var T6=ya(function(t,n,a){Ut.call(t,a)?t[a].push(n):Zn(t,a,[n])});function N6(t,n,a,l){t=Wr(t)?t:Ss(t),a=a&&!l?ot(a):0;var b=t.length;return a<0&&(a=mr(b+a,0)),Aa(t)?a<=b&&t.indexOf(n,a)>-1:!!b&&fs(t,n,a)>-1}var F6=ft(function(t,n,a){var l=-1,b=typeof n=="function",O=Wr(t)?de(t.length):[];return mi(t,function(M){O[++l]=b?en(n,M,a):no(M,n,a)}),O}),U6=ya(function(t,n,a){Zn(t,a,n)});function Ia(t,n){var a=st(t)?kt:Dd;return a(t,ke(n,3))}function j6(t,n,a,l){return t==null?[]:(st(n)||(n=n==null?[]:[n]),a=l?r:a,st(a)||(a=a==null?[]:[a]),Od(t,n,a))}var L6=ya(function(t,n,a){t[a?0:1].push(n)},function(){return[[],[]]});function M6(t,n,a){var l=st(t)?cu:Qf,b=arguments.length<3;return l(t,ke(n,4),a,b,mi)}function B6(t,n,a){var l=st(t)?Qw:Qf,b=arguments.length<3;return l(t,ke(n,4),a,b,yd)}function z6(t,n){var a=st(t)?pi:vd;return a(t,Pa(ke(n,3)))}function $6(t){var n=st(t)?fd:NE;return n(t)}function H6(t,n,a){(a?Mr(t,n,a):n===r)?n=1:n=ot(n);var l=st(t)?hE:FE;return l(t,n)}function K6(t){var n=st(t)?lE:jE;return n(t)}function V6(t){if(t==null)return 0;if(Wr(t))return Aa(t)?ps(t):t.length;var n=Tr(t);return n==Sn||n==In?t.size:Ou(t).length}function q6(t,n,a){var l=st(t)?uu:LE;return a&&Mr(t,n,a)&&(n=r),l(t,ke(n,3))}var W6=ft(function(t,n){if(t==null)return[];var a=n.length;return a>1&&Mr(t,n[0],n[1])?n=[]:a>2&&Mr(n[0],n[1],n[2])&&(n=[n[0]]),Od(t,Pr(n,1),[])}),xa=xb||function(){return Or.Date.now()};function G6(t,n){if(typeof n!="function")throw new fn(D);return t=ot(t),function(){if(--t<1)return n.apply(this,arguments)}}function bp(t,n,a){return n=a?r:n,n=t&&n==null?t.length:n,ei(t,At,r,r,r,r,n)}function Ep(t,n){var a;if(typeof n!="function")throw new fn(D);return t=ot(t),function(){return--t>0&&(a=n.apply(this,arguments)),t<=1&&(n=r),a}}var Qu=ft(function(t,n,a){var l=Ge;if(a.length){var b=yi(a,Es(Qu));l|=Je}return ei(t,l,n,a,b)}),Dp=ft(function(t,n,a){var l=Ge|Xe;if(a.length){var b=yi(a,Es(Dp));l|=Je}return ei(n,l,t,a,b)});function Sp(t,n,a){n=a?r:n;var l=ei(t,ct,r,r,r,r,r,n);return l.placeholder=Sp.placeholder,l}function Ip(t,n,a){n=a?r:n;var l=ei(t,Ze,r,r,r,r,r,n);return l.placeholder=Ip.placeholder,l}function xp(t,n,a){var l,b,O,M,K,ee,be=0,Ee=!1,Ie=!1,je=!0;if(typeof t!="function")throw new fn(D);n=vn(n)||0,Yt(a)&&(Ee=!!a.leading,Ie="maxWait"in a,O=Ie?mr(vn(a.maxWait)||0,n):O,je="trailing"in a?!!a.trailing:je);function Ve(ar){var Cn=l,si=b;return l=b=r,be=ar,M=t.apply(si,Cn),M}function Ye(ar){return be=ar,K=co(mt,n),Ee?Ve(ar):M}function ut(ar){var Cn=ar-ee,si=ar-be,qp=n-Cn;return Ie?Rr(qp,O-si):qp}function Qe(ar){var Cn=ar-ee,si=ar-be;return ee===r||Cn>=n||Cn<0||Ie&&si>=O}function mt(){var ar=xa();if(Qe(ar))return St(ar);K=co(mt,ut(ar))}function St(ar){return K=r,je&&l?Ve(ar):(l=b=r,M)}function sn(){K!==r&&jd(K),be=0,l=ee=b=K=r}function Br(){return K===r?M:St(xa())}function on(){var ar=xa(),Cn=Qe(ar);if(l=arguments,b=this,ee=ar,Cn){if(K===r)return Ye(ee);if(Ie)return jd(K),K=co(mt,n),Ve(ee)}return K===r&&(K=co(mt,n)),M}return on.cancel=sn,on.flush=Br,on}var k6=ft(function(t,n){return gd(t,1,n)}),J6=ft(function(t,n,a){return gd(t,vn(n)||0,a)});function Y6(t){return ei(t,Zr)}function Oa(t,n){if(typeof t!="function"||n!=null&&typeof n!="function")throw new fn(D);var a=function(){var l=arguments,b=n?n.apply(this,l):l[0],O=a.cache;if(O.has(b))return O.get(b);var M=t.apply(this,l);return a.cache=O.set(b,M)||O,M};return a.cache=new(Oa.Cache||Xn),a}Oa.Cache=Xn;function Pa(t){if(typeof t!="function")throw new fn(D);return function(){var n=arguments;switch(n.length){case 0:return!t.call(this);case 1:return!t.call(this,n[0]);case 2:return!t.call(this,n[0],n[1]);case 3:return!t.call(this,n[0],n[1],n[2])}return!t.apply(this,n)}}function Q6(t){return Ep(2,t)}var X6=ME(function(t,n){n=n.length==1&&st(n[0])?kt(n[0],tn(ke())):kt(Pr(n,1),tn(ke()));var a=n.length;return ft(function(l){for(var b=-1,O=Rr(l.length,a);++b<O;)l[b]=n[b].call(this,l[b]);return en(t,this,l)})}),Xu=ft(function(t,n){var a=yi(n,Es(Xu));return ei(t,Je,r,n,a)}),Op=ft(function(t,n){var a=yi(n,Es(Op));return ei(t,Ct,r,n,a)}),Z6=ti(function(t,n){return ei(t,Ht,r,r,r,n)});function eD(t,n){if(typeof t!="function")throw new fn(D);return n=n===r?n:ot(n),ft(t,n)}function tD(t,n){if(typeof t!="function")throw new fn(D);return n=n==null?0:mr(ot(n),0),ft(function(a){var l=a[n],b=bi(a,0,n);return l&&gi(b,l),en(t,this,b)})}function rD(t,n,a){var l=!0,b=!0;if(typeof t!="function")throw new fn(D);return Yt(a)&&(l="leading"in a?!!a.leading:l,b="trailing"in a?!!a.trailing:b),xp(t,n,{leading:l,maxWait:n,trailing:b})}function nD(t){return bp(t,1)}function iD(t,n){return Xu(ju(n),t)}function sD(){if(!arguments.length)return[];var t=arguments[0];return st(t)?t:[t]}function oD(t){return pn(t,ze)}function aD(t,n){return n=typeof n=="function"?n:r,pn(t,ze,n)}function cD(t){return pn(t,oe|ze)}function uD(t,n){return n=typeof n=="function"?n:r,pn(t,oe|ze,n)}function hD(t,n){return n==null||pd(t,n,Dr(n))}function Pn(t,n){return t===n||t!==t&&n!==n}var lD=wa(Su),fD=wa(function(t,n){return t>=n}),Hi=wd(function(){return arguments}())?wd:function(t){return tr(t)&&Ut.call(t,"callee")&&!od.call(t,"callee")},st=de.isArray,dD=$f?tn($f):bE;function Wr(t){return t!=null&&Ca(t.length)&&!ni(t)}function or(t){return tr(t)&&Wr(t)}function pD(t){return t===!0||t===!1||tr(t)&&Lr(t)==Hs}var Ei=Pb||uh,gD=Hf?tn(Hf):EE;function yD(t){return tr(t)&&t.nodeType===1&&!uo(t)}function vD(t){if(t==null)return!0;if(Wr(t)&&(st(t)||typeof t=="string"||typeof t.splice=="function"||Ei(t)||Ds(t)||Hi(t)))return!t.length;var n=Tr(t);if(n==Sn||n==In)return!t.size;if(ao(t))return!Ou(t).length;for(var a in t)if(Ut.call(t,a))return!1;return!0}function mD(t,n){return io(t,n)}function _D(t,n,a){a=typeof a=="function"?a:r;var l=a?a(t,n):r;return l===r?io(t,n,r,a):!!l}function Zu(t){if(!tr(t))return!1;var n=Lr(t);return n==$o||n==H1||typeof t.message=="string"&&typeof t.name=="string"&&!uo(t)}function wD(t){return typeof t=="number"&&cd(t)}function ni(t){if(!Yt(t))return!1;var n=Lr(t);return n==Ho||n==gf||n==$1||n==V1}function Pp(t){return typeof t=="number"&&t==ot(t)}function Ca(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=di}function Yt(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}function tr(t){return t!=null&&typeof t=="object"}var Cp=Kf?tn(Kf):SE;function bD(t,n){return t===n||xu(t,n,Ku(n))}function ED(t,n,a){return a=typeof a=="function"?a:r,xu(t,n,Ku(n),a)}function DD(t){return Ap(t)&&t!=+t}function SD(t){if(a3(t))throw new rt(p);return bd(t)}function ID(t){return t===null}function xD(t){return t==null}function Ap(t){return typeof t=="number"||tr(t)&&Lr(t)==Vs}function uo(t){if(!tr(t)||Lr(t)!=Yn)return!1;var n=ra(t);if(n===null)return!0;var a=Ut.call(n,"constructor")&&n.constructor;return typeof a=="function"&&a instanceof a&&Xo.call(a)==Eb}var eh=Vf?tn(Vf):IE;function OD(t){return Pp(t)&&t>=-di&&t<=di}var Rp=qf?tn(qf):xE;function Aa(t){return typeof t=="string"||!st(t)&&tr(t)&&Lr(t)==Ws}function nn(t){return typeof t=="symbol"||tr(t)&&Lr(t)==Ko}var Ds=Wf?tn(Wf):OE;function PD(t){return t===r}function CD(t){return tr(t)&&Tr(t)==Gs}function AD(t){return tr(t)&&Lr(t)==W1}var RD=wa(Pu),TD=wa(function(t,n){return t<=n});function Tp(t){if(!t)return[];if(Wr(t))return Aa(t)?xn(t):qr(t);if(Ys&&t[Ys])return hb(t[Ys]());var n=Tr(t),a=n==Sn?gu:n==In?Jo:Ss;return a(t)}function ii(t){if(!t)return t===0?t:0;if(t=vn(t),t===Ni||t===-Ni){var n=t<0?-1:1;return n*L1}return t===t?t:0}function ot(t){var n=ii(t),a=n%1;return n===n?a?n-a:n:0}function Np(t){return t?Mi(ot(t),0,jn):0}function vn(t){if(typeof t=="number")return t;if(nn(t))return Bo;if(Yt(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=Yt(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=Xf(t);var a=dw.test(t);return a||gw.test(t)?Gw(t.slice(2),a?2:8):fw.test(t)?Bo:+t}function Fp(t){return Mn(t,Gr(t))}function ND(t){return t?Mi(ot(t),-di,di):t===0?t:0}function Ft(t){return t==null?"":rn(t)}var FD=ws(function(t,n){if(ao(n)||Wr(n)){Mn(n,Dr(n),t);return}for(var a in n)Ut.call(n,a)&&to(t,a,n[a])}),Up=ws(function(t,n){Mn(n,Gr(n),t)}),Ra=ws(function(t,n,a,l){Mn(n,Gr(n),t,l)}),UD=ws(function(t,n,a,l){Mn(n,Dr(n),t,l)}),jD=ti(bu);function LD(t,n){var a=_s(t);return n==null?a:dd(a,n)}var MD=ft(function(t,n){t=Lt(t);var a=-1,l=n.length,b=l>2?n[2]:r;for(b&&Mr(n[0],n[1],b)&&(l=1);++a<l;)for(var O=n[a],M=Gr(O),K=-1,ee=M.length;++K<ee;){var be=M[K],Ee=t[be];(Ee===r||Pn(Ee,ys[be])&&!Ut.call(t,be))&&(t[be]=O[be])}return t}),BD=ft(function(t){return t.push(r,Xd),en(jp,r,t)});function zD(t,n){return kf(t,ke(n,3),Ln)}function $D(t,n){return kf(t,ke(n,3),Du)}function HD(t,n){return t==null?t:Eu(t,ke(n,3),Gr)}function KD(t,n){return t==null?t:md(t,ke(n,3),Gr)}function VD(t,n){return t&&Ln(t,ke(n,3))}function qD(t,n){return t&&Du(t,ke(n,3))}function WD(t){return t==null?[]:fa(t,Dr(t))}function GD(t){return t==null?[]:fa(t,Gr(t))}function th(t,n,a){var l=t==null?r:Bi(t,n);return l===r?a:l}function kD(t,n){return t!=null&&tp(t,n,vE)}function rh(t,n){return t!=null&&tp(t,n,mE)}var JD=Gd(function(t,n,a){n!=null&&typeof n.toString!="function"&&(n=Zo.call(n)),t[n]=a},ih(kr)),YD=Gd(function(t,n,a){n!=null&&typeof n.toString!="function"&&(n=Zo.call(n)),Ut.call(t,n)?t[n].push(a):t[n]=[a]},ke),QD=ft(no);function Dr(t){return Wr(t)?ld(t):Ou(t)}function Gr(t){return Wr(t)?ld(t,!0):PE(t)}function XD(t,n){var a={};return n=ke(n,3),Ln(t,function(l,b,O){Zn(a,n(l,b,O),l)}),a}function ZD(t,n){var a={};return n=ke(n,3),Ln(t,function(l,b,O){Zn(a,b,n(l,b,O))}),a}var e2=ws(function(t,n,a){da(t,n,a)}),jp=ws(function(t,n,a,l){da(t,n,a,l)}),t2=ti(function(t,n){var a={};if(t==null)return a;var l=!1;n=kt(n,function(O){return O=wi(O,t),l||(l=O.length>1),O}),Mn(t,$u(t),a),l&&(a=pn(a,oe|_e|ze,JE));for(var b=n.length;b--;)Nu(a,n[b]);return a});function r2(t,n){return Lp(t,Pa(ke(n)))}var n2=ti(function(t,n){return t==null?{}:AE(t,n)});function Lp(t,n){if(t==null)return{};var a=kt($u(t),function(l){return[l]});return n=ke(n),Pd(t,a,function(l,b){return n(l,b[0])})}function i2(t,n,a){n=wi(n,t);var l=-1,b=n.length;for(b||(b=1,t=r);++l<b;){var O=t==null?r:t[Bn(n[l])];O===r&&(l=b,O=a),t=ni(O)?O.call(t):O}return t}function s2(t,n,a){return t==null?t:so(t,n,a)}function o2(t,n,a,l){return l=typeof l=="function"?l:r,t==null?t:so(t,n,a,l)}var Mp=Yd(Dr),Bp=Yd(Gr);function a2(t,n,a){var l=st(t),b=l||Ei(t)||Ds(t);if(n=ke(n,4),a==null){var O=t&&t.constructor;b?a=l?new O:[]:Yt(t)?a=ni(O)?_s(ra(t)):{}:a={}}return(b?ln:Ln)(t,function(M,K,ee){return n(a,M,K,ee)}),a}function c2(t,n){return t==null?!0:Nu(t,n)}function u2(t,n,a){return t==null?t:Nd(t,n,ju(a))}function h2(t,n,a,l){return l=typeof l=="function"?l:r,t==null?t:Nd(t,n,ju(a),l)}function Ss(t){return t==null?[]:pu(t,Dr(t))}function l2(t){return t==null?[]:pu(t,Gr(t))}function f2(t,n,a){return a===r&&(a=n,n=r),a!==r&&(a=vn(a),a=a===a?a:0),n!==r&&(n=vn(n),n=n===n?n:0),Mi(vn(t),n,a)}function d2(t,n,a){return n=ii(n),a===r?(a=n,n=0):a=ii(a),t=vn(t),_E(t,n,a)}function p2(t,n,a){if(a&&typeof a!="boolean"&&Mr(t,n,a)&&(n=a=r),a===r&&(typeof n=="boolean"?(a=n,n=r):typeof t=="boolean"&&(a=t,t=r)),t===r&&n===r?(t=0,n=1):(t=ii(t),n===r?(n=t,t=0):n=ii(n)),t>n){var l=t;t=n,n=l}if(a||t%1||n%1){var b=ud();return Rr(t+b*(n-t+Ww("1e-"+((b+"").length-1))),n)}return Au(t,n)}var g2=bs(function(t,n,a){return n=n.toLowerCase(),t+(a?zp(n):n)});function zp(t){return nh(Ft(t).toLowerCase())}function $p(t){return t=Ft(t),t&&t.replace(vw,sb).replace(jw,"")}function y2(t,n,a){t=Ft(t),n=rn(n);var l=t.length;a=a===r?l:Mi(ot(a),0,l);var b=a;return a-=n.length,a>=0&&t.slice(a,b)==n}function v2(t){return t=Ft(t),t&&Q1.test(t)?t.replace(mf,ob):t}function m2(t){return t=Ft(t),t&&nw.test(t)?t.replace(Xc,"\\$&"):t}var _2=bs(function(t,n,a){return t+(a?"-":"")+n.toLowerCase()}),w2=bs(function(t,n,a){return t+(a?" ":"")+n.toLowerCase()}),b2=Vd("toLowerCase");function E2(t,n,a){t=Ft(t),n=ot(n);var l=n?ps(t):0;if(!n||l>=n)return t;var b=(n-l)/2;return _a(oa(b),a)+t+_a(sa(b),a)}function D2(t,n,a){t=Ft(t),n=ot(n);var l=n?ps(t):0;return n&&l<n?t+_a(n-l,a):t}function S2(t,n,a){t=Ft(t),n=ot(n);var l=n?ps(t):0;return n&&l<n?_a(n-l,a)+t:t}function I2(t,n,a){return a||n==null?n=0:n&&(n=+n),Tb(Ft(t).replace(Zc,""),n||0)}function x2(t,n,a){return(a?Mr(t,n,a):n===r)?n=1:n=ot(n),Ru(Ft(t),n)}function O2(){var t=arguments,n=Ft(t[0]);return t.length<3?n:n.replace(t[1],t[2])}var P2=bs(function(t,n,a){return t+(a?"_":"")+n.toLowerCase()});function C2(t,n,a){return a&&typeof a!="number"&&Mr(t,n,a)&&(n=a=r),a=a===r?jn:a>>>0,a?(t=Ft(t),t&&(typeof n=="string"||n!=null&&!eh(n))&&(n=rn(n),!n&&ds(t))?bi(xn(t),0,a):t.split(n,a)):[]}var A2=bs(function(t,n,a){return t+(a?" ":"")+nh(n)});function R2(t,n,a){return t=Ft(t),a=a==null?0:Mi(ot(a),0,t.length),n=rn(n),t.slice(a,a+n.length)==n}function T2(t,n,a){var l=I.templateSettings;a&&Mr(t,n,a)&&(n=r),t=Ft(t),n=Ra({},n,l,Qd);var b=Ra({},n.imports,l.imports,Qd),O=Dr(b),M=pu(b,O),K,ee,be=0,Ee=n.interpolate||Vo,Ie="__p += '",je=yu((n.escape||Vo).source+"|"+Ee.source+"|"+(Ee===_f?lw:Vo).source+"|"+(n.evaluate||Vo).source+"|$","g"),Ve="//# sourceURL="+(Ut.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++$w+"]")+`
`;t.replace(je,function(Qe,mt,St,sn,Br,on){return St||(St=sn),Ie+=t.slice(be,on).replace(mw,ab),mt&&(K=!0,Ie+=`' +
__e(`+mt+`) +
'`),Br&&(ee=!0,Ie+=`';
`+Br+`;
__p += '`),St&&(Ie+=`' +
((__t = (`+St+`)) == null ? '' : __t) +
'`),be=on+Qe.length,Qe}),Ie+=`';
`;var Ye=Ut.call(n,"variable")&&n.variable;if(!Ye)Ie=`with (obj) {
`+Ie+`
}
`;else if(uw.test(Ye))throw new rt(F);Ie=(ee?Ie.replace(G1,""):Ie).replace(k1,"$1").replace(J1,"$1;"),Ie="function("+(Ye||"obj")+`) {
`+(Ye?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(K?", __e = _.escape":"")+(ee?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Ie+`return __p
}`;var ut=Kp(function(){return Nt(O,Ve+"return "+Ie).apply(r,M)});if(ut.source=Ie,Zu(ut))throw ut;return ut}function N2(t){return Ft(t).toLowerCase()}function F2(t){return Ft(t).toUpperCase()}function U2(t,n,a){if(t=Ft(t),t&&(a||n===r))return Xf(t);if(!t||!(n=rn(n)))return t;var l=xn(t),b=xn(n),O=Zf(l,b),M=ed(l,b)+1;return bi(l,O,M).join("")}function j2(t,n,a){if(t=Ft(t),t&&(a||n===r))return t.slice(0,rd(t)+1);if(!t||!(n=rn(n)))return t;var l=xn(t),b=ed(l,xn(n))+1;return bi(l,0,b).join("")}function L2(t,n,a){if(t=Ft(t),t&&(a||n===r))return t.replace(Zc,"");if(!t||!(n=rn(n)))return t;var l=xn(t),b=Zf(l,xn(n));return bi(l,b).join("")}function M2(t,n){var a=R1,l=T1;if(Yt(n)){var b="separator"in n?n.separator:b;a="length"in n?ot(n.length):a,l="omission"in n?rn(n.omission):l}t=Ft(t);var O=t.length;if(ds(t)){var M=xn(t);O=M.length}if(a>=O)return t;var K=a-ps(l);if(K<1)return l;var ee=M?bi(M,0,K).join(""):t.slice(0,K);if(b===r)return ee+l;if(M&&(K+=ee.length-K),eh(b)){if(t.slice(K).search(b)){var be,Ee=ee;for(b.global||(b=yu(b.source,Ft(wf.exec(b))+"g")),b.lastIndex=0;be=b.exec(Ee);)var Ie=be.index;ee=ee.slice(0,Ie===r?K:Ie)}}else if(t.indexOf(rn(b),K)!=K){var je=ee.lastIndexOf(b);je>-1&&(ee=ee.slice(0,je))}return ee+l}function B2(t){return t=Ft(t),t&&Y1.test(t)?t.replace(vf,pb):t}var z2=bs(function(t,n,a){return t+(a?" ":"")+n.toUpperCase()}),nh=Vd("toUpperCase");function Hp(t,n,a){return t=Ft(t),n=a?r:n,n===r?ub(t)?vb(t):eb(t):t.match(n)||[]}var Kp=ft(function(t,n){try{return en(t,r,n)}catch(a){return Zu(a)?a:new rt(a)}}),$2=ti(function(t,n){return ln(n,function(a){a=Bn(a),Zn(t,a,Qu(t[a],t))}),t});function H2(t){var n=t==null?0:t.length,a=ke();return t=n?kt(t,function(l){if(typeof l[1]!="function")throw new fn(D);return[a(l[0]),l[1]]}):[],ft(function(l){for(var b=-1;++b<n;){var O=t[b];if(en(O[0],this,l))return en(O[1],this,l)}})}function K2(t){return pE(pn(t,oe))}function ih(t){return function(){return t}}function V2(t,n){return t==null||t!==t?n:t}var q2=Wd(),W2=Wd(!0);function kr(t){return t}function sh(t){return Ed(typeof t=="function"?t:pn(t,oe))}function G2(t){return Sd(pn(t,oe))}function k2(t,n){return Id(t,pn(n,oe))}var J2=ft(function(t,n){return function(a){return no(a,t,n)}}),Y2=ft(function(t,n){return function(a){return no(t,a,n)}});function oh(t,n,a){var l=Dr(n),b=fa(n,l);a==null&&!(Yt(n)&&(b.length||!l.length))&&(a=n,n=t,t=this,b=fa(n,Dr(n)));var O=!(Yt(a)&&"chain"in a)||!!a.chain,M=ni(t);return ln(b,function(K){var ee=n[K];t[K]=ee,M&&(t.prototype[K]=function(){var be=this.__chain__;if(O||be){var Ee=t(this.__wrapped__),Ie=Ee.__actions__=qr(this.__actions__);return Ie.push({func:ee,args:arguments,thisArg:t}),Ee.__chain__=be,Ee}return ee.apply(t,gi([this.value()],arguments))})}),t}function Q2(){return Or._===this&&(Or._=Db),this}function ah(){}function X2(t){return t=ot(t),ft(function(n){return xd(n,t)})}var Z2=Mu(kt),eS=Mu(Gf),tS=Mu(uu);function Vp(t){return qu(t)?hu(Bn(t)):RE(t)}function rS(t){return function(n){return t==null?r:Bi(t,n)}}var nS=kd(),iS=kd(!0);function ch(){return[]}function uh(){return!1}function sS(){return{}}function oS(){return""}function aS(){return!0}function cS(t,n){if(t=ot(t),t<1||t>di)return[];var a=jn,l=Rr(t,jn);n=ke(n),t-=jn;for(var b=du(l,n);++a<t;)n(a);return b}function uS(t){return st(t)?kt(t,Bn):nn(t)?[t]:qr(hp(Ft(t)))}function hS(t){var n=++bb;return Ft(t)+n}var lS=ma(function(t,n){return t+n},0),fS=Bu("ceil"),dS=ma(function(t,n){return t/n},1),pS=Bu("floor");function gS(t){return t&&t.length?la(t,kr,Su):r}function yS(t,n){return t&&t.length?la(t,ke(n,2),Su):r}function vS(t){return Yf(t,kr)}function mS(t,n){return Yf(t,ke(n,2))}function _S(t){return t&&t.length?la(t,kr,Pu):r}function wS(t,n){return t&&t.length?la(t,ke(n,2),Pu):r}var bS=ma(function(t,n){return t*n},1),ES=Bu("round"),DS=ma(function(t,n){return t-n},0);function SS(t){return t&&t.length?fu(t,kr):0}function IS(t,n){return t&&t.length?fu(t,ke(n,2)):0}return I.after=G6,I.ary=bp,I.assign=FD,I.assignIn=Up,I.assignInWith=Ra,I.assignWith=UD,I.at=jD,I.before=Ep,I.bind=Qu,I.bindAll=$2,I.bindKey=Dp,I.castArray=sD,I.chain=mp,I.chunk=p3,I.compact=g3,I.concat=y3,I.cond=H2,I.conforms=K2,I.constant=ih,I.countBy=S6,I.create=LD,I.curry=Sp,I.curryRight=Ip,I.debounce=xp,I.defaults=MD,I.defaultsDeep=BD,I.defer=k6,I.delay=J6,I.difference=v3,I.differenceBy=m3,I.differenceWith=_3,I.drop=w3,I.dropRight=b3,I.dropRightWhile=E3,I.dropWhile=D3,I.fill=S3,I.filter=x6,I.flatMap=C6,I.flatMapDeep=A6,I.flatMapDepth=R6,I.flatten=pp,I.flattenDeep=I3,I.flattenDepth=x3,I.flip=Y6,I.flow=q2,I.flowRight=W2,I.fromPairs=O3,I.functions=WD,I.functionsIn=GD,I.groupBy=T6,I.initial=C3,I.intersection=A3,I.intersectionBy=R3,I.intersectionWith=T3,I.invert=JD,I.invertBy=YD,I.invokeMap=F6,I.iteratee=sh,I.keyBy=U6,I.keys=Dr,I.keysIn=Gr,I.map=Ia,I.mapKeys=XD,I.mapValues=ZD,I.matches=G2,I.matchesProperty=k2,I.memoize=Oa,I.merge=e2,I.mergeWith=jp,I.method=J2,I.methodOf=Y2,I.mixin=oh,I.negate=Pa,I.nthArg=X2,I.omit=t2,I.omitBy=r2,I.once=Q6,I.orderBy=j6,I.over=Z2,I.overArgs=X6,I.overEvery=eS,I.overSome=tS,I.partial=Xu,I.partialRight=Op,I.partition=L6,I.pick=n2,I.pickBy=Lp,I.property=Vp,I.propertyOf=rS,I.pull=j3,I.pullAll=yp,I.pullAllBy=L3,I.pullAllWith=M3,I.pullAt=B3,I.range=nS,I.rangeRight=iS,I.rearg=Z6,I.reject=z6,I.remove=z3,I.rest=eD,I.reverse=Ju,I.sampleSize=H6,I.set=s2,I.setWith=o2,I.shuffle=K6,I.slice=$3,I.sortBy=W6,I.sortedUniq=k3,I.sortedUniqBy=J3,I.split=C2,I.spread=tD,I.tail=Y3,I.take=Q3,I.takeRight=X3,I.takeRightWhile=Z3,I.takeWhile=e6,I.tap=g6,I.throttle=rD,I.thru=Sa,I.toArray=Tp,I.toPairs=Mp,I.toPairsIn=Bp,I.toPath=uS,I.toPlainObject=Fp,I.transform=a2,I.unary=nD,I.union=t6,I.unionBy=r6,I.unionWith=n6,I.uniq=i6,I.uniqBy=s6,I.uniqWith=o6,I.unset=c2,I.unzip=Yu,I.unzipWith=vp,I.update=u2,I.updateWith=h2,I.values=Ss,I.valuesIn=l2,I.without=a6,I.words=Hp,I.wrap=iD,I.xor=c6,I.xorBy=u6,I.xorWith=h6,I.zip=l6,I.zipObject=f6,I.zipObjectDeep=d6,I.zipWith=p6,I.entries=Mp,I.entriesIn=Bp,I.extend=Up,I.extendWith=Ra,oh(I,I),I.add=lS,I.attempt=Kp,I.camelCase=g2,I.capitalize=zp,I.ceil=fS,I.clamp=f2,I.clone=oD,I.cloneDeep=cD,I.cloneDeepWith=uD,I.cloneWith=aD,I.conformsTo=hD,I.deburr=$p,I.defaultTo=V2,I.divide=dS,I.endsWith=y2,I.eq=Pn,I.escape=v2,I.escapeRegExp=m2,I.every=I6,I.find=O6,I.findIndex=fp,I.findKey=zD,I.findLast=P6,I.findLastIndex=dp,I.findLastKey=$D,I.floor=pS,I.forEach=_p,I.forEachRight=wp,I.forIn=HD,I.forInRight=KD,I.forOwn=VD,I.forOwnRight=qD,I.get=th,I.gt=lD,I.gte=fD,I.has=kD,I.hasIn=rh,I.head=gp,I.identity=kr,I.includes=N6,I.indexOf=P3,I.inRange=d2,I.invoke=QD,I.isArguments=Hi,I.isArray=st,I.isArrayBuffer=dD,I.isArrayLike=Wr,I.isArrayLikeObject=or,I.isBoolean=pD,I.isBuffer=Ei,I.isDate=gD,I.isElement=yD,I.isEmpty=vD,I.isEqual=mD,I.isEqualWith=_D,I.isError=Zu,I.isFinite=wD,I.isFunction=ni,I.isInteger=Pp,I.isLength=Ca,I.isMap=Cp,I.isMatch=bD,I.isMatchWith=ED,I.isNaN=DD,I.isNative=SD,I.isNil=xD,I.isNull=ID,I.isNumber=Ap,I.isObject=Yt,I.isObjectLike=tr,I.isPlainObject=uo,I.isRegExp=eh,I.isSafeInteger=OD,I.isSet=Rp,I.isString=Aa,I.isSymbol=nn,I.isTypedArray=Ds,I.isUndefined=PD,I.isWeakMap=CD,I.isWeakSet=AD,I.join=N3,I.kebabCase=_2,I.last=yn,I.lastIndexOf=F3,I.lowerCase=w2,I.lowerFirst=b2,I.lt=RD,I.lte=TD,I.max=gS,I.maxBy=yS,I.mean=vS,I.meanBy=mS,I.min=_S,I.minBy=wS,I.stubArray=ch,I.stubFalse=uh,I.stubObject=sS,I.stubString=oS,I.stubTrue=aS,I.multiply=bS,I.nth=U3,I.noConflict=Q2,I.noop=ah,I.now=xa,I.pad=E2,I.padEnd=D2,I.padStart=S2,I.parseInt=I2,I.random=p2,I.reduce=M6,I.reduceRight=B6,I.repeat=x2,I.replace=O2,I.result=i2,I.round=ES,I.runInContext=Y,I.sample=$6,I.size=V6,I.snakeCase=P2,I.some=q6,I.sortedIndex=H3,I.sortedIndexBy=K3,I.sortedIndexOf=V3,I.sortedLastIndex=q3,I.sortedLastIndexBy=W3,I.sortedLastIndexOf=G3,I.startCase=A2,I.startsWith=R2,I.subtract=DS,I.sum=SS,I.sumBy=IS,I.template=T2,I.times=cS,I.toFinite=ii,I.toInteger=ot,I.toLength=Np,I.toLower=N2,I.toNumber=vn,I.toSafeInteger=ND,I.toString=Ft,I.toUpper=F2,I.trim=U2,I.trimEnd=j2,I.trimStart=L2,I.truncate=M2,I.unescape=B2,I.uniqueId=hS,I.upperCase=z2,I.upperFirst=nh,I.each=_p,I.eachRight=wp,I.first=gp,oh(I,function(){var t={};return Ln(I,function(n,a){Ut.call(I.prototype,a)||(t[a]=n)}),t}(),{chain:!1}),I.VERSION=o,ln(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){I[t].placeholder=I}),ln(["drop","take"],function(t,n){bt.prototype[t]=function(a){a=a===r?1:mr(ot(a),0);var l=this.__filtered__&&!n?new bt(this):this.clone();return l.__filtered__?l.__takeCount__=Rr(a,l.__takeCount__):l.__views__.push({size:Rr(a,jn),type:t+(l.__dir__<0?"Right":"")}),l},bt.prototype[t+"Right"]=function(a){return this.reverse()[t](a).reverse()}}),ln(["filter","map","takeWhile"],function(t,n){var a=n+1,l=a==pf||a==j1;bt.prototype[t]=function(b){var O=this.clone();return O.__iteratees__.push({iteratee:ke(b,3),type:a}),O.__filtered__=O.__filtered__||l,O}}),ln(["head","last"],function(t,n){var a="take"+(n?"Right":"");bt.prototype[t]=function(){return this[a](1).value()[0]}}),ln(["initial","tail"],function(t,n){var a="drop"+(n?"":"Right");bt.prototype[t]=function(){return this.__filtered__?new bt(this):this[a](1)}}),bt.prototype.compact=function(){return this.filter(kr)},bt.prototype.find=function(t){return this.filter(t).head()},bt.prototype.findLast=function(t){return this.reverse().find(t)},bt.prototype.invokeMap=ft(function(t,n){return typeof t=="function"?new bt(this):this.map(function(a){return no(a,t,n)})}),bt.prototype.reject=function(t){return this.filter(Pa(ke(t)))},bt.prototype.slice=function(t,n){t=ot(t);var a=this;return a.__filtered__&&(t>0||n<0)?new bt(a):(t<0?a=a.takeRight(-t):t&&(a=a.drop(t)),n!==r&&(n=ot(n),a=n<0?a.dropRight(-n):a.take(n-t)),a)},bt.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},bt.prototype.toArray=function(){return this.take(jn)},Ln(bt.prototype,function(t,n){var a=/^(?:filter|find|map|reject)|While$/.test(n),l=/^(?:head|last)$/.test(n),b=I[l?"take"+(n=="last"?"Right":""):n],O=l||/^find/.test(n);b&&(I.prototype[n]=function(){var M=this.__wrapped__,K=l?[1]:arguments,ee=M instanceof bt,be=K[0],Ee=ee||st(M),Ie=function(mt){var St=b.apply(I,gi([mt],K));return l&&je?St[0]:St};Ee&&a&&typeof be=="function"&&be.length!=1&&(ee=Ee=!1);var je=this.__chain__,Ve=!!this.__actions__.length,Ye=O&&!je,ut=ee&&!Ve;if(!O&&Ee){M=ut?M:new bt(this);var Qe=t.apply(M,K);return Qe.__actions__.push({func:Sa,args:[Ie],thisArg:r}),new dn(Qe,je)}return Ye&&ut?t.apply(this,K):(Qe=this.thru(Ie),Ye?l?Qe.value()[0]:Qe.value():Qe)})}),ln(["pop","push","shift","sort","splice","unshift"],function(t){var n=Yo[t],a=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",l=/^(?:pop|shift)$/.test(t);I.prototype[t]=function(){var b=arguments;if(l&&!this.__chain__){var O=this.value();return n.apply(st(O)?O:[],b)}return this[a](function(M){return n.apply(st(M)?M:[],b)})}}),Ln(bt.prototype,function(t,n){var a=I[n];if(a){var l=a.name+"";Ut.call(ms,l)||(ms[l]=[]),ms[l].push({name:n,func:a})}}),ms[va(r,Xe).name]=[{name:"wrapper",func:r}],bt.prototype.clone=Bb,bt.prototype.reverse=zb,bt.prototype.value=$b,I.prototype.at=y6,I.prototype.chain=v6,I.prototype.commit=m6,I.prototype.next=_6,I.prototype.plant=b6,I.prototype.reverse=E6,I.prototype.toJSON=I.prototype.valueOf=I.prototype.value=D6,I.prototype.first=I.prototype.head,Ys&&(I.prototype[Ys]=w6),I},gs=mb();Fi?((Fi.exports=gs)._=gs,su._=gs):Or._=gs}).call(zs)})(Fc,Fc.exports);var J_=Object.defineProperty,Y_=Object.defineProperties,Q_=Object.getOwnPropertyDescriptors,rf=Object.getOwnPropertySymbols,X_=Object.prototype.hasOwnProperty,Z_=Object.prototype.propertyIsEnumerable,nf=(s,e,r)=>e in s?J_(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r,jo=(s,e)=>{for(var r in e||(e={}))X_.call(e,r)&&nf(s,r,e[r]);if(rf)for(var r of rf(e))Z_.call(e,r)&&nf(s,r,e[r]);return s},e1=(s,e)=>Y_(s,Q_(e));function fi(s,e,r){var o;const u=Oi(s);return((o=e.rpcMap)==null?void 0:o[u.reference])||`${k_}?chainId=${u.namespace}:${u.reference}&projectId=${r}`}function Ti(s){return s.includes(":")?s.split(":")[1]:s}function sf(s){return s.map(e=>`${e.split(":")[0]}:${e.split(":")[1]}`)}function t1(s,e){const r=Object.keys(e.namespaces).filter(u=>u.includes(s));if(!r.length)return[];const o=[];return r.forEach(u=>{const p=e.namespaces[u].accounts;o.push(...p)}),o}function of(s={},e={}){const r=af(s),o=af(e);return Fc.exports.merge(r,o)}function af(s){var e,r,o,u;const p={};if(!is(s))return p;for(const[D,F]of Object.entries(s)){const G=Eo(D)?[D]:F.chains,U=F.methods||[],te=F.events||[],oe=F.rpcMap||{},_e=ns(D);p[_e]=e1(jo(jo({},p[_e]),F),{chains:Nn(G,(e=p[_e])==null?void 0:e.chains),methods:Nn(U,(r=p[_e])==null?void 0:r.methods),events:Nn(te,(o=p[_e])==null?void 0:o.events),rpcMap:jo(jo({},oe),(u=p[_e])==null?void 0:u.rpcMap)})}return p}function r1(s){return s.includes(":")?s.split(":")[2]:s}function n1(s){const e={};for(const[r,o]of Object.entries(s)){const u=o.methods||[],p=o.events||[],D=o.accounts||[],F=Eo(r)?[r]:o.chains?o.chains:sf(o.accounts);e[r]={chains:F,methods:u,events:p,accounts:D}}return e}function Uc(s){return typeof s=="number"?s:s.includes("0x")?parseInt(s,16):(s=s.includes(":")?s.split(":")[1]:s,isNaN(Number(s))?s:Number(s))}const cf={},Gt=s=>cf[s],jc=(s,e)=>{cf[s]=e};class i1{constructor(e){this.name="polkadot",this.namespace=e.namespace,this.events=Gt("events"),this.client=Gt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Jn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var o;const u=Ti(r);e[u]=this.createHttpProvider(u,(o=this.namespace.rpcMap)==null?void 0:o[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const o=this.createHttpProvider(e,r);o&&(this.httpProviders[e]=o)}createHttpProvider(e,r){const o=r||fi(e,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${e}`);return new qn(new Ri(o,Gt("disableProviderPing")))}}class s1{constructor(e){this.name="eip155",this.namespace=e.namespace,this.events=Gt("events"),this.client=Gt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(e){switch(e.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(e);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(e.request.method)?await this.client.request(e):this.getHttpProvider().request(e.request)}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(parseInt(e),r),this.chainId=parseInt(e),this.events.emit(Jn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}createHttpProvider(e,r){const o=r||fi(`${this.name}:${e}`,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${e}`);return new qn(new Zl(o,Gt("disableProviderPing")))}setHttpProvider(e,r){const o=this.createHttpProvider(e,r);o&&(this.httpProviders[e]=o)}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var o;const u=parseInt(Ti(r));e[u]=this.createHttpProvider(u,(o=this.namespace.rpcMap)==null?void 0:o[r])}),e}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const e=this.chainId,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}async handleSwitchChain(e){var r,o;let u=e.request.params?(r=e.request.params[0])==null?void 0:r.chainId:"0x0";u=u.startsWith("0x")?u:`0x${u}`;const p=parseInt(u,16);if(this.isChainApproved(p))this.setDefaultChain(`${p}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:e.topic,request:{method:e.request.method,params:[{chainId:u}]},chainId:(o=this.namespace.chains)==null?void 0:o[0]}),this.setDefaultChain(`${p}`);else throw new Error(`Failed to switch to chain 'eip155:${p}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(e){return this.namespace.chains.includes(`${this.name}:${e}`)}}class o1{constructor(e){this.name="solana",this.namespace=e.namespace,this.events=Gt("events"),this.client=Gt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Jn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var o;const u=Ti(r);e[u]=this.createHttpProvider(u,(o=this.namespace.rpcMap)==null?void 0:o[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const o=this.createHttpProvider(e,r);o&&(this.httpProviders[e]=o)}createHttpProvider(e,r){const o=r||fi(e,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${e}`);return new qn(new Ri(o,Gt("disableProviderPing")))}}class a1{constructor(e){this.name="cosmos",this.namespace=e.namespace,this.events=Gt("events"),this.client=Gt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Jn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var o;const u=Ti(r);e[u]=this.createHttpProvider(u,(o=this.namespace.rpcMap)==null?void 0:o[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const o=this.createHttpProvider(e,r);o&&(this.httpProviders[e]=o)}createHttpProvider(e,r){const o=r||fi(e,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${e}`);return new qn(new Ri(o,Gt("disableProviderPing")))}}class c1{constructor(e){this.name="cip34",this.namespace=e.namespace,this.events=Gt("events"),this.client=Gt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Jn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{const o=this.getCardanoRPCUrl(r),u=Ti(r);e[u]=this.createHttpProvider(u,o)}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}getCardanoRPCUrl(e){const r=this.namespace.rpcMap;if(r)return r[e]}setHttpProvider(e,r){const o=this.createHttpProvider(e,r);o&&(this.httpProviders[e]=o)}createHttpProvider(e,r){const o=r||this.getCardanoRPCUrl(e);if(!o)throw new Error(`No RPC url provided for chainId: ${e}`);return new qn(new Ri(o,Gt("disableProviderPing")))}}class u1{constructor(e){this.name="elrond",this.namespace=e.namespace,this.events=Gt("events"),this.client=Gt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Jn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var o;const u=Ti(r);e[u]=this.createHttpProvider(u,(o=this.namespace.rpcMap)==null?void 0:o[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const o=this.createHttpProvider(e,r);o&&(this.httpProviders[e]=o)}createHttpProvider(e,r){const o=r||fi(e,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${e}`);return new qn(new Ri(o,Gt("disableProviderPing")))}}class h1{constructor(e){this.name="multiversx",this.namespace=e.namespace,this.events=Gt("events"),this.client=Gt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){this.httpProviders[e]||this.setHttpProvider(e,r),this.chainId=e,this.events.emit(Jn.DEFAULT_CHAIN_CHANGED,`${this.name}:${e}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}getAccounts(){const e=this.namespace.accounts;return e?[...new Set(e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var o;const u=Ti(r);e[u]=this.createHttpProvider(u,(o=this.namespace.rpcMap)==null?void 0:o[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const o=this.createHttpProvider(e,r);o&&(this.httpProviders[e]=o)}createHttpProvider(e,r){const o=r||fi(e,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${e}`);return new qn(new Ri(o,Gt("disableProviderPing")))}}class l1{constructor(e){this.name="near",this.namespace=e.namespace,this.events=Gt("events"),this.client=Gt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(e){this.namespace=Object.assign(this.namespace,e)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const e=this.namespace.chains[0];if(!e)throw new Error("ChainId not found");return e.split(":")[1]}request(e){return this.namespace.methods.includes(e.request.method)?this.client.request(e):this.getHttpProvider().request(e.request)}setDefaultChain(e,r){if(this.chainId=e,!this.httpProviders[e]){const o=r||fi(`${this.name}:${e}`,this.namespace);if(!o)throw new Error(`No RPC url provided for chainId: ${e}`);this.setHttpProvider(e,o)}this.events.emit(Jn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const e=this.namespace.accounts;return e?e.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const e={};return this.namespace.chains.forEach(r=>{var o;e[r]=this.createHttpProvider(r,(o=this.namespace.rpcMap)==null?void 0:o[r])}),e}getHttpProvider(){const e=`${this.name}:${this.chainId}`,r=this.httpProviders[e];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${e} not found`);return r}setHttpProvider(e,r){const o=this.createHttpProvider(e,r);o&&(this.httpProviders[e]=o)}createHttpProvider(e,r){const o=r||fi(e,this.namespace);return typeof o>"u"?void 0:new qn(new Ri(o,Gt("disableProviderPing")))}}var f1=Object.defineProperty,d1=Object.defineProperties,p1=Object.getOwnPropertyDescriptors,uf=Object.getOwnPropertySymbols,g1=Object.prototype.hasOwnProperty,y1=Object.prototype.propertyIsEnumerable,hf=(s,e,r)=>e in s?f1(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r,Lo=(s,e)=>{for(var r in e||(e={}))g1.call(e,r)&&hf(s,r,e[r]);if(uf)for(var r of uf(e))y1.call(e,r)&&hf(s,r,e[r]);return s},Lc=(s,e)=>d1(s,p1(e));class Mc{constructor(e){this.events=new(Pe()),this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=e,this.logger=typeof(e==null?void 0:e.logger)<"u"&&typeof(e==null?void 0:e.logger)!="string"?e.logger:(0,Dt.pino)((0,Dt.getDefaultLoggerOptions)({level:(e==null?void 0:e.logger)||ef})),this.disableProviderPing=(e==null?void 0:e.disableProviderPing)||!1}static async init(e){const r=new Mc(e);return await r.initialize(),r}async request(e,r,o){const[u,p]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(u).request({request:Lo({},e),chainId:`${u}:${p}`,topic:this.session.topic,expiry:o})}sendAsync(e,r,o,u){const p=new Date().getTime();this.request(e,o,u).then(D=>r(null,Ao(p,D))).catch(D=>r(D,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var e;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(e=this.session)==null?void 0:e.topic,reason:Wt("USER_DISCONNECTED")}),await this.cleanup()}async connect(e){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(e),await this.cleanupPendingPairings(),!e.skipPairing)return await this.pair(e.pairingTopic)}on(e,r){this.events.on(e,r)}once(e,r){this.events.once(e,r)}removeListener(e,r){this.events.removeListener(e,r)}off(e,r){this.events.off(e,r)}get isWalletConnect(){return!0}async pair(e){this.shouldAbortPairingAttempt=!1;let r=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(r>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:o,approval:u}=await this.client.connect({pairingTopic:e,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});o&&(this.uri=o,this.events.emit("display_uri",o)),await u().then(p=>{this.session=p;const D=n1(p.namespaces);this.namespaces=of(this.namespaces,D),this.persist("namespaces",this.namespaces)}).catch(p=>{if(p.message!==Gl)throw p;r++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(e,r){try{if(!this.session)return;const[o,u]=this.validateChain(e);this.getProvider(o).setDefaultChain(u,r)}catch(o){if(!/Please call connect/.test(o.message))throw o}}async cleanupPendingPairings(e={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(Fn(r)){for(const o of r)e.deletePairings?this.client.core.expirer.set(o.topic,0):await this.client.core.relayer.subscriber.unsubscribe(o.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const e=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[e]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await Nc.init({logger:this.providerOpts.logger||ef,relayUrl:this.providerOpts.relayUrl||q_,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const e=[...new Set(Object.keys(this.session.namespaces).map(r=>ns(r)))];jc("client",this.client),jc("events",this.events),jc("disableProviderPing",this.disableProviderPing),e.forEach(r=>{if(!this.session)return;const o=t1(r,this.session),u=sf(o),p=of(this.namespaces,this.optionalNamespaces),D=Lc(Lo({},p[r]),{accounts:o,chains:u});switch(r){case"eip155":this.rpcProviders[r]=new s1({namespace:D});break;case"solana":this.rpcProviders[r]=new o1({namespace:D});break;case"cosmos":this.rpcProviders[r]=new a1({namespace:D});break;case"polkadot":this.rpcProviders[r]=new i1({namespace:D});break;case"cip34":this.rpcProviders[r]=new c1({namespace:D});break;case"elrond":this.rpcProviders[r]=new u1({namespace:D});break;case"multiversx":this.rpcProviders[r]=new h1({namespace:D});break;case"near":this.rpcProviders[r]=new l1({namespace:D});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",e=>{this.events.emit("session_ping",e)}),this.client.on("session_event",e=>{const{params:r}=e,{event:o}=r;if(o.name==="accountsChanged"){const u=o.data;u&&Fn(u)&&this.events.emit("accountsChanged",u.map(r1))}else if(o.name==="chainChanged"){const u=r.chainId,p=r.event.data,D=ns(u),F=Uc(u)!==Uc(p)?`${D}:${Uc(p)}`:u;this.onChainChanged(F)}else this.events.emit(o.name,o.data);this.events.emit("session_event",e)}),this.client.on("session_update",({topic:e,params:r})=>{var o;const{namespaces:u}=r,p=(o=this.client)==null?void 0:o.session.get(e);this.session=Lc(Lo({},p),{namespaces:u}),this.onSessionUpdate(),this.events.emit("session_update",{topic:e,params:r})}),this.client.on("session_delete",async e=>{await this.cleanup(),this.events.emit("session_delete",e),this.events.emit("disconnect",Lc(Lo({},Wt("USER_DISCONNECTED")),{data:e.topic}))}),this.on(Jn.DEFAULT_CHAIN_CHANGED,e=>{this.onChainChanged(e,!0)})}getProvider(e){if(!this.rpcProviders[e])throw new Error(`Provider not found: ${e}`);return this.rpcProviders[e]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(e=>{var r;this.getProvider(e).updateNamespace((r=this.session)==null?void 0:r.namespaces[e])})}setNamespaces(e){const{namespaces:r,optionalNamespaces:o,sessionProperties:u}=e;r&&Object.keys(r).length&&(this.namespaces=r),o&&Object.keys(o).length&&(this.optionalNamespaces=o),this.sessionProperties=u,this.persist("namespaces",r),this.persist("optionalNamespaces",o)}validateChain(e){const[r,o]=(e==null?void 0:e.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,o];if(r&&!Object.keys(this.namespaces||{}).map(D=>ns(D)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&o)return[r,o];const u=ns(Object.keys(this.namespaces)[0]),p=this.rpcProviders[u].getDefaultChain();return[u,p]}async requestAccounts(){const[e]=this.validateChain();return await this.getProvider(e).requestAccounts()}onChainChanged(e,r=!1){if(!this.namespaces)return;const[o,u]=this.validateChain(e);u&&(r||this.getProvider(o).setDefaultChain(u),this.namespaces[o]?this.namespaces[o].defaultChain=u:this.namespaces[`${o}:${u}`]?this.namespaces[`${o}:${u}`].defaultChain=u:this.namespaces[`${o}:${u}`]={defaultChain:u},this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",u))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(e,r){this.client.core.storage.setItem(`${tf}/${e}`,r)}async getFromStore(e){return await this.client.core.storage.getItem(`${tf}/${e}`)}}const v1=Mc,m1="wc",_1="ethereum_provider",w1=`${m1}@2:${_1}:`,b1="https://rpc.walletconnect.com/v1/",Bc=["eth_sendTransaction","personal_sign"],E1=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],zc=["chainChanged","accountsChanged"],D1=["chainChanged","accountsChanged","message","disconnect","connect"];var S1=Object.defineProperty,I1=Object.defineProperties,x1=Object.getOwnPropertyDescriptors,lf=Object.getOwnPropertySymbols,O1=Object.prototype.hasOwnProperty,P1=Object.prototype.propertyIsEnumerable,ff=(s,e,r)=>e in s?S1(s,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[e]=r,$s=(s,e)=>{for(var r in e||(e={}))O1.call(e,r)&&ff(s,r,e[r]);if(lf)for(var r of lf(e))P1.call(e,r)&&ff(s,r,e[r]);return s},df=(s,e)=>I1(s,x1(e));function Mo(s){return Number(s[0].split(":")[1])}function $c(s){return`0x${s.toString(16)}`}function C1(s){const{chains:e,optionalChains:r,methods:o,optionalMethods:u,events:p,optionalEvents:D,rpcMap:F}=s;if(!Fn(e))throw new Error("Invalid chains");const G={chains:e,methods:o||Bc,events:p||zc,rpcMap:$s({},e.length?{[Mo(e)]:F[Mo(e)]}:{})},U=p==null?void 0:p.filter(ze=>!zc.includes(ze)),te=o==null?void 0:o.filter(ze=>!Bc.includes(ze));if(!r&&!D&&!u&&!(U!=null&&U.length)&&!(te!=null&&te.length))return{required:e.length?G:void 0};const oe=(U==null?void 0:U.length)&&(te==null?void 0:te.length)||!r,_e={chains:[...new Set(oe?G.chains.concat(r||[]):r)],methods:[...new Set(G.methods.concat(u!=null&&u.length?u:E1))],events:[...new Set(G.events.concat(D!=null&&D.length?D:D1))],rpcMap:F};return{required:e.length?G:void 0,optional:r.length?_e:void 0}}class Hc{constructor(){this.events=new fe.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=w1,this.on=(e,r)=>(this.events.on(e,r),this),this.once=(e,r)=>(this.events.once(e,r),this),this.removeListener=(e,r)=>(this.events.removeListener(e,r),this),this.off=(e,r)=>(this.events.off(e,r),this),this.parseAccount=e=>this.isCompatibleChainId(e)?this.parseAccountId(e).address:e,this.signer={},this.rpc={}}static async init(e){const r=new Hc;return await r.initialize(e),r}async request(e,r){return await this.signer.request(e,this.formatChainId(this.chainId),r)}sendAsync(e,r,o){this.signer.sendAsync(e,r,this.formatChainId(this.chainId),o)}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(e){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(e);const{required:r,optional:o}=C1(this.rpc);try{const u=await new Promise(async(D,F)=>{var G;this.rpc.showQrModal&&((G=this.modal)==null||G.subscribeModal(U=>{!U.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),F(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(df($s({namespaces:$s({},r&&{[this.namespace]:r})},o&&{optionalNamespaces:{[this.namespace]:o}}),{pairingTopic:e==null?void 0:e.pairingTopic})).then(U=>{D(U)}).catch(U=>{F(new Error(U.message))})});if(!u)return;const p=Qp(u.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:p),this.setAccounts(p),this.events.emit("connect",{chainId:$c(this.chainId)})}catch(u){throw this.signer.logger.error(u),u}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",e=>{const{params:r}=e,{event:o}=r;o.name==="accountsChanged"?(this.accounts=this.parseAccounts(o.data),this.events.emit("accountsChanged",this.accounts)):o.name==="chainChanged"?this.setChainId(this.formatChainId(o.data)):this.events.emit(o.name,o.data),this.events.emit("session_event",e)}),this.signer.on("chainChanged",e=>{const r=parseInt(e);this.chainId=r,this.events.emit("chainChanged",$c(this.chainId)),this.persist()}),this.signer.on("session_update",e=>{this.events.emit("session_update",e)}),this.signer.on("session_delete",e=>{this.reset(),this.events.emit("session_delete",e),this.events.emit("disconnect",df($s({},Wt("USER_DISCONNECTED")),{data:e.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",e=>{var r,o;this.rpc.showQrModal&&((r=this.modal)==null||r.closeModal(),(o=this.modal)==null||o.openModal({uri:e})),this.events.emit("display_uri",e)})}switchEthereumChain(e){this.request({method:"wallet_switchEthereumChain",params:[{chainId:e.toString(16)}]})}isCompatibleChainId(e){return typeof e=="string"?e.startsWith(`${this.namespace}:`):!1}formatChainId(e){return`${this.namespace}:${e}`}parseChainId(e){return Number(e.split(":")[1])}setChainIds(e){const r=e.filter(o=>this.isCompatibleChainId(o)).map(o=>this.parseChainId(o));r.length&&(this.chainId=r[0],this.events.emit("chainChanged",$c(this.chainId)),this.persist())}setChainId(e){if(this.isCompatibleChainId(e)){const r=this.parseChainId(e);this.chainId=r,this.switchEthereumChain(r)}}parseAccountId(e){const[r,o,u]=e.split(":");return{chainId:`${r}:${o}`,address:u}}setAccounts(e){this.accounts=e.filter(r=>this.parseChainId(this.parseAccountId(r).chainId)===this.chainId).map(r=>this.parseAccountId(r).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(e){var r,o;const u=(r=e==null?void 0:e.chains)!=null?r:[],p=(o=e==null?void 0:e.optionalChains)!=null?o:[],D=u.concat(p);if(!D.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const F=u.length?(e==null?void 0:e.methods)||Bc:[],G=u.length?(e==null?void 0:e.events)||zc:[],U=(e==null?void 0:e.optionalMethods)||[],te=(e==null?void 0:e.optionalEvents)||[],oe=(e==null?void 0:e.rpcMap)||this.buildRpcMap(D,e.projectId),_e=(e==null?void 0:e.qrModalOptions)||void 0;return{chains:u==null?void 0:u.map(ze=>this.formatChainId(ze)),optionalChains:p.map(ze=>this.formatChainId(ze)),methods:F,events:G,optionalMethods:U,optionalEvents:te,rpcMap:oe,showQrModal:!!(e!=null&&e.showQrModal),qrModalOptions:_e,projectId:e.projectId,metadata:e.metadata}}buildRpcMap(e,r){const o={};return e.forEach(u=>{o[u]=this.getRpcUrl(u,r)}),o}async initialize(e){if(this.rpc=this.getRpcConfig(e),this.chainId=this.rpc.chains.length?Mo(this.rpc.chains):Mo(this.rpc.optionalChains),this.signer=await v1.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:e.disableProviderPing,relayUrl:e.relayUrl,storageOptions:e.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let r;try{const{WalletConnectModal:o}=await C.e(9343).then(C.bind(C,59343));r=o}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(r)try{this.modal=new r($s({projectId:this.rpc.projectId},this.rpc.qrModalOptions))}catch(o){throw this.signer.logger.error(o),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(e){if(!e)return;const{chains:r,optionalChains:o,rpcMap:u}=e;r&&Fn(r)&&(this.rpc.chains=r.map(p=>this.formatChainId(p)),r.forEach(p=>{this.rpc.rpcMap[p]=(u==null?void 0:u[p])||this.getRpcUrl(p)})),o&&Fn(o)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=o==null?void 0:o.map(p=>this.formatChainId(p)),o.forEach(p=>{this.rpc.rpcMap[p]=(u==null?void 0:u[p])||this.getRpcUrl(p)}))}getRpcUrl(e,r){var o;return((o=this.rpc.rpcMap)==null?void 0:o[e])||`${b1}?chainId=eip155:${e}&projectId=${r||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const e=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),r=this.session.namespaces[`${this.namespace}:${e}`]?this.session.namespaces[`${this.namespace}:${e}`]:this.session.namespaces[this.namespace];this.setChainIds(e?[this.formatChainId(e)]:r==null?void 0:r.accounts),this.setAccounts(r==null?void 0:r.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(e){return typeof e=="string"||e instanceof String?[this.parseAccount(e)]:e.map(r=>this.parseAccount(r))}}const A1=Hc},38200:function(Re,_,C){"use strict";C.d(_,{q:function(){return H}});class H{}},30997:function(Re,_,C){"use strict";C.r(_),C.d(_,{IEvents:function(){return H.q}});var H=C(38200)},32568:function(Re,_,C){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.HEARTBEAT_EVENTS=_.HEARTBEAT_INTERVAL=void 0;const H=C(66736);_.HEARTBEAT_INTERVAL=H.FIVE_SECONDS,_.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"}},53401:function(Re,_,C){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),C(57875).__exportStar(C(32568),_)},38969:function(Re,_,C){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.HeartBeat=void 0;const H=C(57875),ce=C(17187),ue=C(66736),ge=C(1614),B=C(53401);class re extends ge.IHeartBeat{constructor(N){super(N),this.events=new ce.EventEmitter,this.interval=B.HEARTBEAT_INTERVAL,this.interval=(N==null?void 0:N.interval)||B.HEARTBEAT_INTERVAL}static init(N){return H.__awaiter(this,void 0,void 0,function*(){const T=new re(N);return yield T.init(),T})}init(){return H.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(N,T){this.events.on(N,T)}once(N,T){this.events.once(N,T)}off(N,T){this.events.off(N,T)}removeListener(N,T){this.events.removeListener(N,T)}initialize(){return H.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),ue.toMiliseconds(this.interval))})}pulse(){this.events.emit(B.HEARTBEAT_EVENTS.pulse)}}_.HeartBeat=re},90772:function(Re,_,C){"use strict";Object.defineProperty(_,"__esModule",{value:!0});const H=C(57875);H.__exportStar(C(38969),_),H.__exportStar(C(1614),_),H.__exportStar(C(53401),_)},44174:function(Re,_,C){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.IHeartBeat=void 0;const H=C(30997);class ce extends H.IEvents{constructor(ge){super()}}_.IHeartBeat=ce},1614:function(Re,_,C){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),C(57875).__exportStar(C(44174),_)},72030:function(Re){"use strict";Re.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},65727:function(Re,_){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.PINO_CUSTOM_CONTEXT_KEY=_.PINO_LOGGER_DEFAULTS=void 0,_.PINO_LOGGER_DEFAULTS={level:"info"},_.PINO_CUSTOM_CONTEXT_KEY="custom_context"},9107:function(Re,_,C){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.pino=void 0;const H=C(85906),ce=H.__importDefault(C(36559));Object.defineProperty(_,"pino",{enumerable:!0,get:function(){return ce.default}}),H.__exportStar(C(65727),_),H.__exportStar(C(58048),_)},58048:function(Re,_,C){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.generateChildLogger=_.formatChildLoggerContext=_.getLoggerContext=_.setBrowserLoggerContext=_.getBrowserLoggerContext=_.getDefaultLoggerOptions=void 0;const H=C(65727);function ce(N){return Object.assign(Object.assign({},N),{level:(N==null?void 0:N.level)||H.PINO_LOGGER_DEFAULTS.level})}_.getDefaultLoggerOptions=ce;function ue(N,T=H.PINO_CUSTOM_CONTEXT_KEY){return N[T]||""}_.getBrowserLoggerContext=ue;function ge(N,T,j=H.PINO_CUSTOM_CONTEXT_KEY){return N[j]=T,N}_.setBrowserLoggerContext=ge;function B(N,T=H.PINO_CUSTOM_CONTEXT_KEY){let j="";return typeof N.bindings>"u"?j=ue(N,T):j=N.bindings().context||"",j}_.getLoggerContext=B;function re(N,T,j=H.PINO_CUSTOM_CONTEXT_KEY){const ie=B(N,j);return ie.trim()?`${ie}/${T}`:T}_.formatChildLoggerContext=re;function z(N,T,j=H.PINO_CUSTOM_CONTEXT_KEY){const ie=re(N,T,j),le=N.child({context:ie});return ge(le,ie,j)}_.generateChildLogger=z},61882:function(){},43014:function(){},36900:function(Re,_,C){"use strict";Object.defineProperty(_,"__esModule",{value:!0});const H=C(62108);H.__exportStar(C(46869),_),H.__exportStar(C(88033),_)},46869:function(Re,_){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.ONE_THOUSAND=_.ONE_HUNDRED=void 0,_.ONE_HUNDRED=100,_.ONE_THOUSAND=1e3},88033:function(Re,_){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.ONE_YEAR=_.FOUR_WEEKS=_.THREE_WEEKS=_.TWO_WEEKS=_.ONE_WEEK=_.THIRTY_DAYS=_.SEVEN_DAYS=_.FIVE_DAYS=_.THREE_DAYS=_.ONE_DAY=_.TWENTY_FOUR_HOURS=_.TWELVE_HOURS=_.SIX_HOURS=_.THREE_HOURS=_.ONE_HOUR=_.SIXTY_MINUTES=_.THIRTY_MINUTES=_.TEN_MINUTES=_.FIVE_MINUTES=_.ONE_MINUTE=_.SIXTY_SECONDS=_.THIRTY_SECONDS=_.TEN_SECONDS=_.FIVE_SECONDS=_.ONE_SECOND=void 0,_.ONE_SECOND=1,_.FIVE_SECONDS=5,_.TEN_SECONDS=10,_.THIRTY_SECONDS=30,_.SIXTY_SECONDS=60,_.ONE_MINUTE=_.SIXTY_SECONDS,_.FIVE_MINUTES=_.ONE_MINUTE*5,_.TEN_MINUTES=_.ONE_MINUTE*10,_.THIRTY_MINUTES=_.ONE_MINUTE*30,_.SIXTY_MINUTES=_.ONE_MINUTE*60,_.ONE_HOUR=_.SIXTY_MINUTES,_.THREE_HOURS=_.ONE_HOUR*3,_.SIX_HOURS=_.ONE_HOUR*6,_.TWELVE_HOURS=_.ONE_HOUR*12,_.TWENTY_FOUR_HOURS=_.ONE_HOUR*24,_.ONE_DAY=_.TWENTY_FOUR_HOURS,_.THREE_DAYS=_.ONE_DAY*3,_.FIVE_DAYS=_.ONE_DAY*5,_.SEVEN_DAYS=_.ONE_DAY*7,_.THIRTY_DAYS=_.ONE_DAY*30,_.ONE_WEEK=_.SEVEN_DAYS,_.TWO_WEEKS=_.ONE_WEEK*2,_.THREE_WEEKS=_.ONE_WEEK*3,_.FOUR_WEEKS=_.ONE_WEEK*4,_.ONE_YEAR=_.ONE_DAY*365},66736:function(Re,_,C){"use strict";Object.defineProperty(_,"__esModule",{value:!0});const H=C(62108);H.__exportStar(C(44273),_),H.__exportStar(C(47001),_),H.__exportStar(C(52939),_),H.__exportStar(C(36900),_)},52939:function(Re,_,C){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),C(62108).__exportStar(C(88766),_)},88766:function(Re,_){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.IWatch=void 0;class C{}_.IWatch=C},83207:function(Re,_,C){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.fromMiliseconds=_.toMiliseconds=void 0;const H=C(36900);function ce(ge){return ge*H.ONE_THOUSAND}_.toMiliseconds=ce;function ue(ge){return Math.floor(ge/H.ONE_THOUSAND)}_.fromMiliseconds=ue},83873:function(Re,_){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.delay=void 0;function C(H){return new Promise(ce=>{setTimeout(()=>{ce(!0)},H)})}_.delay=C},44273:function(Re,_,C){"use strict";Object.defineProperty(_,"__esModule",{value:!0});const H=C(62108);H.__exportStar(C(83873),_),H.__exportStar(C(83207),_)},47001:function(Re,_){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.Watch=void 0;class C{constructor(){this.timestamps=new Map}start(ce){if(this.timestamps.has(ce))throw new Error(`Watch already started for label: ${ce}`);this.timestamps.set(ce,{started:Date.now()})}stop(ce){const ue=this.get(ce);if(typeof ue.elapsed<"u")throw new Error(`Watch already stopped for label: ${ce}`);const ge=Date.now()-ue.started;this.timestamps.set(ce,{started:ue.started,elapsed:ge})}get(ce){const ue=this.timestamps.get(ce);if(typeof ue>"u")throw new Error(`No timestamp found for label: ${ce}`);return ue}elapsed(ce){const ue=this.get(ce);return ue.elapsed||Date.now()-ue.started}}_.Watch=C,_.default=C},62873:function(Re,_){"use strict";Object.defineProperty(_,"__esModule",{value:!0}),_.getLocalStorage=_.getLocalStorageOrThrow=_.getCrypto=_.getCryptoOrThrow=_.getLocation=_.getLocationOrThrow=_.getNavigator=_.getNavigatorOrThrow=_.getDocument=_.getDocumentOrThrow=_.getFromWindowOrThrow=_.getFromWindow=void 0;function C(le){let Z;return typeof window<"u"&&typeof window[le]<"u"&&(Z=window[le]),Z}_.getFromWindow=C;function H(le){const Z=C(le);if(!Z)throw new Error(`${le} is not defined in Window`);return Z}_.getFromWindowOrThrow=H;function ce(){return H("document")}_.getDocumentOrThrow=ce;function ue(){return C("document")}_.getDocument=ue;function ge(){return H("navigator")}_.getNavigatorOrThrow=ge;function B(){return C("navigator")}_.getNavigator=B;function re(){return H("location")}_.getLocationOrThrow=re;function z(){return C("location")}_.getLocation=z;function N(){return H("crypto")}_.getCryptoOrThrow=N;function T(){return C("crypto")}_.getCrypto=T;function j(){return H("localStorage")}_.getLocalStorageOrThrow=j;function ie(){return C("localStorage")}_.getLocalStorage=ie},65755:function(Re,_,C){"use strict";var H;H={value:!0},_.D=void 0;const ce=C(62873);function ue(){let ge,B;try{ge=ce.getDocumentOrThrow(),B=ce.getLocationOrThrow()}catch{return null}function re(){const fe=ge.getElementsByTagName("link"),Pe=[];for(let De=0;De<fe.length;De++){const Ce=fe[De],Ke=Ce.getAttribute("rel");if(Ke&&Ke.toLowerCase().indexOf("icon")>-1){const Ue=Ce.getAttribute("href");if(Ue)if(Ue.toLowerCase().indexOf("https:")===-1&&Ue.toLowerCase().indexOf("http:")===-1&&Ue.indexOf("//")!==0){let ye=B.protocol+"//"+B.host;if(Ue.indexOf("/")===0)ye+=Ue;else{const we=B.pathname.split("/");we.pop();const x=we.join("/");ye+=x+"/"+Ue}Pe.push(ye)}else if(Ue.indexOf("//")===0){const ye=B.protocol+Ue;Pe.push(ye)}else Pe.push(Ue)}}return Pe}function z(...fe){const Pe=ge.getElementsByTagName("meta");for(let De=0;De<Pe.length;De++){const Ce=Pe[De],Ke=["itemprop","property","name"].map(Ue=>Ce.getAttribute(Ue)).filter(Ue=>Ue?fe.includes(Ue):!1);if(Ke.length&&Ke){const Ue=Ce.getAttribute("content");if(Ue)return Ue}}return""}function N(){let fe=z("name","og:site_name","og:title","twitter:title");return fe||(fe=ge.title),fe}function T(){return z("description","og:description","twitter:description","keywords")}const j=N(),ie=T(),le=B.origin,Z=re();return{description:ie,url:le,icons:Z,name:j}}_.D=ue},54098:function(Re,_){var C=typeof self<"u"?self:this,H=function(){function ue(){this.fetch=!1,this.DOMException=C.DOMException}return ue.prototype=C,new ue}();(function(ue){var ge=function(B){var re={searchParams:"URLSearchParams"in ue,iterable:"Symbol"in ue&&"iterator"in Symbol,blob:"FileReader"in ue&&"Blob"in ue&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in ue,arrayBuffer:"ArrayBuffer"in ue};function z(g){return g&&DataView.prototype.isPrototypeOf(g)}if(re.arrayBuffer)var N=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],T=ArrayBuffer.isView||function(g){return g&&N.indexOf(Object.prototype.toString.call(g))>-1};function j(g){if(typeof g!="string"&&(g=String(g)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(g))throw new TypeError("Invalid character in header field name");return g.toLowerCase()}function ie(g){return typeof g!="string"&&(g=String(g)),g}function le(g){var v={next:function(){var m=g.shift();return{done:m===void 0,value:m}}};return re.iterable&&(v[Symbol.iterator]=function(){return v}),v}function Z(g){this.map={},g instanceof Z?g.forEach(function(v,m){this.append(m,v)},this):Array.isArray(g)?g.forEach(function(v){this.append(v[0],v[1])},this):g&&Object.getOwnPropertyNames(g).forEach(function(v){this.append(v,g[v])},this)}Z.prototype.append=function(g,v){g=j(g),v=ie(v);var m=this.map[g];this.map[g]=m?m+", "+v:v},Z.prototype.delete=function(g){delete this.map[j(g)]},Z.prototype.get=function(g){return g=j(g),this.has(g)?this.map[g]:null},Z.prototype.has=function(g){return this.map.hasOwnProperty(j(g))},Z.prototype.set=function(g,v){this.map[j(g)]=ie(v)},Z.prototype.forEach=function(g,v){for(var m in this.map)this.map.hasOwnProperty(m)&&g.call(v,this.map[m],m,this)},Z.prototype.keys=function(){var g=[];return this.forEach(function(v,m){g.push(m)}),le(g)},Z.prototype.values=function(){var g=[];return this.forEach(function(v){g.push(v)}),le(g)},Z.prototype.entries=function(){var g=[];return this.forEach(function(v,m){g.push([m,v])}),le(g)},re.iterable&&(Z.prototype[Symbol.iterator]=Z.prototype.entries);function ne(g){if(g.bodyUsed)return Promise.reject(new TypeError("Already read"));g.bodyUsed=!0}function fe(g){return new Promise(function(v,m){g.onload=function(){v(g.result)},g.onerror=function(){m(g.error)}})}function Pe(g){var v=new FileReader,m=fe(v);return v.readAsArrayBuffer(g),m}function De(g){var v=new FileReader,m=fe(v);return v.readAsText(g),m}function Ce(g){for(var v=new Uint8Array(g),m=new Array(v.length),y=0;y<v.length;y++)m[y]=String.fromCharCode(v[y]);return m.join("")}function Ke(g){if(g.slice)return g.slice(0);var v=new Uint8Array(g.byteLength);return v.set(new Uint8Array(g)),v.buffer}function Ue(){return this.bodyUsed=!1,this._initBody=function(g){this._bodyInit=g,g?typeof g=="string"?this._bodyText=g:re.blob&&Blob.prototype.isPrototypeOf(g)?this._bodyBlob=g:re.formData&&FormData.prototype.isPrototypeOf(g)?this._bodyFormData=g:re.searchParams&&URLSearchParams.prototype.isPrototypeOf(g)?this._bodyText=g.toString():re.arrayBuffer&&re.blob&&z(g)?(this._bodyArrayBuffer=Ke(g.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):re.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(g)||T(g))?this._bodyArrayBuffer=Ke(g):this._bodyText=g=Object.prototype.toString.call(g):this._bodyText="",this.headers.get("content-type")||(typeof g=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):re.searchParams&&URLSearchParams.prototype.isPrototypeOf(g)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},re.blob&&(this.blob=function(){var g=ne(this);if(g)return g;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?ne(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(Pe)}),this.text=function(){var g=ne(this);if(g)return g;if(this._bodyBlob)return De(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(Ce(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},re.formData&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}var ye=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function we(g){var v=g.toUpperCase();return ye.indexOf(v)>-1?v:g}function x(g,v){v=v||{};var m=v.body;if(g instanceof x){if(g.bodyUsed)throw new TypeError("Already read");this.url=g.url,this.credentials=g.credentials,v.headers||(this.headers=new Z(g.headers)),this.method=g.method,this.mode=g.mode,this.signal=g.signal,!m&&g._bodyInit!=null&&(m=g._bodyInit,g.bodyUsed=!0)}else this.url=String(g);if(this.credentials=v.credentials||this.credentials||"same-origin",(v.headers||!this.headers)&&(this.headers=new Z(v.headers)),this.method=we(v.method||this.method||"GET"),this.mode=v.mode||this.mode||null,this.signal=v.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&m)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(m)}x.prototype.clone=function(){return new x(this,{body:this._bodyInit})};function h(g){var v=new FormData;return g.trim().split("&").forEach(function(m){if(m){var y=m.split("="),w=y.shift().replace(/\+/g," "),S=y.join("=").replace(/\+/g," ");v.append(decodeURIComponent(w),decodeURIComponent(S))}}),v}function P(g){var v=new Z,m=g.replace(/\r?\n[\t ]+/g," ");return m.split(/\r?\n/).forEach(function(y){var w=y.split(":"),S=w.shift().trim();if(S){var q=w.join(":").trim();v.append(S,q)}}),v}Ue.call(x.prototype);function W(g,v){v||(v={}),this.type="default",this.status=v.status===void 0?200:v.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in v?v.statusText:"OK",this.headers=new Z(v.headers),this.url=v.url||"",this._initBody(g)}Ue.call(W.prototype),W.prototype.clone=function(){return new W(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Z(this.headers),url:this.url})},W.error=function(){var g=new W(null,{status:0,statusText:""});return g.type="error",g};var f=[301,302,303,307,308];W.redirect=function(g,v){if(f.indexOf(v)===-1)throw new RangeError("Invalid status code");return new W(null,{status:v,headers:{location:g}})},B.DOMException=ue.DOMException;try{new B.DOMException}catch{B.DOMException=function(v,m){this.message=v,this.name=m;var y=Error(v);this.stack=y.stack},B.DOMException.prototype=Object.create(Error.prototype),B.DOMException.prototype.constructor=B.DOMException}function E(g,v){return new Promise(function(m,y){var w=new x(g,v);if(w.signal&&w.signal.aborted)return y(new B.DOMException("Aborted","AbortError"));var S=new XMLHttpRequest;function q(){S.abort()}S.onload=function(){var A={status:S.status,statusText:S.statusText,headers:P(S.getAllResponseHeaders()||"")};A.url="responseURL"in S?S.responseURL:A.headers.get("X-Request-URL");var V="response"in S?S.response:S.responseText;m(new W(V,A))},S.onerror=function(){y(new TypeError("Network request failed"))},S.ontimeout=function(){y(new TypeError("Network request failed"))},S.onabort=function(){y(new B.DOMException("Aborted","AbortError"))},S.open(w.method,w.url,!0),w.credentials==="include"?S.withCredentials=!0:w.credentials==="omit"&&(S.withCredentials=!1),"responseType"in S&&re.blob&&(S.responseType="blob"),w.headers.forEach(function(A,V){S.setRequestHeader(V,A)}),w.signal&&(w.signal.addEventListener("abort",q),S.onreadystatechange=function(){S.readyState===4&&w.signal.removeEventListener("abort",q)}),S.send(typeof w._bodyInit>"u"?null:w._bodyInit)})}return E.polyfill=!0,ue.fetch||(ue.fetch=E,ue.Headers=Z,ue.Request=x,ue.Response=W),B.Headers=Z,B.Request=x,B.Response=W,B.fetch=E,Object.defineProperty(B,"__esModule",{value:!0}),B}({})})(H),H.fetch.ponyfill=!0,delete H.fetch.polyfill;var ce=H;_=ce.fetch,_.default=ce.fetch,_.fetch=ce.fetch,_.Headers=ce.Headers,_.Request=ce.Request,_.Response=ce.Response,Re.exports=_},44020:function(Re){"use strict";var _="%[a-f0-9]{2}",C=new RegExp("("+_+")|([^%]+?)","gi"),H=new RegExp("("+_+")+","gi");function ce(B,re){try{return[decodeURIComponent(B.join(""))]}catch{}if(B.length===1)return B;re=re||1;var z=B.slice(0,re),N=B.slice(re);return Array.prototype.concat.call([],ce(z),ce(N))}function ue(B){try{return decodeURIComponent(B)}catch{for(var re=B.match(C)||[],z=1;z<re.length;z++)B=ce(re,z).join(""),re=B.match(C)||[];return B}}function ge(B){for(var re={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},z=H.exec(B);z;){try{re[z[0]]=decodeURIComponent(z[0])}catch{var N=ue(z[0]);N!==z[0]&&(re[z[0]]=N)}z=H.exec(B)}re["%C2"]="\uFFFD";for(var T=Object.keys(re),j=0;j<T.length;j++){var ie=T[j];B=B.replace(new RegExp(ie,"g"),re[ie])}return B}Re.exports=function(B){if(typeof B!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof B+"`");try{return B=B.replace(/\+/g," "),decodeURIComponent(B)}catch{return ge(B)}}},92806:function(Re){"use strict";Re.exports=function(_,C){for(var H={},ce=Object.keys(_),ue=Array.isArray(C),ge=0;ge<ce.length;ge++){var B=ce[ge],re=_[B];(ue?C.indexOf(B)!==-1:C(B,re,_))&&(H[B]=re)}return H}},72307:function(Re,_,C){Re=C.nmd(Re);var H=200,ce="__lodash_hash_undefined__",ue=1,ge=2,B=9007199254740991,re="[object Arguments]",z="[object Array]",N="[object AsyncFunction]",T="[object Boolean]",j="[object Date]",ie="[object Error]",le="[object Function]",Z="[object GeneratorFunction]",ne="[object Map]",fe="[object Number]",Pe="[object Null]",De="[object Object]",Ce="[object Promise]",Ke="[object Proxy]",Ue="[object RegExp]",ye="[object Set]",we="[object String]",x="[object Symbol]",h="[object Undefined]",P="[object WeakMap]",W="[object ArrayBuffer]",f="[object DataView]",E="[object Float32Array]",g="[object Float64Array]",v="[object Int8Array]",m="[object Int16Array]",y="[object Int32Array]",w="[object Uint8Array]",S="[object Uint8ClampedArray]",q="[object Uint16Array]",A="[object Uint32Array]",V=/[\\^$.*+?()[\]{}|]/g,xe=/^\[object .+?Constructor\]$/,Q=/^(?:0|[1-9]\d*)$/,pe={};pe[E]=pe[g]=pe[v]=pe[m]=pe[y]=pe[w]=pe[S]=pe[q]=pe[A]=!0,pe[re]=pe[z]=pe[W]=pe[T]=pe[f]=pe[j]=pe[ie]=pe[le]=pe[ne]=pe[fe]=pe[De]=pe[Ue]=pe[ye]=pe[we]=pe[P]=!1;var Oe=typeof C.g=="object"&&C.g&&C.g.Object===Object&&C.g,Ne=typeof self=="object"&&self&&self.Object===Object&&self,Be=Oe||Ne||Function("return this")(),se=_&&!_.nodeType&&_,ae=se&&!0&&Re&&!Re.nodeType&&Re,k=ae&&ae.exports===se,d=k&&Oe.process,$=function(){try{return d&&d.binding&&d.binding("util")}catch{}}(),Ae=$&&$.isTypedArray;function We(R,J){for(var Se=-1,$e=R==null?0:R.length,jt=0,it=[];++Se<$e;){var zt=R[Se];J(zt,Se,R)&&(it[jt++]=zt)}return it}function ht(R,J){for(var Se=-1,$e=J.length,jt=R.length;++Se<$e;)R[jt+Se]=J[Se];return R}function Ot(R,J){for(var Se=-1,$e=R==null?0:R.length;++Se<$e;)if(J(R[Se],Se,R))return!0;return!1}function pt(R,J){for(var Se=-1,$e=Array(R);++Se<R;)$e[Se]=J(Se);return $e}function gt(R){return function(J){return R(J)}}function Vt(R,J){return R.has(J)}function rr(R,J){return R==null?void 0:R[J]}function _t(R){var J=-1,Se=Array(R.size);return R.forEach(function($e,jt){Se[++J]=[jt,$e]}),Se}function yt(R,J){return function(Se){return R(J(Se))}}function dt(R){var J=-1,Se=Array(R.size);return R.forEach(function($e){Se[++J]=$e}),Se}var lt=Array.prototype,at=Function.prototype,et=Object.prototype,tt=Be["__core-js_shared__"],nt=at.toString,qe=et.hasOwnProperty,vt=function(){var R=/[^.]+$/.exec(tt&&tt.keys&&tt.keys.IE_PROTO||"");return R?"Symbol(src)_1."+R:""}(),wt=et.toString,It=RegExp("^"+nt.call(qe).replace(V,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xt=k?Be.Buffer:void 0,Et=Be.Symbol,Pt=Be.Uint8Array,Tt=et.propertyIsEnumerable,an=lt.splice,Sr=Et?Et.toStringTag:void 0,mn=Object.getOwnPropertySymbols,zn=xt?xt.isBuffer:void 0,oi=yt(Object.keys,Object),An=$n(Be,"DataView"),Rn=$n(Be,"Map"),Qt=$n(Be,"Promise"),Xt=$n(Be,"Set"),Jt=$n(Be,"WeakMap"),qt=$n(Object,"create"),cr=ci(An),nr=ci(Rn),Zt=ci(Qt),ur=ci(Xt),hr=ci(Jt),ir=Et?Et.prototype:void 0,er=ir?ir.valueOf:void 0;function Mt(R){var J=-1,Se=R==null?0:R.length;for(this.clear();++J<Se;){var $e=R[J];this.set($e[0],$e[1])}}function lr(){this.__data__=qt?qt(null):{},this.size=0}function fr(R){var J=this.has(R)&&delete this.__data__[R];return this.size-=J?1:0,J}function dr(R){var J=this.__data__;if(qt){var Se=J[R];return Se===ce?void 0:Se}return qe.call(J,R)?J[R]:void 0}function pr(R){var J=this.__data__;return qt?J[R]!==void 0:qe.call(J,R)}function Ta(R,J){var Se=this.__data__;return this.size+=this.has(R)?0:1,Se[R]=qt&&J===void 0?ce:J,this}Mt.prototype.clear=lr,Mt.prototype.delete=fr,Mt.prototype.get=dr,Mt.prototype.has=pr,Mt.prototype.set=Ta;function _n(R){var J=-1,Se=R==null?0:R.length;for(this.clear();++J<Se;){var $e=R[J];this.set($e[0],$e[1])}}function Na(){this.__data__=[],this.size=0}function Ki(R){var J=this.__data__,Se=Wi(J,R);if(Se<0)return!1;var $e=J.length-1;return Se==$e?J.pop():an.call(J,Se,1),--this.size,!0}function Is(R){var J=this.__data__,Se=Wi(J,R);return Se<0?void 0:J[Se][1]}function Vi(R){return Wi(this.__data__,R)>-1}function qi(R,J){var Se=this.__data__,$e=Wi(Se,R);return $e<0?(++this.size,Se.push([R,J])):Se[$e][1]=J,this}_n.prototype.clear=Na,_n.prototype.delete=Ki,_n.prototype.get=Is,_n.prototype.has=Vi,_n.prototype.set=qi;function cn(R){var J=-1,Se=R==null?0:R.length;for(this.clear();++J<Se;){var $e=R[J];this.set($e[0],$e[1])}}function Fa(){this.size=0,this.__data__={hash:new Mt,map:new(Rn||_n),string:new Mt}}function Ua(R){var J=Gi(this,R).delete(R);return this.size-=J?1:0,J}function xs(R){return Gi(this,R).get(R)}function ho(R){return Gi(this,R).has(R)}function ja(R,J){var Se=Gi(this,R),$e=Se.size;return Se.set(R,J),this.size+=Se.size==$e?0:1,this}cn.prototype.clear=Fa,cn.prototype.delete=Ua,cn.prototype.get=xs,cn.prototype.has=ho,cn.prototype.set=ja;function Di(R){var J=-1,Se=R==null?0:R.length;for(this.__data__=new cn;++J<Se;)this.add(R[J])}function La(R){return this.__data__.set(R,ce),this}function Ma(R){return this.__data__.has(R)}Di.prototype.add=Di.prototype.push=La,Di.prototype.has=Ma;function wn(R){var J=this.__data__=new _n(R);this.size=J.size}function Ba(){this.__data__=new _n,this.size=0}function lo(R){var J=this.__data__,Se=J.delete(R);return this.size=J.size,Se}function hh(R){return this.__data__.get(R)}function za(R){return this.__data__.has(R)}function $a(R,J){var Se=this.__data__;if(Se instanceof _n){var $e=Se.__data__;if(!Rn||$e.length<H-1)return $e.push([R,J]),this.size=++Se.size,this;Se=this.__data__=new cn($e)}return Se.set(R,J),this.size=Se.size,this}wn.prototype.clear=Ba,wn.prototype.delete=lo,wn.prototype.get=hh,wn.prototype.has=za,wn.prototype.set=$a;function Ha(R,J){var Se=ui(R),$e=!Se&&mo(R),jt=!Se&&!$e&&Ji(R),it=!Se&&!$e&&!jt&&_o(R),zt=Se||$e||jt||it,yr=zt?pt(R.length,String):[],gr=yr.length;for(var $t in R)(J||qe.call(R,$t))&&!(zt&&($t=="length"||jt&&($t=="offset"||$t=="parent")||it&&($t=="buffer"||$t=="byteLength"||$t=="byteOffset")||Ja($t,gr)))&&yr.push($t);return yr}function Wi(R,J){for(var Se=R.length;Se--;)if(Os(R[Se][0],J))return Se;return-1}function Ka(R,J,Se){var $e=J(R);return ui(R)?$e:ht($e,Se(R))}function Si(R){return R==null?R===void 0?h:Pe:Sr&&Sr in Object(R)?yo(R):lh(R)}function fo(R){return xi(R)&&Si(R)==re}function po(R,J,Se,$e,jt){return R===J?!0:R==null||J==null||!xi(R)&&!xi(J)?R!==R&&J!==J:Va(R,J,Se,$e,po,jt)}function Va(R,J,Se,$e,jt,it){var zt=ui(R),yr=ui(J),gr=zt?z:Jr(R),$t=yr?z:Jr(J);gr=gr==re?De:gr,$t=$t==re?De:$t;var Nr=gr==De,Yr=$t==De,Le=gr==$t;if(Le&&Ji(R)){if(!Ji(J))return!1;zt=!0,Nr=!1}if(Le&&!Nr)return it||(it=new wn),zt||_o(R)?go(R,J,Se,$e,jt,it):Ga(R,J,gr,Se,$e,jt,it);if(!(Se&ue)){var wr=Nr&&qe.call(R,"__wrapped__"),zr=Yr&&qe.call(J,"__wrapped__");if(wr||zr){var Qr=wr?R.value():R,Tn=zr?J.value():J;return it||(it=new wn),jt(Qr,Tn,Se,$e,it)}}return Le?(it||(it=new wn),ka(R,J,Se,$e,jt,it)):!1}function qa(R){if(!Ps(R)||Qa(R))return!1;var J=_r(R)?It:xe;return J.test(ci(R))}function Wa(R){return xi(R)&&Ii(R.length)&&!!pe[Si(R)]}function Ir(R){if(!vo(R))return oi(R);var J=[];for(var Se in Object(R))qe.call(R,Se)&&Se!="constructor"&&J.push(Se);return J}function go(R,J,Se,$e,jt,it){var zt=Se&ue,yr=R.length,gr=J.length;if(yr!=gr&&!(zt&&gr>yr))return!1;var $t=it.get(R);if($t&&it.get(J))return $t==J;var Nr=-1,Yr=!0,Le=Se&ge?new Di:void 0;for(it.set(R,J),it.set(J,R);++Nr<yr;){var wr=R[Nr],zr=J[Nr];if($e)var Qr=zt?$e(zr,wr,Nr,J,R,it):$e(wr,zr,Nr,R,J,it);if(Qr!==void 0){if(Qr)continue;Yr=!1;break}if(Le){if(!Ot(J,function(Tn,Hn){if(!Vt(Le,Hn)&&(wr===Tn||jt(wr,Tn,Se,$e,it)))return Le.push(Hn)})){Yr=!1;break}}else if(!(wr===zr||jt(wr,zr,Se,$e,it))){Yr=!1;break}}return it.delete(R),it.delete(J),Yr}function Ga(R,J,Se,$e,jt,it,zt){switch(Se){case f:if(R.byteLength!=J.byteLength||R.byteOffset!=J.byteOffset)return!1;R=R.buffer,J=J.buffer;case W:return!(R.byteLength!=J.byteLength||!it(new Pt(R),new Pt(J)));case T:case j:case fe:return Os(+R,+J);case ie:return R.name==J.name&&R.message==J.message;case Ue:case we:return R==J+"";case ne:var yr=_t;case ye:var gr=$e&ue;if(yr||(yr=dt),R.size!=J.size&&!gr)return!1;var $t=zt.get(R);if($t)return $t==J;$e|=ge,zt.set(R,J);var Nr=go(yr(R),yr(J),$e,jt,it,zt);return zt.delete(R),Nr;case x:if(er)return er.call(R)==er.call(J)}return!1}function ka(R,J,Se,$e,jt,it){var zt=Se&ue,yr=ai(R),gr=yr.length,$t=ai(J),Nr=$t.length;if(gr!=Nr&&!zt)return!1;for(var Yr=gr;Yr--;){var Le=yr[Yr];if(!(zt?Le in J:qe.call(J,Le)))return!1}var wr=it.get(R);if(wr&&it.get(J))return wr==J;var zr=!0;it.set(R,J),it.set(J,R);for(var Qr=zt;++Yr<gr;){Le=yr[Yr];var Tn=R[Le],Hn=J[Le];if($e)var Yi=zt?$e(Hn,Tn,Le,J,R,it):$e(Tn,Hn,Le,R,J,it);if(!(Yi===void 0?Tn===Hn||jt(Tn,Hn,Se,$e,it):Yi)){zr=!1;break}Qr||(Qr=Le=="constructor")}if(zr&&!Qr){var Kn=R.constructor,Oi=J.constructor;Kn!=Oi&&"constructor"in R&&"constructor"in J&&!(typeof Kn=="function"&&Kn instanceof Kn&&typeof Oi=="function"&&Oi instanceof Oi)&&(zr=!1)}return it.delete(R),it.delete(J),zr}function ai(R){return Ka(R,Xa,ki)}function Gi(R,J){var Se=R.__data__;return Ya(J)?Se[typeof J=="string"?"string":"hash"]:Se.map}function $n(R,J){var Se=rr(R,J);return qa(Se)?Se:void 0}function yo(R){var J=qe.call(R,Sr),Se=R[Sr];try{R[Sr]=void 0;var $e=!0}catch{}var jt=wt.call(R);return $e&&(J?R[Sr]=Se:delete R[Sr]),jt}var ki=mn?function(R){return R==null?[]:(R=Object(R),We(mn(R),function(J){return Tt.call(R,J)}))}:Za,Jr=Si;(An&&Jr(new An(new ArrayBuffer(1)))!=f||Rn&&Jr(new Rn)!=ne||Qt&&Jr(Qt.resolve())!=Ce||Xt&&Jr(new Xt)!=ye||Jt&&Jr(new Jt)!=P)&&(Jr=function(R){var J=Si(R),Se=J==De?R.constructor:void 0,$e=Se?ci(Se):"";if($e)switch($e){case cr:return f;case nr:return ne;case Zt:return Ce;case ur:return ye;case hr:return P}return J});function Ja(R,J){return J=J??B,!!J&&(typeof R=="number"||Q.test(R))&&R>-1&&R%1==0&&R<J}function Ya(R){var J=typeof R;return J=="string"||J=="number"||J=="symbol"||J=="boolean"?R!=="__proto__":R===null}function Qa(R){return!!vt&&vt in R}function vo(R){var J=R&&R.constructor,Se=typeof J=="function"&&J.prototype||et;return R===Se}function lh(R){return wt.call(R)}function ci(R){if(R!=null){try{return nt.call(R)}catch{}try{return R+""}catch{}}return""}function Os(R,J){return R===J||R!==R&&J!==J}var mo=fo(function(){return arguments}())?fo:function(R){return xi(R)&&qe.call(R,"callee")&&!Tt.call(R,"callee")},ui=Array.isArray;function fh(R){return R!=null&&Ii(R.length)&&!_r(R)}var Ji=zn||ec;function Cr(R,J){return po(R,J)}function _r(R){if(!Ps(R))return!1;var J=Si(R);return J==le||J==Z||J==N||J==Ke}function Ii(R){return typeof R=="number"&&R>-1&&R%1==0&&R<=B}function Ps(R){var J=typeof R;return R!=null&&(J=="object"||J=="function")}function xi(R){return R!=null&&typeof R=="object"}var _o=Ae?gt(Ae):Wa;function Xa(R){return fh(R)?Ha(R):Ir(R)}function Za(){return[]}function ec(){return!1}Re.exports=Cr},85346:function(Re){"use strict";function _(H){try{return JSON.stringify(H)}catch{return'"[Circular]"'}}Re.exports=C;function C(H,ce,ue){var ge=ue&&ue.stringify||_,B=1;if(typeof H=="object"&&H!==null){var re=ce.length+B;if(re===1)return H;var z=new Array(re);z[0]=ge(H);for(var N=1;N<re;N++)z[N]=ge(ce[N]);return z.join(" ")}if(typeof H!="string")return H;var T=ce.length;if(T===0)return H;for(var j="",ie=1-B,le=-1,Z=H&&H.length||0,ne=0;ne<Z;){if(H.charCodeAt(ne)===37&&ne+1<Z){switch(le=le>-1?le:0,H.charCodeAt(ne+1)){case 100:case 102:if(ie>=T||ce[ie]==null)break;le<ne&&(j+=H.slice(le,ne)),j+=Number(ce[ie]),le=ne+2,ne++;break;case 105:if(ie>=T||ce[ie]==null)break;le<ne&&(j+=H.slice(le,ne)),j+=Math.floor(Number(ce[ie])),le=ne+2,ne++;break;case 79:case 111:case 106:if(ie>=T||ce[ie]===void 0)break;le<ne&&(j+=H.slice(le,ne));var fe=typeof ce[ie];if(fe==="string"){j+="'"+ce[ie]+"'",le=ne+2,ne++;break}if(fe==="function"){j+=ce[ie].name||"<anonymous>",le=ne+2,ne++;break}j+=ge(ce[ie]),le=ne+2,ne++;break;case 115:if(ie>=T)break;le<ne&&(j+=H.slice(le,ne)),j+=String(ce[ie]),le=ne+2,ne++;break;case 37:le<ne&&(j+=H.slice(le,ne)),j+="%",le=ne+2,ne++,ie--;break}++ie}++ne}return le===-1?H:(le<Z&&(j+=H.slice(le)),j)}},64599:function(Re,_,C){var H=C(96263);function ce(ue,ge){var B=typeof Symbol<"u"&&ue[Symbol.iterator]||ue["@@iterator"];if(!B){if(Array.isArray(ue)||(B=H(ue))||ge&&ue&&typeof ue.length=="number"){B&&(ue=B);var re=0,z=function(){};return{s:z,n:function(){return re>=ue.length?{done:!0}:{done:!1,value:ue[re++]}},e:function(le){throw le},f:z}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var N=!0,T=!1,j;return{s:function(){B=B.call(ue)},n:function(){var le=B.next();return N=le.done,le},e:function(le){T=!0,j=le},f:function(){try{!N&&B.return!=null&&B.return()}finally{if(T)throw j}}}}Re.exports=ce,Re.exports.__esModule=!0,Re.exports.default=Re.exports},36559:function(Re,_,C){"use strict";const H=C(85346);Re.exports=B;const ce=we().console||{},ue={mapHttpRequest:fe,mapHttpResponse:fe,wrapRequestSerializer:Pe,wrapResponseSerializer:Pe,wrapErrorSerializer:Pe,req:fe,res:fe,err:Z};function ge(x,h){return Array.isArray(x)?x.filter(function(W){return W!=="!stdSerializers.err"}):x===!0?Object.keys(h):!1}function B(x){x=x||{},x.browser=x.browser||{};const h=x.browser.transmit;if(h&&typeof h.send!="function")throw Error("pino: transmit option must have a send function");const P=x.browser.write||ce;x.browser.write&&(x.browser.asObject=!0);const W=x.serializers||{},f=ge(x.browser.serialize,W);let E=x.browser.serialize;Array.isArray(x.browser.serialize)&&x.browser.serialize.indexOf("!stdSerializers.err")>-1&&(E=!1);const g=["error","fatal","warn","info","debug","trace"];typeof P=="function"&&(P.error=P.fatal=P.warn=P.info=P.debug=P.trace=P),x.enabled===!1&&(x.level="silent");const v=x.level||"info",m=Object.create(P);m.log||(m.log=De),Object.defineProperty(m,"levelVal",{get:w}),Object.defineProperty(m,"level",{get:S,set:q});const y={transmit:h,serialize:f,asObject:x.browser.asObject,levels:g,timestamp:ne(x)};m.levels=B.levels,m.level=v,m.setMaxListeners=m.getMaxListeners=m.emit=m.addListener=m.on=m.prependListener=m.once=m.prependOnceListener=m.removeListener=m.removeAllListeners=m.listeners=m.listenerCount=m.eventNames=m.write=m.flush=De,m.serializers=W,m._serialize=f,m._stdErrSerialize=E,m.child=A,h&&(m._logEvent=le());function w(){return this.level==="silent"?1/0:this.levels.values[this.level]}function S(){return this._level}function q(V){if(V!=="silent"&&!this.levels.values[V])throw Error("unknown level "+V);this._level=V,re(y,m,"error","log"),re(y,m,"fatal","error"),re(y,m,"warn","error"),re(y,m,"info","log"),re(y,m,"debug","log"),re(y,m,"trace","log")}function A(V,xe){if(!V)throw new Error("missing bindings for child Pino");xe=xe||{},f&&V.serializers&&(xe.serializers=V.serializers);const Q=xe.serializers;if(f&&Q){var pe=Object.assign({},W,Q),Oe=x.browser.serialize===!0?Object.keys(pe):f;delete V.serializers,T([V],Oe,pe,this._stdErrSerialize)}function Ne(Be){this._childLevel=(Be._childLevel|0)+1,this.error=j(Be,V,"error"),this.fatal=j(Be,V,"fatal"),this.warn=j(Be,V,"warn"),this.info=j(Be,V,"info"),this.debug=j(Be,V,"debug"),this.trace=j(Be,V,"trace"),pe&&(this.serializers=pe,this._serialize=Oe),h&&(this._logEvent=le([].concat(Be._logEvent.bindings,V)))}return Ne.prototype=this,new Ne(this)}return m}B.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},B.stdSerializers=ue,B.stdTimeFunctions=Object.assign({},{nullTime:Ce,epochTime:Ke,unixTime:Ue,isoTime:ye});function re(x,h,P,W){const f=Object.getPrototypeOf(h);h[P]=h.levelVal>h.levels.values[P]?De:f[P]?f[P]:ce[P]||ce[W]||De,z(x,h,P)}function z(x,h,P){!x.transmit&&h[P]===De||(h[P]=function(W){return function(){const E=x.timestamp(),g=new Array(arguments.length),v=Object.getPrototypeOf&&Object.getPrototypeOf(this)===ce?ce:this;for(var m=0;m<g.length;m++)g[m]=arguments[m];if(x.serialize&&!x.asObject&&T(g,this._serialize,this.serializers,this._stdErrSerialize),x.asObject?W.call(v,N(this,P,g,E)):W.apply(v,g),x.transmit){const y=x.transmit.level||h.level,w=B.levels.values[y],S=B.levels.values[P];if(S<w)return;ie(this,{ts:E,methodLevel:P,methodValue:S,transmitLevel:y,transmitValue:B.levels.values[x.transmit.level||h.level],send:x.transmit.send,val:h.levelVal},g)}}}(h[P]))}function N(x,h,P,W){x._serialize&&T(P,x._serialize,x.serializers,x._stdErrSerialize);const f=P.slice();let E=f[0];const g={};W&&(g.time=W),g.level=B.levels.values[h];let v=(x._childLevel|0)+1;if(v<1&&(v=1),E!==null&&typeof E=="object"){for(;v--&&typeof f[0]=="object";)Object.assign(g,f.shift());E=f.length?H(f.shift(),f):void 0}else typeof E=="string"&&(E=H(f.shift(),f));return E!==void 0&&(g.msg=E),g}function T(x,h,P,W){for(const f in x)if(W&&x[f]instanceof Error)x[f]=B.stdSerializers.err(x[f]);else if(typeof x[f]=="object"&&!Array.isArray(x[f]))for(const E in x[f])h&&h.indexOf(E)>-1&&E in P&&(x[f][E]=P[E](x[f][E]))}function j(x,h,P){return function(){const W=new Array(1+arguments.length);W[0]=h;for(var f=1;f<W.length;f++)W[f]=arguments[f-1];return x[P].apply(this,W)}}function ie(x,h,P){const W=h.send,f=h.ts,E=h.methodLevel,g=h.methodValue,v=h.val,m=x._logEvent.bindings;T(P,x._serialize||Object.keys(x.serializers),x.serializers,x._stdErrSerialize===void 0?!0:x._stdErrSerialize),x._logEvent.ts=f,x._logEvent.messages=P.filter(function(y){return m.indexOf(y)===-1}),x._logEvent.level.label=E,x._logEvent.level.value=g,W(E,x._logEvent,v),x._logEvent=le(m)}function le(x){return{ts:0,messages:[],bindings:x||[],level:{label:"",value:0}}}function Z(x){const h={type:x.constructor.name,msg:x.message,stack:x.stack};for(const P in x)h[P]===void 0&&(h[P]=x[P]);return h}function ne(x){return typeof x.timestamp=="function"?x.timestamp:x.timestamp===!1?Ce:Ke}function fe(){return{}}function Pe(x){return x}function De(){}function Ce(){return!1}function Ke(){return Date.now()}function Ue(){return Math.round(Date.now()/1e3)}function ye(){return new Date(Date.now()).toISOString()}function we(){function x(h){return typeof h<"u"&&h}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return x(self)||x(window)||x(this)||{}}}}}]);
